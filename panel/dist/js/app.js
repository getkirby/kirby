(function(t){function e(e){for(var i,r,o=e[0],l=e[1],u=e[2],d=0,h=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&h.push(n[r][0]),n[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);c&&c(e);while(h.length)h.shift()();return a.push.apply(a,u||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],i=!0,o=1;o<s.length;o++){var l=s[o];0!==n[l]&&(i=!1)}i&&(a.splice(e--,1),t=r(r.s=s[0]))}return t}var i={},n={app:0},a=[];function r(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=i,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(s,i,function(e){return t[e]}.bind(null,i));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var c=l;a.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"021f":function(t,e,s){"use strict";var i=s("3129"),n=s.n(i);n.a},"022d":function(t,e,s){},"04a5":function(t,e,s){},"04f3":function(t,e,s){},"05be":function(t,e,s){},"0643":function(t,e,s){},"0756":function(t,e,s){},"088c":function(t,e,s){"use strict";var i=s("0a9f"),n=s.n(i);n.a},"0a9f":function(t,e,s){},"0d56":function(t,e,s){"use strict";var i=s("8abf"),n=s.n(i);n.a},"0de1":function(t,e,s){},"0f13":function(t,e,s){},1174:function(t,e,s){},"11ae":function(t,e,s){"use strict";var i=s("2066"),n=s.n(i);n.a},"12fb":function(t,e,s){"use strict";var i=s("5cbe"),n=s.n(i);n.a},"146c":function(t,e,s){"use strict";var i=s("d733"),n=s.n(i);n.a},"16eb":function(t,e,s){"use strict";var i=s("f3da"),n=s.n(i);n.a},"18dd":function(t,e,s){"use strict";var i=s("9aff"),n=s.n(i);n.a},"19d7":function(t,e,s){"use strict";var i=s("7740"),n=s.n(i);n.a},"1a51":function(t,e,s){},"1a8b":function(t,e,s){},"1aeb":function(t,e,s){},"1c4e":function(t,e,s){"use strict";var i=s("c08c"),n=s.n(i);n.a},"1e3b":function(t,e,s){"use strict";var i=s("4200"),n=s.n(i);n.a},"1e4a":function(t,e,s){},"202d":function(t,e,s){"use strict";var i=s("48ae"),n=s.n(i);n.a},2066:function(t,e,s){},"20f8":function(t,e,s){},"21dc":function(t,e,s){"use strict";var i=s("f9c1"),n=s.n(i);n.a},2429:function(t,e,s){},"24c1":function(t,e,s){"use strict";var i=s("8216"),n=s.n(i);n.a},2609:function(t,e,s){},"27c1":function(t,e,s){"use strict";var i=s("2429"),n=s.n(i);n.a},"2a08":function(t,e,s){},3129:function(t,e,s){},3342:function(t,e,s){"use strict";var i=s("efe1"),n=s.n(i);n.a},"35cb":function(t,e,s){"use strict";var i=s("c130"),n=s.n(i);n.a},3787:function(t,e,s){"use strict";var i=s("3ee0"),n=s.n(i);n.a},"39c8":function(t,e,s){},"3a85":function(t,e,s){"use strict";var i=s("1a51"),n=s.n(i);n.a},"3c20":function(t,e,s){},"3dcf":function(t,e,s){},"3e1e":function(t,e,s){},"3ee0":function(t,e,s){},"40a6":function(t,e,s){},"414d":function(t,e,s){"use strict";var i=s("86ab"),n=s.n(i);n.a},4200:function(t,e,s){},"42e4":function(t,e,s){"use strict";var i=s("39c8"),n=s.n(i);n.a},4333:function(t,e,s){"use strict";var i=s("1aeb"),n=s.n(i);n.a},"43bf":function(t,e,s){},4433:function(t,e,s){"use strict";var i=s("04a5"),n=s.n(i);n.a},"48ae":function(t,e,s){},"49b6":function(t,e,s){},"4a4b":function(t,e,s){"use strict";var i=s("3c20"),n=s.n(i);n.a},"4c2e":function(t,e,s){},"4cb2":function(t,e,s){"use strict";var i=s("a2eb"),n=s.n(i);n.a},"4d5b":function(t,e,s){},"4e0b":function(t,e,s){},"4f8f":function(t,e,s){},"50da":function(t,e,s){"use strict";var i=s("af07"),n=s.n(i);n.a},"526c":function(t,e,s){},"53c5":function(t,e,s){"use strict";var i=s("0f13"),n=s.n(i);n.a},"53fd":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("37e1");var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.$store.state.system.info.isBroken?s("div",{staticClass:"k-panel"},[s("main",{staticClass:"k-panel-view"},[s("k-error-view",[t.debug?s("p",[t._v(" "+t._s(t.$store.state.system.info.error)+" ")]):s("p",[t._v(" The panel cannot connect to the API ")])])],1)]):s("div",{staticClass:"k-panel",attrs:{"data-dragging":t.$store.state.drag,"data-loading":t.$store.state.isLoading,"data-topbar":t.inside,"data-dialog":t.$store.state.dialog,"data-translation":t.translation,"data-translation-default":t.defaultTranslation}},[s("keep-alive",[s("k-icons")],1),t.inside?s("header",{staticClass:"k-panel-header"},[s("k-topbar",{on:{register:function(e){return t.$refs.registration.open()}}}),t.$store.state.search?s("k-search",t._b({},"k-search",t.$store.state.search,!1)):t._e()],1):t._e(),s("main",{staticClass:"k-panel-view"},[s("router-view")],1),t.inside?s("k-form-buttons"):t._e(),s("k-error-dialog"),t.offline?s("div",{staticClass:"k-offline-warning"},[s("p",[t._v("The panel is currently offline")])]):t._e(),t.inside?s("k-registration",{ref:"registration"}):t._e()],1)},n=[],a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{staticClass:"k-icons",attrs:{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",overflow:"hidden"}},[s("defs",t._l(t.$options.icons,(function(e,i){return s("symbol",{key:i,attrs:{id:"icon-"+i,viewBox:"0 0 16 16"},domProps:{innerHTML:t._s(e)}})})),0)])},r=[],o={icons:window.panel.plugins.icons},l=o,u=s("2877"),c=Object(u["a"])(l,a,r,!1,null,null,null),d=c.exports,h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-form-dialog",{ref:"dialog",attrs:{fields:t.fields,"submit-button":t.$t("license.register")},on:{submit:t.submit},model:{value:t.registration,callback:function(e){t.registration=e},expression:"registration"}})},p=[],m={props:{cancelButton:{type:[String,Boolean],default:!0},icon:String,submitButton:{type:[String,Boolean],default:!0},size:String,theme:String},methods:{close(){this.$refs.dialog.close(),this.$emit("close")},error(t){this.$refs.dialog.error(t)},open(){this.$refs.dialog.open(),this.$emit("open")},success(t){this.$refs.dialog.close(),t.route&&this.$router.push(t.route),t.message&&this.$store.dispatch("notification/success",t.message),t.event&&this.$events.$emit(t.event),this.$emit("success")}}},f={mixins:[m],data(){return{registration:{license:null,email:null}}},computed:{fields(){return{license:{label:this.$t("license.register.label"),type:"text",required:!0,counter:!1,placeholder:"K3-",help:this.$t("license.register.help")},email:{label:this.$t("email"),type:"email",required:!0,counter:!1}}}},methods:{submit(){this.$api.system.register(this.registration).then(()=>{this.$store.dispatch("system/register",this.registration.license),this.success({message:this.$t("license.register.success")})}).catch(t=>{this.$refs.dialog.error(t.message)})}}},g=f,b=Object(u["a"])(g,h,p,!1,null,null,null),k=b.exports;const v=window.panel||{},$={assets:"@/assets",api:"/api",site:"http://sandbox.test",url:"/",debug:!0,translation:"en",search:{limit:10}};var _,y,x,w,S,C,O,E,T,j,I,L,A={...$,...v},B={name:"App",components:{"k-icons":d,"k-registration":k},data(){return{offline:!1,dragging:!1,debug:A.debug}},computed:{inside(){return!(this.$route.meta.outside||!this.$store.state.user.current)},defaultTranslation(){return!!this.$store.state.languages.current&&this.$store.state.languages.current===this.$store.state.languages.default},translation(){return!!this.$store.state.languages.current&&this.$store.state.languages.current.code}},created(){this.$events.$on("offline",this.isOffline),this.$events.$on("online",this.isOnline),this.$events.$on("keydown.cmd.shift.f",this.search),this.$events.$on("drop",this.drop)},destroyed(){this.$events.$off("offline",this.isOffline),this.$events.$off("online",this.isOnline),this.$events.$off("keydown.cmd.shift.f",this.search),this.$events.$off("drop",this.drop)},methods:{drop(){this.$store.dispatch("drag",null)},isOnline(){this.offline=!1},isOffline(){!1===this.$store.state.system.info.isLocal&&(this.offline=!0)},search(t){t.preventDefault(),this.$store.dispatch("search",!0)}}},q=B,N=(s("5c0b"),Object(u["a"])(q,i,n,!1,null,null,null)),P=N.exports,D={install(t){t.filter("t",(function(t){return t}))}},R={install(t){t.prototype.$events=new t({data(){return{entered:null}},created(){window.addEventListener("online",this.online),window.addEventListener("offline",this.offline),window.addEventListener("dragenter",this.dragenter,!1),window.addEventListener("dragover",this.prevent,!1),window.addEventListener("dragexit",this.prevent,!1),window.addEventListener("dragleave",this.dragleave,!1),window.addEventListener("drop",this.drop,!1),window.addEventListener("keydown",this.keydown,!1),window.addEventListener("keyup",this.keyup,!1),document.addEventListener("click",this.click,!1)},destroyed(){window.removeEventListener("online",this.online),window.removeEventListener("offline",this.offline),window.removeEventListener("dragenter",this.dragenter,!1),window.removeEventListener("dragover",this.prevent,!1),window.removeEventListener("dragexit",this.prevent,!1),window.removeEventListener("dragleave",this.dragleave,!1),window.removeEventListener("drop",this.drop,!1),window.removeEventListener("keydown",this.keydown,!1),window.removeEventListener("keyup",this.keyup,!1),document.removeEventListener("click",this.click,!1)},methods:{click(t){this.$emit("click",t)},drop(t){this.prevent(t),this.$emit("drop",t)},dragenter(t){this.entered=t.target,this.prevent(t),this.$emit("dragenter",t)},dragleave(t){this.prevent(t),this.entered===t.target&&this.$emit("dragleave",t)},keydown(t){let e=["keydown"];(t.metaKey||t.ctrlKey)&&e.push("cmd"),!0===t.altKey&&e.push("alt"),!0===t.shiftKey&&e.push("shift");let s=this.$helper.string.lcfirst(t.key);const i={escape:"esc",arrowUp:"up",arrowDown:"down",arrowLeft:"left",arrowRight:"right"};i[s]&&(s=i[s]),!1===["alt","control","shift","meta"].includes(s)&&e.push(s),this.$emit(e.join("."),t),this.$emit("keydown",t)},keyup(t){this.$emit("keyup",t)},online(t){this.$emit("online",t)},offline(t){this.$emit("offline",t)},prevent(t){t.stopPropagation(),t.preventDefault()}}})}},M=s("a026"),F=s("1dce"),U=s.n(F),z=(s("64e4"),{}),H=Object(u["a"])(z,_,y,!1,null,null,null),K=(H.exports,function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.isOpen?s("div",{staticClass:"k-dialog",on:{click:t.cancel}},[s("div",{staticClass:"k-dialog-box",attrs:{"data-size":t.size},on:{click:function(t){t.stopPropagation()}}},[t.notification?s("div",{staticClass:"k-dialog-notification",attrs:{"data-theme":t.notification.type}},[s("p",[t._v(t._s(t.notification.message))]),s("k-button",{attrs:{icon:"cancel"},on:{click:function(e){t.notification=null}}})],1):t._e(),s("div",{staticClass:"k-dialog-body"},[t._t("default")],2),t.$slots["footer"]||t.cancelButton||t.submitButton?s("footer",{staticClass:"k-dialog-footer"},[t._t("footer",[s("k-button-group",[s("span",[t.cancelButton?s("k-button",{staticClass:"k-dialog-button-cancel",attrs:{icon:"cancel"},on:{click:t.cancel}},[t._v(" "+t._s(t.cancelButtonLabel)+" ")]):t._e()],1),s("span",[t.submitButtonConfig?s("k-button",{staticClass:"k-dialog-button-submit",attrs:{icon:t.icon,theme:t.theme},on:{click:t.submit}},[t._v(" "+t._s(t.submitButtonLabel)+" ")]):t._e()],1)])])],2):t._e()])]):t._e()}),V=[],Y={props:{cancelButton:{type:[String,Boolean],default:!0},icon:{type:String,default:"check"},size:{type:String,default:"default"},submitButton:[String,Boolean],theme:String,visible:Boolean},data(){return{notification:null,isOpen:this.visible,scrollTop:0}},computed:{cancelButtonLabel(){return!1!==this.cancelButton&&(!0===this.cancelButton||0===this.cancelButton.length?this.$t("cancel"):this.cancelButton)},submitButtonConfig(){return void 0!==this.$attrs["button"]?this.$attrs["button"]:void 0===this.submitButton||this.submitButton},submitButtonLabel(){return!0===this.submitButton||0===this.submitButton.length?this.$t("confirm"):this.submitButton}},created(){this.$events.$on("keydown.esc",this.close,!1)},destroyed(){this.$events.$off("keydown.esc",this.close,!1)},mounted(){!0===this.isOpen&&this.$emit("open")},methods:{storeScrollPosition(){const t=document.querySelector(".k-panel-view");t&&t.scrollTop?this.scrollTop=t.scrollTop:this.scrollTop=0},restoreScrollPosition(){const t=document.querySelector(".k-panel-view");t&&t.scrollTop&&(t.scrollTop=this.scrollTop)},open(){this.storeScrollPosition(),this.$store.dispatch("dialog",!0),this.notification=null,this.isOpen=!0,this.$emit("open"),this.$events.$on("keydown.esc",this.close),this.$nextTick(()=>{this.$el&&(this.focus(),document.body.addEventListener("focus",t=>{!1===this.$el.contains(t.target)&&this.focus()},!0))})},close(){this.notification=null,this.isOpen=!1,this.$emit("close"),this.$events.$off("keydown.esc",this.close),this.$store.dispatch("dialog",null),this.restoreScrollPosition()},cancel(){this.$emit("cancel"),this.close()},focus(){if(this.$el&&this.$el.querySelector){let t=this.$el.querySelector("[autofocus], [data-autofocus], input, textarea, select, .k-dialog-button-submit");if(t||(t=this.$el.querySelector(".k-dialog-button-cancel")),t)return void t.focus()}},error(t){this.notification={message:t,type:"error"}},submit(){this.$emit("submit")},success(t){this.notification={message:t,type:"success"}}}},W=Y,J=(s("a5f3"),Object(u["a"])(W,K,V,!1,null,null,null)),G=J.exports,Z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.notification?s("k-dialog",{ref:"dialog",staticClass:"k-error-dialog",attrs:{visible:!0},on:{close:t.exit,open:t.enter}},[s("k-text",[t._v(t._s(t.notification.message))]),t.notification.details&&Object.keys(t.notification.details).length?s("dl",{staticClass:"k-error-details"},[t._l(t.notification.details,(function(e,i){return[s("dt",{key:"detail-label-"+i},[t._v(" "+t._s(e.label)+" ")]),s("dd",{key:"detail-message-"+i},["object"===typeof e.message?[s("ul",t._l(e.message,(function(e,i){return s("li",{key:i},[t._v(" "+t._s(e)+" ")])})),0)]:[t._v(" "+t._s(e.message)+" ")]],2)]}))],2):t._e(),s("k-button-group",{attrs:{slot:"footer"},slot:"footer"},[s("k-button",{attrs:{icon:"check"},on:{click:t.close}},[t._v(" "+t._s(t.$t("confirm"))+" ")])],1)],1):t._e()},X=[],Q={mixins:[m],computed:{notification(){let t=this.$store.state.notification;return"error"===t.type?t:null}},methods:{enter(){this.$nextTick(()=>{this.$el.querySelector(".k-dialog-footer .k-button").focus()})},exit(){this.$store.dispatch("notification/close")}}},tt=Q,et=(s("7737"),Object(u["a"])(tt,Z,X,!1,null,null,null)),st=et.exports,it=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-remove-dialog",{ref:"dialog",attrs:{text:t.$t("file.delete.confirm",{filename:t.filename})},on:{submit:t.submit}})},nt=[],at={mixins:[m],data(){return{id:null,parent:null,filename:null}},methods:{open(t,e){this.$api.files.get(t,e).then(e=>{this.id=e.id,this.filename=e.filename,this.parent=t,this.$refs.dialog.open()}).catch(t=>{this.$store.dispatch("notification/error",t)})},submit(){this.$api.files.delete(this.parent,this.filename).then(()=>{this.$store.dispatch("content/remove","files/"+this.id),this.$store.dispatch("notification/success",":)"),this.$events.$emit("file.delete",this.id),this.$emit("success"),this.$refs.dialog.close()}).catch(t=>{this.$refs.dialog.error(t.message)})}}},rt=at,ot=Object(u["a"])(rt,it,nt,!1,null,null,null),lt=ot.exports,ut=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-form-dialog",{ref:"dialog",attrs:{fields:t.fields,"submit-button":t.$t("rename")},on:{input:function(e){t.file.name=t.sluggify(t.file.name)},submit:t.submit},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}})},ct=[],dt={mixins:[m],data(){return{parent:null,file:{id:null,name:null,filename:null,extension:null}}},computed:{fields(){return{name:{label:this.$t("name"),type:"text",required:!0,icon:"title",after:"."+this.file.extension,preselect:!0}}},slugs(){return this.$store.state.languages.default?this.$store.state.languages.default.rules:this.system.slugs},system(){return this.$store.state.system.info}},methods:{open(t,e){this.$api.files.get(t,e,{select:["id","filename","name","extension"]}).then(e=>{this.file=e,this.parent=t,this.$refs.dialog.open()}).catch(t=>{this.$store.dispatch("notification/error",t)})},sluggify(t){return this.$helper.slug(t,[this.slugs,this.system.ascii],"@._-")},submit(){this.file.name=this.file.name.trim(),0!==this.file.name.length?this.$api.files.rename(this.parent,this.file.filename,this.file.name).then(t=>{this.$store.dispatch("content/move",["files/"+this.file.id,"files/"+t.id]),this.$store.dispatch("notification/success",":)"),this.$emit("success",t),this.$events.$emit("file.changeName",t),this.$refs.dialog.close()}).catch(t=>{this.$refs.dialog.error(t.message)}):this.$refs.dialog.error(this.$t("error.file.changeName.empty"))}}},ht=dt,pt=Object(u["a"])(ht,ut,ct,!1,null,null,null),mt=pt.exports,ft=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-dialog",{ref:"dialog",staticClass:"k-files-dialog",attrs:{size:"medium"},on:{cancel:function(e){return t.$emit("cancel")},submit:t.submit}},[t.issue?[s("k-box",{attrs:{text:t.issue,theme:"negative"}})]:[t.options.search?s("k-input",{staticClass:"k-dialog-search",attrs:{autofocus:!0,placeholder:t.$t("search")+" …",type:"text",icon:"search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}):t._e(),t.models.length?[s("k-list",t._l(t.models,(function(e){return s("k-list-item",{key:e.id,attrs:{text:e.text,info:e.info,image:e.image,icon:e.icon},on:{click:function(s){return t.toggle(e)}}},[t.isSelected(e)?s("k-button",{attrs:{slot:"options",autofocus:!0,icon:t.checkedIcon,tooltip:t.$t("remove"),theme:"positive"},slot:"options"}):s("k-button",{attrs:{slot:"options",autofocus:!0,tooltip:t.$t("select"),icon:"circle-outline"},slot:"options"})],1)})),1),s("k-pagination",t._b({staticClass:"k-dialog-pagination",attrs:{details:!0,dropdown:!1,align:"center"},on:{paginate:t.paginate}},"k-pagination",t.pagination,!1))]:s("k-empty",{attrs:{icon:"image"}},[t._v(" "+t._s(t.$t("dialog.files.empty"))+" ")])]],2)},gt=[],bt=(t,e)=>{var s=null;return function(){var i=this,n=arguments;clearTimeout(s),s=setTimeout((function(){t.apply(i,n)}),e)}},kt={data(){return{models:[],issue:null,selected:{},options:{endpoint:null,max:null,multiple:!0,parent:null,selected:[],search:!0},search:null,pagination:{limit:20,page:1,total:0}}},computed:{multiple(){return!0===this.options.multiple&&1!==this.options.max},checkedIcon(){return!0===this.multiple?"check":"circle-filled"}},watch:{search:bt((function(){this.pagination.page=0,this.fetch()}),200)},methods:{fetch(){const t={page:this.pagination.page,search:this.search,...this.fetchData||{}};return this.$api.get(this.options.endpoint,t).then(t=>{this.models=t.data,this.pagination=t.pagination,this.onFetched&&this.onFetched(t)}).catch(t=>{this.models=[],this.issue=t.message})},open(t,e){this.pagination.page=0,this.search=null;let s=!0;Array.isArray(t)?(this.models=t,s=!1):(this.models=[],e=t),this.options={...this.options,...e},this.selected={},this.options.selected.forEach(t=>{this.$set(this.selected,t,{id:t})}),s?this.fetch().then(()=>{this.$refs.dialog.open()}):this.$refs.dialog.open()},paginate(t){this.pagination.page=t.page,this.pagination.limit=t.limit,this.fetch()},submit(){this.$emit("submit",Object.values(this.selected)),this.$refs.dialog.close()},isSelected(t){return void 0!==this.selected[t.id]},toggle(t){!1!==this.options.multiple&&1!==this.options.max||(this.selected={}),!0!==this.isSelected(t)?this.options.max&&this.options.max<=Object.keys(this.selected).length||this.$set(this.selected,t.id,t):this.$delete(this.selected,t.id)}}},vt={mixins:[kt]},$t=vt,_t=(s("bf53"),Object(u["a"])($t,ft,gt,!1,null,null,null)),yt=_t.exports,xt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-dialog",t._g(t._b({ref:"dialog"},"k-dialog",t.$props,!1),t.$listeners),[s("k-form",{ref:"form",attrs:{fields:t.fields,novalidate:t.novalidate},on:{input:function(e){return t.$emit("input",e)},submit:function(e){return t.$emit("submit",e)}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)},wt=[],St={mixins:[m],props:{fields:{type:[Array,Object],default(){return[]}},novalidate:{type:Boolean,default:!0},size:{type:String,default:"medium"},submitButton:{type:[String,Boolean],default(){return this.$t("save")}},theme:{type:String,default:"positive"},value:{type:Object,default(){return{}}}}},Ct=St,Ot=Object(u["a"])(Ct,xt,wt,!1,null,null,null),Et=Ot.exports,Tt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-form-dialog",{ref:"dialog",attrs:{fields:t.fields,"submit-button":t.$t("language.create")},on:{submit:t.submit},model:{value:t.language,callback:function(e){t.language=e},expression:"language"}})},jt=[],It={mixins:[m],data(){return{language:{name:"",code:"",direction:"ltr",locale:""}}},computed:{fields(){return{name:{label:this.$t("language.name"),type:"text",required:!0,icon:"title"},code:{label:this.$t("language.code"),type:"text",required:!0,counter:!1,icon:"globe",width:"1/2"},direction:{label:this.$t("language.direction"),type:"select",required:!0,empty:!1,options:[{value:"ltr",text:this.$t("language.direction.ltr")},{value:"rtl",text:this.$t("language.direction.rtl")}],width:"1/2"},locale:{label:this.$t("language.locale"),type:"text",placeholder:"en_US"}}},system(){return this.$store.state.system.info}},watch:{"language.name"(t){this.onNameChanges(t)},"language.code"(t){this.language.code=this.$helper.slug(t,[this.system.ascii])}},methods:{onNameChanges(t){this.language.code=this.$helper.slug(t,[this.language.rules,this.system.ascii]).substr(0,2)},open(){this.language={name:"",code:"",direction:"ltr"},this.$refs.dialog.open()},submit(){this.language.locale&&(this.language.locale=this.language.locale.trim()||null),this.$api.post("languages",{name:this.language.name,code:this.language.code,direction:this.language.direction,locale:this.language.locale}).then(()=>{this.$store.dispatch("languages/load"),this.success({message:":)",event:"language.create"})}).catch(t=>{this.$refs.dialog.error(t.message)})}}},Lt=It,At=Object(u["a"])(Lt,Tt,jt,!1,null,null,null),Bt=At.exports,qt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-remove-dialog",{ref:"dialog",attrs:{text:t.$t("language.delete.confirm",{name:t.language.name})},on:{submit:t.submit}})},Nt=[],Pt={mixins:[m],data(){return{language:{name:null}}},methods:{open(t){this.$api.get("languages/"+t).then(t=>{this.language=t,this.$refs.dialog.open()}).catch(t=>{this.$store.dispatch("notification/error",t)})},submit(){this.$api.delete("languages/"+this.language.code).then(()=>{this.$store.dispatch("languages/load"),this.success({message:this.$t("language.deleted"),event:"language.delete"})}).catch(t=>{this.$refs.dialog.error(t.message)})}}},Dt=Pt,Rt=Object(u["a"])(Dt,qt,Nt,!1,null,null,null),Mt=Rt.exports,Ft=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-form-dialog",{ref:"dialog",attrs:{fields:t.fields,size:"medium"},on:{submit:t.submit},model:{value:t.language,callback:function(e){t.language=e},expression:"language"}})},Ut=[],zt={mixins:[Bt],computed:{fields(){let t=Bt.computed.fields.apply(this);return t.code.disabled=!0,"object"===typeof this.language.locale&&(t.locale={label:t.locale.label,type:"info",text:this.$t("language.locale.warning")}),t}},methods:{onNameChanges(){return!1},open(t){this.$api.get("languages/"+t).then(t=>{this.language=t;const e=Object.keys(this.language.locale);1===e.length&&(this.language.locale=this.language.locale[e[0]]),this.$refs.dialog.open()}).catch(t=>{this.$store.dispatch("notification/error",t)})},submit(){0!==this.language.name.length?("string"===typeof this.language.locale&&(this.language.locale=this.language.locale.trim()||null),this.$api.patch("languages/"+this.language.code,{name:this.language.name,direction:this.language.direction,locale:this.language.locale}).then(()=>{this.$store.dispatch("languages/load"),this.success({message:this.$t("language.updated"),event:"language.update"})}).catch(t=>{this.$refs.dialog.error(t.message)})):this.$refs.dialog.error(this.$t("error.language.name"))}}},Ht=zt,Kt=Object(u["a"])(Ht,Ft,Ut,!1,null,null,null),Vt=Kt.exports,Yt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-form-dialog",{ref:"dialog",attrs:{fields:t.fields,"submit-button":t.$t("page.draft.create")},on:{submit:t.submit,close:t.reset},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})},Wt=[],Jt={mixins:[m],data(){return{parent:null,section:null,templates:[],page:this.emptyForm()}},computed:{fields(){return{title:{label:this.$t("title"),type:"text",required:!0,icon:"title"},slug:{label:this.$t("slug"),type:"text",required:!0,counter:!1,icon:"url"},template:{name:"template",label:this.$t("template"),type:"select",disabled:1===this.templates.length,required:!0,icon:"code",empty:!1,options:this.templates}}},slugs(){return this.$store.state.languages.default?this.$store.state.languages.default.rules:this.system.slugs},system(){return this.$store.state.system.info}},watch:{"page.title"(t){this.page.slug=this.$helper.slug(t,[this.slugs,this.system.ascii])}},methods:{emptyForm(){return{title:"",slug:"",template:null}},open(t,e,s){this.parent=t,this.section=s,this.$api.get(e,{section:s}).then(t=>{this.templates=t.map(t=>{return{value:t.name,text:t.title}}),this.templates[0]&&(this.page.template=this.templates[0].value),this.$refs.dialog.open()}).catch(t=>{this.$store.dispatch("notification/error",t)})},submit(){if(this.page.title=this.page.title.trim(),0===this.page.title.length)return void this.$refs.dialog.error(this.$t("error.page.changeTitle.empty"));const t={template:this.page.template,slug:this.page.slug,content:{title:this.page.title}};this.$api.post(this.parent+"/children",t).then(t=>{this.success({route:this.$api.pages.link(t.id),message:":)",event:"page.create"})}).catch(t=>{this.$refs.dialog.error(t.message)})},reset(){this.page=this.emptyForm()}}},Gt=Jt,Zt=Object(u["a"])(Gt,Yt,Wt,!1,null,null,null),Xt=Zt.exports,Qt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-form-dialog",{ref:"dialog",attrs:{fields:t.fields,"submit-button":t.$t("duplicate")},on:{submit:t.submit},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})},te=[],ee={mixins:[m],data(){return{page:{children:!1,files:!1,hasChildren:!1,hasDrafts:!1,hasFiles:!1,id:null,slug:""}}},computed:{fields(){const t=this.page.hasChildren||this.page.hasDrafts,e=this.page.hasFiles;let s={slug:{label:this.$t("slug"),type:"text",required:!0,counter:!1,spellcheck:!1,icon:"url"}};return e&&(s.files={label:this.$t("page.duplicate.files"),type:"toggle",required:!0,width:t?"1/2":null}),t&&(s.children={label:this.$t("page.duplicate.pages"),type:"toggle",required:!0,width:e?"1/2":null}),s},slugs(){return this.$store.state.languages.default?this.$store.state.languages.default.rules:this.system.slugs},system(){return this.$store.state.system.info}},watch:{"page.slug"(t){this.page.slug=this.$helper.slug(t,[this.slugs,this.system.ascii])}},methods:{open(t){this.$api.pages.get(t,{language:"@default",select:"id,slug,hasChildren,hasDrafts,hasFiles,title"}).then(t=>{this.page.id=t.id,this.page.slug=t.slug+"-"+this.$helper.slug(this.$t("page.duplicate.appendix")),this.page.hasChildren=t.hasChildren,this.page.hasDrafts=t.hasDrafts,this.page.hasFiles=t.hasFiles,this.$refs.dialog.open()}).catch(t=>{this.$store.dispatch("notification/error",t)})},submit(){this.$api.pages.duplicate(this.page.id,this.page.slug,{children:this.page.children,files:this.page.files}).then(t=>{this.success({route:this.$api.pages.link(t.id),message:":)",event:"page.duplicate"})}).catch(t=>{this.$refs.dialog.error(t.message)})}}},se=ee,ie=Object(u["a"])(se,Qt,te,!1,null,null,null),ne=ie.exports,ae=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-remove-dialog",{ref:"dialog",attrs:{size:t.hasSubpages?"medium":"small"},on:{submit:t.submit,close:t.reset}},[t.page.hasChildren||t.page.hasDrafts?[s("k-text",{domProps:{innerHTML:t._s(t.$t("page.delete.confirm",{title:t.page.title}))}}),s("div",{staticClass:"k-page-remove-warning"},[s("k-box",{attrs:{theme:"negative"},domProps:{innerHTML:t._s(t.$t("page.delete.confirm.subpages"))}})],1),t.hasSubpages?s("k-form",{attrs:{fields:t.fields},on:{submit:t.submit},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}}):t._e()]:[s("k-text",{domProps:{innerHTML:t._s(t.$t("page.delete.confirm",{title:t.page.title}))},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}}})]],2)},re=[],oe=(s("5319"),{mixins:[m],data(){return{page:{title:null,hasChildren:!1,hasDrafts:!1},model:this.emptyForm()}},computed:{hasSubpages(){return this.page.hasChildren||this.page.hasDrafts},fields(){return{check:{label:this.$t("page.delete.confirm.title"),type:"text",counter:!1}}}},methods:{emptyForm(){return{check:null}},open(t){this.$api.pages.get(t,{select:"id, title, hasChildren, hasDrafts, parent"}).then(t=>{this.page=t,this.$refs.dialog.open()}).catch(t=>{this.$store.dispatch("notification/error",t)})},submit(){this.hasSubpages&&this.model.check!==this.page.title?this.$refs.dialog.error(this.$t("error.page.delete.confirm")):this.$api.pages.delete(this.page.id,{force:!0}).then(()=>{this.$store.dispatch("content/remove","pages/"+this.page.id);const t={message:":)",event:"page.delete"};this.$route.params.path&&this.page.id===this.$route.params.path.replace(/\+/g,"/")&&(this.page.parent?t.route=this.$api.pages.link(this.page.parent.id):t.route="/pages"),this.success(t)}).catch(t=>{this.$refs.dialog.error(t.message)})},reset(){this.model=this.emptyForm()}}}),le=oe,ue=(s("12fb"),Object(u["a"])(le,ae,re,!1,null,null,null)),ce=ue.exports,de=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-form-dialog",{ref:"dialog",attrs:{fields:t.fields,"submit-button":t.$t("rename")},on:{submit:t.submit},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})},he=[],pe={mixins:[m],data(){return{page:{id:null,title:null}}},computed:{fields(){return{title:{label:this.$t("title"),type:"text",required:!0,icon:"title",preselect:!0}}}},methods:{open(t){this.$api.pages.get(t,{select:["id","title"]}).then(t=>{this.page=t,this.$refs.dialog.open()}).catch(t=>{this.$store.dispatch("notification/error",t)})},submit(){this.page.title=this.page.title.trim(),0!==this.page.title.length?this.$api.pages.title(this.page.id,this.page.title).then(()=>{this.success({message:":)",event:"page.changeTitle"})}).catch(t=>{this.$refs.dialog.error(t.message)}):this.$refs.dialog.error(this.$t("error.page.changeTitle.empty"))}}},me=pe,fe=Object(u["a"])(me,de,he,!1,null,null,null),ge=fe.exports,be=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-form-dialog",{ref:"dialog",attrs:{fields:t.fields,"submit-button":t.$t("change")},on:{submit:t.submit},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}})},ke=[],ve={mixins:[m],data(){return{page:{id:null},isBlocked:!1,isIncomplete:!1,form:{status:null,position:null},states:{}}},computed:{fields(){let t={status:{name:"status",label:this.$t("page.changeStatus.select"),type:"radio",required:!0,options:Object.keys(this.states).map(t=>{return{value:t,text:this.states[t].label,info:this.states[t].text}})}};return"listed"===this.form.status&&"default"===this.page.blueprint.num&&(t.position={name:"position",label:this.$t("page.changeStatus.position"),type:"select",empty:!1,options:this.sortingOptions()}),t}},methods:{sortingOptions(){let t=[],e=0;return this.page.siblings.forEach(s=>{if(s.id===this.page.id||s.num<1)return!1;e++,t.push({value:e,text:e}),t.push({value:s.id,text:s.title,disabled:!0})}),t.push({value:e+1,text:e+1}),t},open(t){this.$api.pages.get(t,{select:["id","status","num","errors","blueprint"]}).then(e=>{return!1===e.blueprint.options.changeStatus?this.$store.dispatch("notification/error",{message:this.$t("error.page.changeStatus.permission")}):"draft"===e.status&&Object.keys(e.errors).length>0?this.$store.dispatch("notification/error",{message:this.$t("error.page.changeStatus.incomplete"),details:e.errors}):void("default"===e.blueprint.num?this.$api.pages.get(t,{select:["siblings"]}).then(t=>{this.setup({...e,siblings:t.siblings})}).catch(t=>{this.$store.dispatch("notification/error",t)}):this.setup({...e,siblings:[]}))}).catch(t=>{this.$store.dispatch("notification/error",t)})},setup(t){this.page=t,this.form.position=t.num||t.siblings.length+1,this.form.status=t.status,this.states=t.blueprint.status,this.$refs.dialog.open()},submit(){this.$api.pages.status(this.page.id,this.form.status,this.form.position||1).then(()=>{this.success({message:":)",event:"page.changeStatus"})}).catch(t=>{this.$refs.dialog.error(t.message)})}}},$e=ve,_e=Object(u["a"])($e,be,ke,!1,null,null,null),ye=_e.exports,xe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-form-dialog",{ref:"dialog",attrs:{fields:t.fields,"submit-button":t.$t("change")},on:{submit:t.submit},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})},we=[],Se={mixins:[m],data(){return{blueprints:[],page:{id:null,template:null}}},computed:{fields(){return{template:{label:this.$t("template"),type:"select",required:!0,empty:!1,options:this.page.blueprints,icon:"template"}}}},methods:{open(t){this.$api.pages.get(t,{select:["id","template","blueprints"]}).then(t=>{if(t.blueprints.length<=1)return this.$store.dispatch("notification/error",{message:this.$t("error.page.changeTemplate.invalid",{slug:t.id})});this.page=t,this.page.blueprints=this.page.blueprints.map(t=>({text:t.title,value:t.name})),this.$refs.dialog.open()}).catch(t=>{this.$store.dispatch("notification/error",t)})},submit(){this.$events.$emit("keydown.cmd.s"),this.$api.pages.template(this.page.id,this.page.template).then(()=>{this.success({message:":)",event:"page.changeTemplate"})}).catch(t=>{this.$refs.dialog.error(t.message)})}}},Ce=Se,Oe=Object(u["a"])(Ce,xe,we,!1,null,null,null),Ee=Oe.exports,Te=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-dialog",{ref:"dialog",attrs:{"submit-button":t.$t("change"),size:"medium",theme:"positive"},on:{submit:function(e){return t.$refs.form.submit()}}},[s("k-form",{ref:"form",on:{submit:t.submit}},[s("k-text-field",t._b({attrs:{value:t.slug},on:{input:function(e){return t.sluggify(e)}}},"k-text-field",t.field,!1),[s("k-button",{attrs:{slot:"options",icon:"wand","data-options":""},on:{click:function(e){return t.sluggify(t.page.title)}},slot:"options"},[t._v(" "+t._s(t.$t("page.changeSlug.fromTitle"))+" ")])],1)],1)],1)},je=[],Ie={mixins:[m],data(){return{slug:null,url:null,page:{id:null,parent:null,title:null}}},computed:{field(){return{name:"slug",label:this.$t("slug"),type:"text",required:!0,icon:"url",help:"/"+this.url,counter:!1,preselect:!0}},slugs(){return this.$store.state.languages.current?this.$store.state.languages.current.rules:this.system.slugs},system(){return this.$store.state.system.info}},methods:{sluggify(t){this.slug=this.$helper.slug(t,[this.slugs,this.system.ascii]),this.page.parents?this.url=this.page.parents.map(t=>t.slug).concat([this.slug]).join("/"):this.url=this.slug},open(t){this.$api.pages.get(t,{view:"panel"}).then(t=>{this.page=t,this.sluggify(this.page.slug),this.$refs.dialog.open()}).catch(t=>{this.$store.dispatch("notification/error",t)})},submit(){if(this.slug===this.page.slug)return this.$refs.dialog.close(),void this.$store.dispatch("notification/success",":)");0!==this.slug.length?this.$api.pages.slug(this.page.id,this.slug).then(t=>{this.$store.dispatch("content/move",["pages/"+this.page.id,"pages/"+t.id]);const e={message:":)",event:"page.changeSlug"};!this.$route.params.path||this.page.id!==this.$route.params.path.replace(/\+/g,"/")||this.$store.state.languages.current&&!0!==this.$store.state.languages.current.default||(e.route=this.$api.pages.link(t.id),delete e.event),this.success(e)}).catch(t=>{this.$refs.dialog.error(t.message)}):this.$refs.dialog.error(this.$t("error.page.slug.invalid"))}}},Le=Ie,Ae=Object(u["a"])(Le,Te,je,!1,null,null,null),Be=Ae.exports,qe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-dialog",{ref:"dialog",staticClass:"k-pages-dialog",attrs:{size:"medium"},on:{cancel:function(e){return t.$emit("cancel")},submit:t.submit}},[t.issue?[s("k-box",{attrs:{text:t.issue,theme:"negative"}})]:[t.model?s("header",{staticClass:"k-pages-dialog-navbar"},[s("k-button",{attrs:{disabled:!t.model.id,tooltip:t.$t("back"),icon:"angle-left"},on:{click:t.back}}),s("k-headline",[t._v(t._s(t.model.title))])],1):t._e(),t.options.search?s("k-input",{staticClass:"k-dialog-search",attrs:{autofocus:!0,placeholder:t.$t("search")+" …",type:"text",icon:"search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}):t._e(),t.models.length?[s("k-list",t._l(t.models,(function(e){return s("k-list-item",{key:e.id,attrs:{text:e.text,info:e.info,image:e.image,icon:e.icon},on:{click:function(s){return t.toggle(e)}}},[s("template",{slot:"options"},[t.isSelected(e)?s("k-button",{attrs:{slot:"options",autofocus:!0,icon:t.checkedIcon,tooltip:t.$t("remove"),theme:"positive"},slot:"options"}):s("k-button",{attrs:{slot:"options",autofocus:!0,tooltip:t.$t("select"),icon:"circle-outline"},slot:"options"}),t.model?s("k-button",{attrs:{disabled:!e.hasChildren,tooltip:t.$t("open"),icon:"angle-right"},on:{click:function(s){return s.stopPropagation(),t.go(e)}}}):t._e()],1)],2)})),1),s("k-pagination",t._b({staticClass:"k-dialog-pagination",attrs:{details:!0,dropdown:!1,align:"center"},on:{paginate:t.paginate}},"k-pagination",t.pagination,!1))]:s("k-empty",{attrs:{icon:"page"}},[t._v(" "+t._s(t.$t("dialog.pages.empty"))+" ")])]],2)},Ne=[],Pe={mixins:[kt],data(){const t=kt.data();return{...t,model:{title:null,parent:null},options:{...t.options,parent:null}}},computed:{fetchData(){return{parent:this.options.parent}}},methods:{back(){this.options.parent=this.model.parent,this.pagination.page=1,this.fetch()},go(t){this.options.parent=t.id,this.pagination.page=1,this.fetch()},onFetched(t){this.model=t.model}}},De=Pe,Re=(s("ac27"),Object(u["a"])(De,qe,Ne,!1,null,null,null)),Me=Re.exports,Fe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-text-dialog",t._g(t._b({ref:"dialog"},"k-text-dialog",t.$props,!1),t.$listeners),[t._t("default")],2)},Ue=[],ze={mixins:[m],props:{icon:{type:String,default:"trash"},submitButton:{type:[String,Boolean],default(){return this.$t("delete")}},text:String,theme:{type:String,default:"negative"}}},He=ze,Ke=Object(u["a"])(He,Fe,Ue,!1,null,null,null),Ve=Ke.exports,Ye={extends:ge,methods:{open(){this.$api.site.get({select:["title"]}).then(t=>{this.page=t,this.$refs.dialog.open()}).catch(t=>{this.$store.dispatch("notification/error",t)})},submit(){this.page.title=this.page.title.trim(),0!==this.page.title.length?this.$api.site.title(this.page.title).then(()=>{this.$store.dispatch("system/title",this.page.title),this.success({message:":)",event:"site.changeTitle"})}).catch(t=>{this.$refs.dialog.error(t.message)}):this.$refs.dialog.error(this.$t("error.site.changeTitle.empty"))}}},We=Ye,Je=Object(u["a"])(We,x,w,!1,null,null,null),Ge=Je.exports,Ze=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-dialog",t._g(t._b({ref:"dialog"},"k-dialog",t.$props,!1),t.$listeners),[t._t("default",[s("k-text",{domProps:{innerHTML:t._s(t.text)}})])],2)},Xe=[],Qe={mixins:[m],props:{text:String}},ts=Qe,es=Object(u["a"])(ts,Ze,Xe,!1,null,null,null),ss=es.exports,is=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-form-dialog",{ref:"dialog",attrs:{fields:t.fields,"submit-button":t.$t("create")},on:{submit:t.create,close:t.reset},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}})},ns=[],as=(s("ddb0"),{mixins:[m],data(){return{user:this.emptyForm(),languages:[],roles:[]}},computed:{fields(){return{name:{label:this.$t("name"),type:"text",icon:"user"},email:{label:this.$t("email"),type:"email",icon:"email",link:!1,required:!0},password:{label:this.$t("password"),type:"password",icon:"key"},language:{label:this.$t("language"),type:"select",icon:"globe",options:this.languages,required:!0,empty:!1},role:{label:this.$t("role"),type:1===this.roles.length?"hidden":"radio",required:!0,options:this.roles}}}},methods:{create(){this.$api.users.create(this.user).then(()=>{this.success({message:":)",event:"user.create"})}).catch(t=>{this.$refs.dialog.error(t.message)})},emptyForm(){return{name:"",email:"",password:"",language:this.$store.state.system.info.defaultLanguage||"en",role:this.$user.role.name}},open(){const t=this.$api.roles.options({canBe:"created"}).then(t=>{this.roles=t,"admin"!==this.$user.role.name&&(this.roles=this.roles.filter(t=>{return"admin"!==t.value}))}).catch(t=>{this.$store.dispatch("notification/error",t)}),e=this.$api.translations.options().then(t=>{this.languages=t}).catch(t=>{this.$store.dispatch("notification/error",t)});Promise.all([t,e]).then(()=>{this.$refs.dialog.open()})},reset(){this.user=this.emptyForm()}}}),rs=as,os=Object(u["a"])(rs,is,ns,!1,null,null,null),ls=os.exports,us=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-form-dialog",{ref:"dialog",attrs:{fields:t.fields,"submit-button":t.$t("change")},on:{submit:t.submit},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}})},cs=[],ds={mixins:[m],data(){return{user:{id:null,email:null}}},computed:{fields(){return{email:{label:this.$t("email"),preselect:!0,required:!0,type:"email"}}}},methods:{open(t){this.$api.users.get(t,{select:["id","email"]}).then(t=>{this.user=t,this.$refs.dialog.open()}).catch(t=>{this.$store.dispatch("notification/error",t)})},submit(){this.$api.users.changeEmail(this.user.id,this.user.email).then(t=>{this.$store.dispatch("content/revert","users/"+this.user.id),this.$user.id===this.user.id&&this.$store.dispatch("user/email",this.user.email);let e={message:":)",event:"user.changeEmail"};"User"===this.$route.name&&(e.route=this.$api.users.link(t.id)),this.success(e)}).catch(t=>{this.$refs.dialog.error(t.message)})}}},hs=ds,ps=Object(u["a"])(hs,us,cs,!1,null,null,null),ms=ps.exports,fs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-form-dialog",{ref:"dialog",attrs:{fields:t.fields,"submit-button":t.$t("change")},on:{submit:t.submit},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}})},gs=[],bs={mixins:[m],data(){return{user:{language:"en"},languages:[]}},computed:{fields(){return{language:{label:this.$t("language"),type:"select",icon:"globe",options:this.languages,required:!0,empty:!1}}}},created(){this.$api.translations.options().then(t=>{this.languages=t})},methods:{open(t){this.$api.users.get(t,{view:"compact"}).then(t=>{this.user=t,this.$refs.dialog.open()}).catch(t=>{this.$store.dispatch("notification/error",t)})},submit(){this.$api.users.changeLanguage(this.user.id,this.user.language).then(t=>{this.user=t,this.$user.id===this.user.id&&this.$store.dispatch("user/language",this.user.language),this.success({message:":)",event:"user.changeLanguage"})}).catch(t=>{this.$refs.dialog.error(t.message)})}}},ks=bs,vs=Object(u["a"])(ks,fs,gs,!1,null,null,null),$s=vs.exports,_s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-form-dialog",{ref:"dialog",attrs:{fields:t.fields,"submit-button":t.$t("change")},on:{submit:t.submit},model:{value:t.values,callback:function(e){t.values=e},expression:"values"}})},ys=[],xs={mixins:[m],data(){return{user:null,values:{password:null,passwordConfirmation:null}}},computed:{fields(){return{password:{label:this.$t("user.changePassword.new"),type:"password",icon:"key"},passwordConfirmation:{label:this.$t("user.changePassword.new.confirm"),icon:"key",type:"password"}}}},methods:{open(t){this.$api.users.get(t).then(t=>{this.user=t,this.$refs.dialog.open()}).catch(t=>{this.$store.dispatch("notification/error",t)})},submit(){return!this.values.password||this.values.password.length<8?(this.$refs.dialog.error(this.$t("error.user.password.invalid")),!1):this.values.password!==this.values.passwordConfirmation?(this.$refs.dialog.error(this.$t("error.user.password.notSame")),!1):void this.$api.users.changePassword(this.user.id,this.values.password).then(()=>{this.success({message:":)",event:"user.changePassword"})}).catch(t=>{this.$refs.dialog.error(t.message)})}}},ws=xs,Ss=Object(u["a"])(ws,_s,ys,!1,null,null,null),Cs=Ss.exports,Os=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-remove-dialog",{ref:"dialog",attrs:{text:t.$t("user.delete.confirm",{email:t.user.email})},on:{submit:t.submit}})},Es=[],Ts={mixins:[m],data(){return{user:{email:null}}},methods:{open(t){this.$api.users.get(t).then(t=>{this.user=t,this.$refs.dialog.open()}).catch(t=>{this.$store.dispatch("notification/error",t)})},submit(){this.$api.users.delete(this.user.id).then(()=>{this.$store.dispatch("content/remove","users/"+this.user.id),this.success({message:":)",event:"user.delete"}),"User"===this.$route.name&&this.$router.push("/users")}).catch(t=>{this.$refs.dialog.error(t.message)})}}},js=Ts,Is=Object(u["a"])(js,Os,Es,!1,null,null,null),Ls=Is.exports,As=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-form-dialog",{ref:"dialog",attrs:{fields:t.fields,"submit-button":t.$t("rename")},on:{submit:t.submit},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}})},Bs=[],qs={mixins:[m],data(){return{user:{id:null,name:null}}},computed:{fields(){return{name:{label:this.$t("name"),type:"text",icon:"user",preselect:!0}}}},methods:{open(t){this.$api.users.get(t,{select:["id","name"]}).then(t=>{this.user=t,this.$refs.dialog.open()}).catch(t=>{this.$store.dispatch("notification/error",t)})},submit(){this.user.name=this.user.name.trim(),this.$api.users.changeName(this.user.id,this.user.name).then(()=>{this.$user.id===this.user.id&&this.$store.dispatch("user/name",this.user.name),this.success({message:":)",event:"user.changeName"})}).catch(t=>{this.$refs.dialog.error(t.message)})}}},Ns=qs,Ps=Object(u["a"])(Ns,As,Bs,!1,null,null,null),Ds=Ps.exports,Rs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-form-dialog",{ref:"dialog",attrs:{fields:t.fields,"submit-button":t.$t("user.changeRole")},on:{submit:t.submit},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}})},Ms=[],Fs={mixins:[m],data(){return{roles:[],user:{id:null,role:"visitor"}}},computed:{fields(){return{role:{label:this.$t("user.changeRole.select"),type:"radio",required:!0,options:this.roles}}}},methods:{open(t){this.id=t,this.$api.users.get(t).then(t=>{this.$api.roles.options({canBe:"changed"}).then(e=>{this.roles=e,"admin"!==this.$user.role.name&&(this.roles=this.roles.filter(t=>{return"admin"!==t.value})),this.user=t,this.user.role=this.user.role.name,this.$refs.dialog.open()})}).catch(t=>{this.$store.dispatch("notification/error",t)})},submit(){this.$api.users.changeRole(this.user.id,this.user.role).then(()=>{this.$user.id===this.user.id&&this.$store.dispatch("user/load"),this.success({message:":)",event:"user.changeRole"})}).catch(t=>{this.$refs.dialog.error(t.message)})}}},Us=Fs,zs=Object(u["a"])(Us,Rs,Ms,!1,null,null,null),Hs=zs.exports,Ks=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-dialog",{ref:"dialog",staticClass:"k-users-dialog",attrs:{size:"medium"},on:{cancel:function(e){return t.$emit("cancel")},submit:t.submit}},[t.issue?[s("k-box",{attrs:{text:t.issue,theme:"negative"}})]:[t.options.search?s("k-input",{staticClass:"k-dialog-search",attrs:{autofocus:!0,placeholder:t.$t("search")+" …",type:"text",icon:"search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}):t._e(),t.models.length?[s("k-list",t._l(t.models,(function(e){return s("k-list-item",{key:e.email,attrs:{text:e.username,image:e.image,icon:e.icon},on:{click:function(s){return t.toggle(e)}}},[t.isSelected(e)?s("k-button",{attrs:{slot:"options",autofocus:!0,icon:t.checkedIcon,tooltip:t.$t("remove"),theme:"positive"},slot:"options"}):s("k-button",{attrs:{slot:"options",autofocus:!0,tooltip:t.$t("select"),icon:"circle-outline"},slot:"options"})],1)})),1),s("k-pagination",t._b({staticClass:"k-dialog-pagination",attrs:{details:!0,dropdown:!1,align:"center"},on:{paginate:t.paginate}},"k-pagination",t.pagination,!1))]:s("k-empty",{attrs:{icon:"users"}},[t._v(" "+t._s(t.$t("dialog.users.empty"))+" ")])]],2)},Vs=[],Ys={mixins:[kt]},Ws=Ys,Js=(s("7568"),Object(u["a"])(Ws,Ks,Vs,!1,null,null,null)),Gs=Js.exports,Zs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-dropdown",{staticClass:"k-autocomplete"},[t._t("default"),s("k-dropdown-content",t._g({ref:"dropdown",attrs:{autofocus:!0}},t.$listeners),t._l(t.matches,(function(e,i){return s("k-dropdown-item",t._b({key:i,on:{mousedown:function(s){return t.onSelect(e)},keydown:[function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"tab",9,s.key,"Tab")?null:(s.preventDefault(),t.onSelect(e))},function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:(s.preventDefault(),t.onSelect(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:"button"in e&&0!==e.button?null:(e.preventDefault(),t.close(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"backspace",void 0,e.key,void 0)?null:(e.preventDefault(),t.close(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:(e.preventDefault(),t.close(e))}]}},"k-dropdown-item",e,!1),[t._v(" "+t._s(e.text)+" ")])})),1),t._v(" "+t._s(t.query)+" ")],2)},Xs=[],Qs={props:{limit:10,skip:{type:Array,default(){return[]}},options:Array,query:String},data(){return{matches:[],selected:{text:null}}},methods:{close(){this.$refs.dropdown.close()},onSelect(t){this.$refs.dropdown.close(),this.$emit("select",t)},search(t){if(t.length<1)return;const e=new RegExp(RegExp.escape(t),"ig");this.matches=this.options.filter(t=>{return!!t.text&&(-1===this.skip.indexOf(t.value)&&null!==t.text.match(e))}).slice(0,this.limit),this.$emit("search",t,this.matches),this.$refs.dropdown.open()}}},ti=Qs,ei=Object(u["a"])(ti,Zs,Xs,!1,null,null,null),si=ei.exports,ii=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-calendar-input"},[s("nav",[s("k-button",{attrs:{icon:"angle-left"},on:{click:t.prev}}),s("span",{staticClass:"k-calendar-selects"},[s("k-select-input",{attrs:{options:t.months,disabled:t.disabled,required:!0},model:{value:t.month,callback:function(e){t.month=t._n(e)},expression:"month"}}),s("k-select-input",{attrs:{options:t.years,disabled:t.disabled,required:!0},model:{value:t.year,callback:function(e){t.year=t._n(e)},expression:"year"}})],1),s("k-button",{attrs:{icon:"angle-right"},on:{click:t.next}})],1),s("table",{staticClass:"k-calendar-table"},[s("thead",[s("tr",t._l(t.weekdays,(function(e){return s("th",{key:"weekday_"+e},[t._v(" "+t._s(e)+" ")])})),0)]),s("tbody",t._l(t.numberOfWeeks,(function(e){return s("tr",{key:"week_"+e},t._l(t.days(e),(function(e,i){return s("td",{key:"day_"+i,staticClass:"k-calendar-day",attrs:{"aria-current":!!t.isToday(e)&&"date","aria-selected":!!t.isCurrent(e)&&"date"}},[e?s("k-button",{on:{click:function(s){return t.select(e)}}},[t._v(" "+t._s(e)+" ")]):t._e()],1)})),0)})),0),s("tfoot",[s("tr",[s("td",{staticClass:"k-calendar-today",attrs:{colspan:"7"}},[s("k-button",{on:{click:t.selectToday}},[t._v(" "+t._s(t.$t("today"))+" ")])],1)])])])])},ni=[],ai={props:{value:String,disabled:Boolean},data(){const t=this.value?this.$library.dayjs(this.value):this.$library.dayjs();return{day:t.date(),month:t.month(),year:t.year(),today:this.$library.dayjs(),current:t}},computed:{date(){return this.$library.dayjs("".concat(this.year,"-").concat(this.month+1,"-").concat(this.day))},numberOfDays(){return this.date.daysInMonth()},numberOfWeeks(){return Math.ceil((this.numberOfDays+this.firstWeekday-1)/7)},firstWeekday(){const t=this.date.clone().startOf("month").day();return t>0?t:7},weekdays(){return[this.$t("days.mon"),this.$t("days.tue"),this.$t("days.wed"),this.$t("days.thu"),this.$t("days.fri"),this.$t("days.sat"),this.$t("days.sun")]},monthnames(){return[this.$t("months.january"),this.$t("months.february"),this.$t("months.march"),this.$t("months.april"),this.$t("months.may"),this.$t("months.june"),this.$t("months.july"),this.$t("months.august"),this.$t("months.september"),this.$t("months.october"),this.$t("months.november"),this.$t("months.december")]},months(){var t=[];return this.monthnames.forEach((e,s)=>{t.push({value:s,text:e})}),t},years(){for(var t=[],e=this.year-10;e<=this.year+10;e++)t.push({value:e,text:this.$helper.pad(e)});return t}},watch:{value(t){const e=this.$library.dayjs(t);this.day=e.date(),this.month=e.month(),this.year=e.year(),this.current=e}},methods:{days(t){let e=[],s=7*(t-1)+1;for(var i=s;i<s+7;i++){var n=i-(this.firstWeekday-1);n<=0||n>this.numberOfDays?e.push(""):e.push(n)}return e},next(){let t=this.date.clone().add(1,"month");this.set(t)},isToday(t){return this.month===this.today.month()&&this.year===this.today.year()&&t===this.today.date()},isCurrent(t){return this.month===this.current.month()&&this.year===this.current.year()&&t===this.current.date()},prev(){let t=this.date.clone().subtract(1,"month");this.set(t)},go(t,e){"today"===t&&(t=this.today.year(),e=this.today.month()),this.year=t,this.month=e},set(t){this.day=t.date(),this.month=t.month(),this.year=t.year()},selectToday(){this.set(this.$library.dayjs()),this.select(this.day)},select(t){t&&(this.day=t);const e=this.$library.dayjs(new Date(this.year,this.month,this.day,this.current.hour(),this.current.minute()));this.$emit("input",e.toISOString())}}},ri=ai,oi=(s("ee15"),Object(u["a"])(ri,ii,ni,!1,null,null,null)),li=oi.exports,ui=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"k-counter",attrs:{"data-invalid":!t.valid}},[s("span",[t._v(t._s(t.count))]),t.min&&t.max?s("span",{staticClass:"k-counter-rules"},[t._v("("+t._s(t.min)+"–"+t._s(t.max)+")")]):t.min?s("span",{staticClass:"k-counter-rules"},[t._v("≥ "+t._s(t.min))]):t.max?s("span",{staticClass:"k-counter-rules"},[t._v("≤ "+t._s(t.max))]):t._e()])},ci=[],di={props:{count:Number,min:Number,max:Number,required:{type:Boolean,default:!1}},computed:{valid(){return!1===this.required&&0===this.count||(!0!==this.required||0!==this.count)&&(!(this.min&&this.count<this.min)&&!(this.max&&this.count>this.max))}}},hi=di,pi=(s("fc0f"),Object(u["a"])(hi,ui,ci,!1,null,null,null)),mi=pi.exports,fi=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{ref:"form",staticClass:"k-form",attrs:{method:"POST",autocomplete:"off",novalidate:""},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[t._t("header"),t._t("default",[s("k-fieldset",t._g({ref:"fields",attrs:{disabled:t.disabled,fields:t.fields,novalidate:t.novalidate},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t.listeners))]),t._t("footer"),s("input",{ref:"submitter",staticClass:"k-form-submitter",attrs:{type:"submit"}})],2)},gi=[],bi={props:{disabled:Boolean,config:Object,fields:{type:[Array,Object],default(){return{}}},novalidate:{type:Boolean,default:!1},value:{type:Object,default(){return{}}}},data(){return{errors:{},listeners:{...this.$listeners,submit:this.onSubmit}}},methods:{focus(t){this.$refs.fields&&this.$refs.fields.focus&&this.$refs.fields.focus(t)},onSubmit(){this.$emit("submit",this.value)},submit(){this.$refs.submitter.click()}}},ki=bi,vi=(s("5d33"),Object(u["a"])(ki,fi,gi,!1,null,null,null)),$i=vi.exports,_i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"k-form-buttons",attrs:{"data-theme":t.mode}},["unlock"===t.mode?s("k-view",[s("p",{staticClass:"k-form-lock-info"},[t._v(" "+t._s(t.$t("lock.isUnlocked"))+" ")]),s("span",{staticClass:"k-form-lock-buttons"},[s("k-button",{staticClass:"k-form-button",attrs:{icon:"download"},on:{click:t.onDownload}},[t._v(" "+t._s(t.$t("download"))+" ")]),s("k-button",{staticClass:"k-form-button",attrs:{icon:"check"},on:{click:t.onResolve}},[t._v(" "+t._s(t.$t("confirm"))+" ")])],1)]):"lock"===t.mode?s("k-view",[s("p",{staticClass:"k-form-lock-info"},[s("k-icon",{attrs:{type:"lock"}}),s("span",{domProps:{innerHTML:t._s(t.$t("lock.isLocked",{email:t.form.lock.email}))}})],1),t.form.lock.unlockable?s("k-button",{staticClass:"k-form-button",attrs:{icon:"unlock"},on:{click:t.setUnlock}},[t._v(" "+t._s(t.$t("lock.unlock"))+" ")]):s("k-icon",{staticClass:"k-form-lock-loader",attrs:{type:"loader"}})],1):"changes"===t.mode?s("k-view",[s("k-button",{staticClass:"k-form-button",attrs:{disabled:t.isDisabled,icon:"undo"},on:{click:function(e){return t.$refs.revert.open()}}},[t._v(" "+t._s(t.$t("revert"))+" ")]),s("k-button",{staticClass:"k-form-button",attrs:{disabled:t.isDisabled,icon:"check"},on:{click:t.onSave}},[t._v(" "+t._s(t.$t("save"))+" ")])],1):t._e(),s("k-dialog",{ref:"revert",attrs:{"submit-button":t.$t("revert"),icon:"undo",theme:"negative"},on:{submit:t.onRevert}},[s("k-text",{domProps:{innerHTML:t._s(t.$t("revert.confirm"))}})],1)],1)},yi=[],xi={data(){return{supportsLocking:!0}},computed:{api(){return{lock:[this.$route.path+"/lock",null,null,!0],unlock:[this.$route.path+"/unlock",null,null,!0]}},hasChanges(){return this.$store.getters["content/hasChanges"]()},form(){return{lock:this.$store.state.content.status.lock,unlock:this.$store.state.content.status.unlock}},id(){return this.$store.state.content.current},isDisabled(){return!1===this.$store.state.content.status.enabled},isLocked(){return null!==this.form.lock},isUnlocked(){return null!==this.form.unlock},mode(){return!0===this.isUnlocked?"unlock":!0===this.isLocked?"lock":!0===this.hasChanges?"changes":void 0}},watch:{hasChanges(t,e){if(!1===e&&!0===t)return this.$store.dispatch("heartbeat/remove",this.getLock),void this.$store.dispatch("heartbeat/add",[this.setLock,30]);this.id&&!0===e&&!1===t&&this.removeLock()},id(){this.id&&!1===this.hasChanges&&this.$store.dispatch("heartbeat/add",[this.getLock,10])}},created(){this.$events.$on("keydown.cmd.s",this.onSave)},destroyed(){this.$events.$off("keydown.cmd.s",this.onSave)},methods:{getLock(){return this.$api.get(...this.api.lock).then(t=>{if(!1===t.supported)return this.supportsLocking=!1,void this.$store.dispatch("heartbeat/remove",this.getLock);!1===t.locked?(this.isLocked&&this.form.lock.user!==this.$store.state.user.current.id&&this.$events.$emit("model.reload"),this.$store.dispatch("content/lock",null)):this.$store.dispatch("content/lock",t.locked)}).catch(()=>{})},setLock(){!0===this.supportsLocking&&this.$api.patch(...this.api.lock).catch(t=>{if("error.lock.notImplemented"===t.key)return this.supportsLocking=!1,this.$store.dispatch("heartbeat/remove",this.setLock),!1;this.$store.dispatch("content/revert",this.id),this.$store.dispatch("heartbeat/remove",this.setLock),this.$store.dispatch("heartbeat/add",[this.getLock,10])})},removeLock(){!0===this.supportsLocking&&(this.$store.dispatch("heartbeat/remove",this.setLock),this.$api.delete(...this.api.lock).then(()=>{this.$store.dispatch("content/lock",null),this.$store.dispatch("heartbeat/add",[this.getLock,10])}).catch(()=>{}))},setUnlock(){!0===this.supportsLocking&&(this.$store.dispatch("heartbeat/remove",this.setLock),this.$api.patch(...this.api.unlock).then(()=>{this.$store.dispatch("content/lock",null),this.$store.dispatch("heartbeat/add",[this.getLock,10])}).catch(()=>{}))},removeUnlock(){!0===this.supportsLocking&&(this.$store.dispatch("heartbeat/remove",this.setLock),this.$api.delete(...this.api.unlock).then(()=>{this.$store.dispatch("content/unlock",null),this.$store.dispatch("heartbeat/add",[this.getLock,10])}).catch(()=>{}))},onDownload(){let t="";Object.keys(this.form.unlock).forEach(e=>{t+=e+": \n\n"+this.form.unlock[e],t+="\n\n----\n\n"});let e=document.createElement("a");e.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),e.setAttribute("download",this.id+".txt"),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)},onResolve(){this.$store.dispatch("content/revert"),this.removeUnlock()},onRevert(){this.$store.dispatch("content/revert"),this.$refs.revert.close()},onSave(t){return!!t&&(t.preventDefault&&t.preventDefault(),!1===this.hasChanges||void this.$store.dispatch("content/save").then(()=>{this.$events.$emit("model.update"),this.$store.dispatch("notification/success",":)")}).catch(t=>{403!==t.code&&(t.details&&Object.keys(t.details).length>0?this.$store.dispatch("notification/error",{message:this.$t("error.form.incomplete"),details:t.details}):this.$store.dispatch("notification/error",{message:this.$t("error.form.notSaved"),details:[{label:"Exception: "+t.exception,message:t.message}]}))}))}}},wi=xi,Si=(s("18dd"),Object(u["a"])(wi,_i,yi,!1,null,null,null)),Ci=Si.exports,Oi=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.hasChanges?s("k-dropdown",{staticClass:"k-form-indicator"},[s("k-button",{staticClass:"k-topbar-button",on:{click:t.toggle}},[s("k-icon",{staticClass:"k-form-indicator-icon",attrs:{type:"edit"}})],1),s("k-dropdown-content",{ref:"list",attrs:{align:"right"}},[s("p",{staticClass:"k-form-indicator-info"},[t._v(" "+t._s(t.$t("lock.unsaved"))+": ")]),s("hr"),t._l(t.entries,(function(e){return s("k-dropdown-item",{key:e.id,attrs:{icon:e.icon},nativeOn:{click:function(s){return s.stopPropagation(),t.go(e.target)}}},[t._v(" "+t._s(e.label)+" ")])}))],2)],1):t._e()},Ei=[],Ti={data(){return{isOpen:!1,entries:[]}},computed:{store(){return this.$store.state.content.models},models(){const t=Object.keys(this.store).filter(t=>{return!!this.store[t]});let e=t.map(t=>{return{id:t,...this.store[t]}});return e.filter(t=>Object.keys(t.changes).length>0)},hasChanges(){return this.models.length>0}},methods:{go(t){if(t.language&&this.$store.state.languages.current.code!==t.language){const e=this.$store.state.languages.all.filter(e=>e.code===t.language)[0];this.$store.dispatch("languages/current",e)}this.$router.push(t.link)},load(){const t=this.models.map(t=>{return this.$api.get(t.api,{view:"compact"},null,!0).then(e=>{let s;if(s=!0===t.id.startsWith("pages/")?{icon:"page",label:e.title,target:{link:this.$api.pages.link(e.id)}}:!0===t.id.startsWith("files/")?{icon:"image",label:e.filename,target:{link:e.link}}:!0===t.id.startsWith("users/")?{icon:"user",label:e.email,target:{link:this.$api.users.link(e.id)}}:{icon:"home",label:e.title,target:{link:"/site"}},this.$store.state.languages.current){const e=t.id.split("/").pop();s.label=s.label+" ("+e+")",s.target.language=e}return s}).catch(()=>{return this.$store.dispatch("content/remove",t.id),null})});return Promise.all(t).then(t=>{this.entries=t.filter(t=>{return null!==t}),0===this.entries.length&&this.$store.dispatch("notification/success",this.$t("lock.unsaved.empty"))})},toggle(){!1===this.$refs.list.isOpen?this.load().then(()=>{this.$refs.list&&this.$refs.list.toggle()}):this.$refs.list.toggle()}}},ji=Ti,Ii=(s("9e26"),Object(u["a"])(ji,Oi,Ei,!1,null,null,null)),Li=Ii.exports,Ai=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:"k-field k-field-name-"+t.name,attrs:{"data-disabled":t.disabled,"data-translate":t.translate},on:{focusin:function(e){return t.$emit("focus",e)},focusout:function(e){return t.$emit("blur",e)}}},[t._t("header",[s("header",{staticClass:"k-field-header"},[t._t("label",[s("label",{staticClass:"k-field-label",attrs:{for:t.input}},[t._v(t._s(t.labelText)+" "),t.required?s("abbr",{attrs:{title:t.$t("field.required")}},[t._v("*")]):t._e()])]),t._t("options"),t._t("counter",[t.counter?s("k-counter",t._b({staticClass:"k-field-counter",attrs:{required:t.required}},"k-counter",t.counter,!1)):t._e()])],2)]),t._t("default"),t._t("footer",[t.help||t.$slots.help?s("footer",{staticClass:"k-field-footer"},[t._t("help",[t.help?s("k-text",{staticClass:"k-field-help",attrs:{theme:"help"},domProps:{innerHTML:t._s(t.help)}}):t._e()])],2):t._e()])],2)},Bi=[],qi={inheritAttrs:!1,props:{counter:[Boolean,Object],disabled:Boolean,endpoints:Object,help:String,input:[String,Number],label:String,name:[String,Number],required:Boolean,translate:Boolean,type:String},computed:{labelText(){return this.label||" "}}},Ni=qi,Pi=(s("a134"),Object(u["a"])(Ni,Ai,Bi,!1,null,null,null)),Di=Pi.exports,Ri=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("fieldset",{staticClass:"k-fieldset"},[s("k-grid",t._l(t.fields,(function(e,i){return"hidden"!==e.type&&t.meetsCondition(e)?s("k-column",{key:e.signature,attrs:{width:e.width}},[s("k-error-boundary",[t.hasFieldType(e.type)?s("k-"+e.type+"-field",t._b({ref:i,refInFor:!0,tag:"component",attrs:{name:i,novalidate:t.novalidate,disabled:t.disabled||e.disabled},on:{input:function(s){return t.$emit("input",t.value,e,i)},focus:function(s){return t.$emit("focus",s,e,i)},invalid:function(s,n){return t.onInvalid(s,n,e,i)},submit:function(s){return t.$emit("submit",s,e,i)}},model:{value:t.value[i],callback:function(e){t.$set(t.value,i,e)},expression:"value[fieldName]"}},"component",e,!1)):s("k-box",{attrs:{theme:"negative"}},[s("k-text",{attrs:{size:"small"}},[t._v(" The field type "),s("strong",[t._v('"'+t._s(i)+'"')]),t._v(" does not exist ")])],1)],1)],1):t._e()})),1)],1)},Mi=[],Fi={props:{config:Object,disabled:Boolean,fields:{type:[Array,Object],default(){return[]}},novalidate:{type:Boolean,default:!1},value:{type:Object,default(){return{}}}},data(){return{errors:{}}},methods:{focus(t){if(t)return void(this.hasField(t)&&"function"===typeof this.$refs[t][0].focus&&this.$refs[t][0].focus());const e=Object.keys(this.$refs)[0];this.focus(e)},hasFieldType(t){return M["a"].options.components["k-"+t+"-field"]},hasField(t){return this.$refs[t]&&this.$refs[t][0]},meetsCondition(t){if(!t.when)return!0;let e=!0;return Object.keys(t.when).forEach(s=>{const i=this.value[s.toLowerCase()],n=t.when[s];i!==n&&(e=!1)}),e},onInvalid(t,e,s,i){this.errors[i]=e,this.$emit("invalid",this.errors)},hasErrors(){return Object.keys(this.errors).length}}},Ui=Fi,zi=(s("862b"),Object(u["a"])(Ui,Ri,Mi,!1,null,null,null)),Hi=zi.exports,Ki=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-input",attrs:{"data-disabled":t.disabled,"data-invalid":!t.novalidate&&t.isInvalid,"data-theme":t.theme,"data-type":t.type}},[t.$slots.before||t.before?s("span",{staticClass:"k-input-before",on:{click:t.focus}},[t._t("before",[t._v(t._s(t.before))])],2):t._e(),s("span",{staticClass:"k-input-element",on:{click:function(e){return e.stopPropagation(),t.focus(e)}}},[t._t("default",[s("k-"+t.type+"-input",t._g(t._b({ref:"input",tag:"component",attrs:{value:t.value}},"component",t.inputProps,!1),t.listeners))])],2),t.$slots.after||t.after?s("span",{staticClass:"k-input-after",on:{click:t.focus}},[t._t("after",[t._v(t._s(t.after))])],2):t._e(),t.$slots.icon||t.icon?s("span",{staticClass:"k-input-icon",on:{click:t.focus}},[t._t("icon",[s("k-icon",{attrs:{type:t.icon}})])],2):t._e()])},Vi=[],Yi={inheritAttrs:!1,props:{after:String,before:String,disabled:Boolean,type:String,icon:[String,Boolean],invalid:Boolean,theme:String,novalidate:{type:Boolean,default:!1},value:{type:[String,Boolean,Number,Object,Array],default:null}},data(){return{isInvalid:this.invalid,listeners:{...this.$listeners,invalid:(t,e)=>{this.isInvalid=t,this.$emit("invalid",t,e)}}}},computed:{inputProps(){return{...this.$props,...this.$attrs}}},methods:{blur(t){t.relatedTarget&&!1===this.$el.contains(t.relatedTarget)&&this.$refs.input.blur&&this.$refs.input.blur()},focus(t){if(t&&t.target&&"INPUT"===t.target.tagName)return void t.target.focus();if(this.$refs.input&&this.$refs.input.focus)return void this.$refs.input.focus();const e=this.$el.querySelector("input, select, textarea");e&&e.focus()}}},Wi=Yi,Ji=(s("c7c8"),Object(u["a"])(Wi,Ki,Vi,!1,null,null,null)),Gi=Ji.exports,Zi=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-upload"},[s("input",{ref:"input",attrs:{accept:t.options.accept,multiple:t.options.multiple,"aria-hidden":"true",type:"file",tabindex:"-1"},on:{change:t.select,click:function(t){t.stopPropagation()}}}),s("k-dialog",{ref:"dialog",attrs:{"cancel-button":!1,"submit-button":!1,size:"medium"}},[t.errors.length>0?[s("k-headline",[t._v(t._s(t.$t("upload.errors")))]),s("ul",{staticClass:"k-upload-error-list"},t._l(t.errors,(function(e,i){return s("li",{key:"error-"+i},[s("p",{staticClass:"k-upload-error-filename"},[t._v(" "+t._s(e.file.name)+" ")]),s("p",{staticClass:"k-upload-error-message"},[t._v(" "+t._s(e.message)+" ")])])})),0)]:[s("k-headline",[t._v(t._s(t.$t("upload.progress")))]),s("ul",{staticClass:"k-upload-list"},t._l(t.files,(function(e,i){return s("li",{key:"file-"+i},[s("k-progress",{ref:e.name,refInFor:!0}),s("p",{staticClass:"k-upload-list-filename"},[t._v(" "+t._s(e.name)+" ")]),s("p",[t._v(t._s(t.errors[e.name]))])],1)})),0)],s("template",{slot:"footer"},[t.errors.length>0?[s("k-button-group",[s("k-button",{attrs:{icon:"check"},on:{click:function(e){return t.$refs.dialog.close()}}},[t._v(" "+t._s(t.$t("confirm"))+" ")])],1)]:t._e()],2)],2)],1)},Xi=[],Qi={props:{url:{type:String},accept:{type:String,default:"*"},attributes:{type:Object},multiple:{type:Boolean,default:!0},max:{type:Number}},data(){return{options:this.$props,completed:{},errors:[],files:[],total:0}},methods:{open(t){this.params(t),setTimeout(()=>{this.$refs.input.click()},1)},params(t){this.options=Object.assign({},this.$props,t)},select(t){this.upload(t.target.files)},drop(t,e){this.params(e),this.upload(t)},upload(t){this.$refs.dialog.open(),this.files=[...t],this.completed={},this.errors=[],this.hasErrors=!1,this.options.max&&(this.files=this.files.slice(0,this.options.max)),this.total=this.files.length,this.files.forEach(t=>{this.$helper.upload(t,{url:this.options.url,attributes:this.options.attributes,headers:{"X-CSRF":window.panel.csrf},progress:(t,e,s)=>{this.$refs[e.name]&&this.$refs[e.name][0]&&this.$refs[e.name][0].set(s)},success:(t,e,s)=>{this.complete(e,s.data)},error:(t,e,s)=>{this.errors.push({file:e,message:s.message}),this.complete(e,s.data)}})})},complete(t,e){if(this.completed[t.name]=e,Object.keys(this.completed).length==this.total){if(this.$refs.input.value="",this.errors.length>0)return this.$forceUpdate(),void this.$emit("error",this.files);setTimeout(()=>{this.$refs.dialog.close(),this.$emit("success",this.files,Object.values(this.completed))},250)}}}},tn=Qi,en=(s("5aee"),Object(u["a"])(tn,Zi,Xi,!1,null,null,null)),sn=en.exports,nn=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{staticClass:"k-checkbox-input",on:{click:function(t){t.stopPropagation()}}},[s("input",{ref:"input",staticClass:"k-checkbox-input-native",attrs:{id:t.id,disabled:t.disabled,type:"checkbox"},domProps:{checked:t.value},on:{change:function(e){return t.onChange(e.target.checked)}}}),s("span",{staticClass:"k-checkbox-input-icon",attrs:{"aria-hidden":"true"}},[s("svg",{attrs:{width:"12",height:"10",viewBox:"0 0 12 10",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{d:"M1 5l3.3 3L11 1","stroke-width":"2",fill:"none","fill-rule":"evenodd"}})])]),s("span",{staticClass:"k-checkbox-input-label",domProps:{innerHTML:t._s(t.label)}})])},an=[],rn=s("b5ae"),on={inheritAttrs:!1,props:{autofocus:Boolean,disabled:Boolean,id:[Number,String],label:String,required:Boolean,value:Boolean},watch:{value(){this.onInvalid()}},mounted(){this.onInvalid(),this.$props.autofocus&&this.focus()},methods:{focus(){this.$refs.input.focus()},onChange(t){this.$emit("input",t)},onInvalid(){this.$emit("invalid",this.$v.$invalid,this.$v)},select(){this.focus()}},validations(){return{value:{required:!this.required||rn["required"]}}}},ln=on,un=(s("42e4"),Object(u["a"])(ln,nn,an,!1,null,null,null)),cn=un.exports,dn=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"k-checkboxes-input",style:"--columns:"+t.columns},t._l(t.options,(function(e,i){return s("li",{key:i},[s("k-checkbox-input",{attrs:{id:t.id+"-"+i,label:e.text,value:-1!==t.selected.indexOf(e.value)},on:{input:function(s){return t.onInput(e.value,s)}}})],1)})),0)},hn=[],pn={inheritAttrs:!1,props:{autofocus:Boolean,columns:Number,disabled:Boolean,id:{type:[Number,String],default(){return this._uid}},max:Number,min:Number,options:Array,required:Boolean,value:{type:[Array,Object],default(){return[]}}},data(){return{selected:this.valueToArray(this.value)}},watch:{value(t){this.selected=this.valueToArray(t)},selected(){this.onInvalid()}},mounted(){this.onInvalid(),this.$props.autofocus&&this.focus()},methods:{focus(){this.$el.querySelector("input").focus()},onInput(t,e){if(!0===e)this.selected.push(t);else{const e=this.selected.indexOf(t);-1!==e&&this.selected.splice(e,1)}this.$emit("input",this.selected)},onInvalid(){this.$emit("invalid",this.$v.$invalid,this.$v)},select(){this.focus()},valueToArray(t){return!0===Array.isArray(t)?t:"string"===typeof t?String(t).split(","):"object"===typeof t?Object.values(t):void 0}},validations(){return{selected:{required:!this.required||rn["required"],min:!this.min||Object(rn["minLength"])(this.min),max:!this.max||Object(rn["maxLength"])(this.max)}}}},mn=pn,fn=Object(u["a"])(mn,dn,hn,!1,null,null,null),gn=fn.exports,bn=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-date-input"},[s("k-select-input",{ref:"years",attrs:{"aria-label":t.$t("year"),options:t.years,disabled:t.disabled,required:t.required,value:t.year,placeholder:"––––"},on:{input:t.setYear,invalid:t.onInvalid}}),s("span",{staticClass:"k-date-input-separator"},[t._v("-")]),s("k-select-input",{ref:"months",attrs:{"aria-label":t.$t("month"),options:t.months,disabled:t.disabled,required:t.required,value:t.month,placeholder:"––"},on:{input:t.setMonth,invalid:t.onInvalid}}),s("span",{staticClass:"k-date-input-separator"},[t._v("-")]),s("k-select-input",{ref:"days",attrs:{id:t.id,"aria-label":t.$t("day"),autofocus:t.autofocus,options:t.days,disabled:t.disabled,required:t.required,value:t.day,placeholder:"––"},on:{input:t.setDay,invalid:t.onInvalid}})],1)},kn=[],vn={inheritAttrs:!1,props:{autofocus:Boolean,disabled:Boolean,id:[String,Number],max:String,min:String,required:Boolean,value:String},data(){return{date:this.$library.dayjs(this.value),minDate:this.calculate(this.min,"min"),maxDate:this.calculate(this.max,"max")}},computed:{day(){return isNaN(this.date.date())?"":this.date.date()},days(){return this.options(1,this.date.daysInMonth()||31,"days")},month(){return isNaN(this.date.date())?"":this.date.month()+1},months(){return this.options(1,12,"months")},year(){return isNaN(this.date.year())?"":this.date.year()},years(){const t=this.date.isBefore(this.minDate)?this.date.year():this.minDate.year(),e=this.date.isAfter(this.maxDate)?this.date.year():this.maxDate.year();return this.options(t,e)}},watch:{value(t){this.date=this.$library.dayjs(t)}},methods:{calculate(t,e){const s={min:{run:"subtract",take:"startOf"},max:{run:"add",take:"endOf"}}[e];let i=t?this.$library.dayjs(t):null;return i&&!1!==i.isValid()||(i=this.$library.dayjs()[s.run](10,"year")[s.take]("year")),i},focus(){this.$refs.years.focus()},onInput(){!1!==this.date.isValid()?this.$emit("input",this.date.toISOString()):this.$emit("input","")},onInvalid(t,e){this.$emit("invalid",t,e)},options(t,e){let s=[];for(var i=t;i<=e;i++)s.push({value:i,text:this.$helper.pad(i)});return s},set(t,e){if(""===e||null===e||!1===e||-1===e)return this.setInvalid(),void this.onInput();if(!1===this.date.isValid())return this.setInitialDate(t,e),void this.onInput();let s=this.date,i=this.date.date();this.date=this.date.set(t,parseInt(e)),"month"===t&&this.date.date()!==i&&(this.date=s.set("date",1).set("month",e).endOf("month")),this.onInput()},setInvalid(){this.date=this.$library.dayjs("invalid")},setInitialDate(t,e){const s=this.$library.dayjs();return this.date=this.$library.dayjs().set(t,parseInt(e)),"date"===t&&s.month()!==this.date.month()&&(this.date=s.endOf("month")),this.date},setDay(t){this.set("date",t)},setMonth(t){this.set("month",t-1)},setYear(t){this.set("year",t)}}},$n=vn,_n=(s("6ab3"),Object(u["a"])($n,bn,kn,!1,null,null,null)),yn=_n.exports,xn=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-datetime-input"},[s("k-date-input",{ref:"dateInput",attrs:{id:t.id,autofocus:t.autofocus,required:t.required,min:t.min,max:t.max,disabled:t.disabled,value:t.dateValue},on:{input:t.setDate}}),s("k-time-input",t._b({ref:"timeInput",attrs:{required:t.required,disabled:t.disabled,value:t.timeValue},on:{input:t.setTime}},"k-time-input",t.timeOptions,!1))],1)},wn=[],Sn={inheritAttrs:!1,props:{...yn.props,time:{type:[Boolean,Object],default(){return{}}},value:String},data(){return{dateValue:this.parseDate(this.value),timeValue:this.parseTime(this.value),timeOptions:this.setTimeOptions()}},watch:{value(t){this.dateValue=this.parseDate(t),this.timeValue=this.parseTime(t),this.onInvalid()}},mounted(){this.onInvalid()},methods:{focus(){this.$refs.dateInput.focus()},onInput(){if(!this.timeValue||!this.dateValue)return void this.$emit("input","");let t=this.dateValue+"T"+this.timeValue+":00";this.$emit("input",t)},onInvalid(){this.$emit("invalid",this.$v.$invalid,this.$v)},parseDate(t){const e=this.$library.dayjs(t);return e.isValid()?e.format("YYYY-MM-DD"):null},parseTime(t){const e=this.$library.dayjs(t);return e.isValid()?e.format("HH:mm"):null},setDate(t){t&&!this.timeValue&&(this.timeValue=this.$library.dayjs().format("HH:mm")),t?this.dateValue=this.parseDate(t):(this.dateValue=null,this.timeValue=null),this.onInput()},setTime(t){t&&!this.dateValue&&(this.dateValue=this.$library.dayjs().format("YYYY-MM-DD")),t?this.timeValue=t:(this.dateValue=null,this.timeValue=null),this.onInput()},setTimeOptions(){return!0===this.time?{}:this.time}},validations(){return{value:{required:!this.required||rn["required"]}}}},Cn=Sn,On=(s("4433"),Object(u["a"])(Cn,xn,wn,!1,null,null,null)),En=On.exports,Tn=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("input",t._g(t._b({ref:"input",staticClass:"k-text-input"},"input",{autocomplete:t.autocomplete,autofocus:t.autofocus,disabled:t.disabled,id:t.id,minlength:t.minlength,name:t.name,pattern:t.pattern,placeholder:t.placeholder,required:t.required,spellcheck:t.spellcheck,type:t.type,value:t.value},!1),t.listeners))},jn=[],In={inheritAttrs:!1,class:"k-text-input",props:{autocomplete:{type:[Boolean,String],default:"off"},autofocus:Boolean,disabled:Boolean,id:[Number,String],maxlength:Number,minlength:Number,name:[Number,String],pattern:String,placeholder:String,preselect:Boolean,required:Boolean,spellcheck:{type:[Boolean,String],default:"off"},type:{type:String,default:"text"},value:String},data(){return{listeners:{...this.$listeners,input:t=>this.onInput(t.target.value)}}},watch:{value(){this.onInvalid()}},mounted(){this.onInvalid(),this.$props.autofocus&&this.focus(),this.$props.preselect&&this.select()},methods:{focus(){this.$refs.input.focus()},onInput(t){this.$emit("input",t)},onInvalid(){this.$emit("invalid",this.$v.$invalid,this.$v)},select(){this.$refs.input.select()}},validations(){const t=t=>{return!this.required&&!t||!this.$refs.input.validity.patternMismatch};return{value:{required:!this.required||rn["required"],minLength:!this.minlength||Object(rn["minLength"])(this.minlength),maxLength:!this.maxlength||Object(rn["maxLength"])(this.maxlength),email:"email"!==this.type||rn["email"],url:"url"!==this.type||rn["url"],pattern:!this.pattern||t}}}},Ln=In,An=(s("cb8f"),Object(u["a"])(Ln,Tn,jn,!1,null,null,null)),Bn=An.exports,qn={extends:Bn,props:{...Bn.props,autocomplete:{type:String,default:"email"},placeholder:{type:String,default(){return this.$t("email.placeholder")}},type:{type:String,default:"email"}}},Nn=qn,Pn=Object(u["a"])(Nn,S,C,!1,null,null,null),Dn=Pn.exports,Rn=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-draggable",{staticClass:"k-multiselect-input",attrs:{list:t.state,options:t.dragOptions,"data-layout":t.layout,element:"k-dropdown"},on:{end:t.onInput},nativeOn:{click:function(e){return t.$refs.dropdown.toggle(e)}}},[t._l(t.sorted,(function(e){return s("k-tag",{key:e.value,ref:e.value,refInFor:!0,attrs:{removable:!0},on:{remove:function(s){return t.remove(e)}},nativeOn:{click:function(t){t.stopPropagation()},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:"button"in e&&0!==e.button?null:t.navigate("prev")},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])?null:"button"in e&&2!==e.button?null:t.navigate("next")},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:t.$refs.dropdown.open(e)}]}},[t._v(" "+t._s(e.text)+" ")])})),s("k-dropdown-content",{ref:"dropdown",attrs:{slot:"footer"},on:{open:t.onOpen,close:t.onClose},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:(e.stopPropagation(),t.close(e))}},slot:"footer"},[t.search?s("k-dropdown-item",{staticClass:"k-multiselect-search",attrs:{icon:"search"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.q,expression:"q"}],ref:"search",domProps:{value:t.q},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:(e.stopPropagation(),t.escape(e))},input:function(e){e.target.composing||(t.q=e.target.value)}}})]):t._e(),s("div",{staticClass:"k-multiselect-options"},t._l(t.filtered,(function(e){return s("k-dropdown-item",{key:e.value,class:{"k-multiselect-option":!0,selected:t.isSelected(e),disabled:!t.addable},attrs:{icon:t.isSelected(e)?"check":"circle-outline"},on:{click:function(s){return s.preventDefault(),t.select(e)}},nativeOn:{keydown:[function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:(s.preventDefault(),s.stopPropagation(),t.select(e))},function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"space",32,s.key,[" ","Spacebar"])?null:(s.preventDefault(),s.stopPropagation(),t.select(e))}]}},[s("span",{domProps:{innerHTML:t._s(e.display)}}),s("span",{staticClass:"k-multiselect-value",domProps:{innerHTML:t._s(e.info)}})])})),1)],1)],2)},Mn=[],Fn={inheritAttrs:!1,props:{disabled:Boolean,id:[Number,String],max:Number,min:Number,layout:String,options:{type:Array,default(){return[]}},required:Boolean,search:Boolean,separator:{type:String,default:","},sort:Boolean,value:{type:Array,required:!0,default(){return[]}}},data(){return{state:this.value,q:null,scrollTop:0}},computed:{addable(){return!this.max||this.state.length<this.max},draggable(){return this.state.length>1&&!this.sort},dragOptions(){return{disabled:!this.draggable,draggable:".k-tag",delay:1}},filtered(){if(null===this.q)return this.options.map(t=>({...t,display:t.text,info:t.value}));const t=new RegExp("(".concat(RegExp.escape(this.q),")"),"ig");return this.options.filter(e=>{return String(e.text).match(t)||String(e.value).match(t)}).map(e=>{return{...e,display:String(e.text).replace(t,"<b>$1</b>"),info:String(e.value).replace(t,"<b>$1</b>")}})},sorted(){if(!1===this.sort)return this.state;let t=this.state;const e=t=>this.options.findIndex(e=>e.value===t.value);return t.sort((t,s)=>e(t)-e(s))}},watch:{value(t){this.state=t,this.onInvalid()}},mounted(){this.onInvalid(),this.$events.$on("click",this.close),this.$events.$on("keydown.cmd.s",this.close)},destroyed(){this.$events.$off("click",this.close),this.$events.$off("keydown.cmd.s",this.close)},methods:{add(t){!0===this.addable&&(this.state.push(t),this.onInput())},blur(){this.close()},close(){!0===this.$refs.dropdown.isOpen&&this.$refs.dropdown.close()},escape(){this.q?this.q=null:this.close()},focus(){this.$refs.dropdown.open()},index(t){return this.state.findIndex(e=>e.value===t.value)},isSelected(t){return-1!==this.index(t)},navigate(t){let e=document.activeElement;switch(t){case"prev":e&&e.previousSibling&&e.previousSibling.focus&&e.previousSibling.focus();break;case"next":e&&e.nextSibling&&e.nextSibling.focus&&e.nextSibling.focus();break}},onClose(){!1===this.$refs.dropdown.isOpen&&(document.activeElement===this.$parent.$el&&(this.q=null),this.$parent.$el.focus())},onInput(){this.$emit("input",this.sorted)},onInvalid(){this.$emit("invalid",this.$v.$invalid,this.$v)},onOpen(){this.$nextTick(()=>{this.$refs.search&&this.$refs.search.focus&&this.$refs.search.focus(),this.$refs.dropdown.$el.querySelector(".k-multiselect-options").scrollTop=this.scrollTop})},remove(t){this.state.splice(this.index(t),1),this.onInput()},select(t){this.scrollTop=this.$refs.dropdown.$el.querySelector(".k-multiselect-options").scrollTop,t={text:t.text,value:t.value},this.isSelected(t)?this.remove(t):this.add(t)}},validations(){return{state:{required:!this.required||rn["required"],minLength:!this.min||Object(rn["minLength"])(this.min),maxLength:!this.max||Object(rn["maxLength"])(this.max)}}}},Un=Fn,zn=(s("11ae"),Object(u["a"])(Un,Rn,Mn,!1,null,null,null)),Hn=zn.exports,Kn=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("input",t._g(t._b({ref:"input",staticClass:"k-number-input",attrs:{step:t.stepNumber,type:"number"},domProps:{value:t.number},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"cmd",void 0,e.key,void 0)&&t._k(e.keyCode,"s",void 0,e.key,void 0)?null:t.clean(e)}}},"input",{autofocus:t.autofocus,disabled:t.disabled,id:t.id,max:t.max,min:t.min,name:t.name,placeholder:t.placeholder,required:t.required},!1),t.listeners))},Vn=[],Yn={inheritAttrs:!1,props:{autofocus:Boolean,disabled:Boolean,id:[Number,String],max:Number,min:Number,name:[Number,String],placeholder:String,preselect:Boolean,required:Boolean,step:Number,value:{type:[Number,String],default:null}},data(){return{number:this.format(this.value),stepNumber:this.format(this.step),timeout:null,listeners:{...this.$listeners,input:t=>this.onInput(t.target.value),blur:this.onBlur}}},watch:{value(t){this.number=t},number:{immediate:!0,handler(){this.onInvalid()}}},mounted(){this.$props.autofocus&&this.focus(),this.$props.preselect&&this.select()},methods:{decimals(){const t=Number(this.step||0);return Math.floor(t)===t?0:-1!==t.toString().indexOf("e")?parseInt(t.toFixed(16).split(".")[1].split("").reverse().join("")).toString().length:t.toString().split(".")[1].length||0},format(t){if(isNaN(t)||""===t)return"";const e=this.decimals();return t=e?parseFloat(t).toFixed(e):Number.isInteger(this.step)?parseInt(t):parseFloat(t),t},clean(){this.number=this.format(this.number)},emit(t){t=parseFloat(t),isNaN(t)&&(t=""),t!==this.value&&this.$emit("input",t)},focus(){this.$refs.input.focus()},onInvalid(){this.$emit("invalid",this.$v.$invalid,this.$v)},onInput(t){this.number=t,this.emit(t)},onBlur(){this.clean(),this.emit(this.number)},select(){this.$refs.input.select()}},validations(){return{value:{required:!this.required||rn["required"],min:!this.min||Object(rn["minValue"])(this.min),max:!this.max||Object(rn["maxValue"])(this.max)}}}},Wn=Yn,Jn=(s("6018"),Object(u["a"])(Wn,Kn,Vn,!1,null,null,null)),Gn=Jn.exports,Zn={extends:Bn,props:{...Bn.props,autocomplete:{type:String,default:"new-password"},type:{type:String,default:"password"}}},Xn=Zn,Qn=Object(u["a"])(Xn,O,E,!1,null,null,null),ta=Qn.exports,ea=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"k-radio-input",style:"--columns:"+t.columns},t._l(t.options,(function(e,i){return s("li",{key:i},[s("input",{staticClass:"k-radio-input-native",attrs:{id:t.id+"-"+i,name:t.id,type:"radio"},domProps:{value:e.value,checked:t.value===e.value},on:{change:function(s){return t.onInput(e.value)}}}),s("label",{attrs:{for:t.id+"-"+i}},[e.info?[s("span",{staticClass:"k-radio-input-text"},[t._v(t._s(e.text))]),s("span",{staticClass:"k-radio-input-info"},[t._v(t._s(e.info))])]:[t._v(" "+t._s(e.text)+" ")]],2),e.icon?s("k-icon",{attrs:{type:e.icon}}):t._e()],1)})),0)},sa=[],ia={inheritAttrs:!1,props:{autofocus:Boolean,columns:Number,disabled:Boolean,id:{type:[Number,String],default(){return this._uid}},options:Array,required:Boolean,value:[String,Number,Boolean]},watch:{value(){this.onInvalid()}},mounted(){this.onInvalid(),this.$props.autofocus&&this.focus()},methods:{focus(){this.$el.querySelector("input").focus()},onInput(t){this.$emit("input",t)},onInvalid(){this.$emit("invalid",this.$v.$invalid,this.$v)},select(){this.focus()}},validations(){return{value:{required:!this.required||rn["required"]}}}},na=ia,aa=(s("893d"),Object(u["a"])(na,ea,sa,!1,null,null,null)),ra=aa.exports,oa=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{staticClass:"k-range-input"},[s("input",t._g(t._b({ref:"input",staticClass:"k-range-input-native",style:"--min: "+t.min+"; --max: "+t.max+"; --value: "+t.position,attrs:{type:"range"},domProps:{value:t.position}},"input",{autofocus:t.autofocus,disabled:t.disabled,id:t.id,max:t.max,min:t.min,name:t.name,required:t.required,step:t.step},!1),t.listeners)),t.tooltip?s("span",{staticClass:"k-range-input-tooltip"},[t.tooltip.before?s("span",{staticClass:"k-range-input-tooltip-before"},[t._v(t._s(t.tooltip.before))]):t._e(),s("span",{staticClass:"k-range-input-tooltip-text"},[t._v(t._s(t.label))]),t.tooltip.after?s("span",{staticClass:"k-range-input-tooltip-after"},[t._v(t._s(t.tooltip.after))]):t._e()]):t._e()])},la=[],ua={inheritAttrs:!1,props:{autofocus:Boolean,disabled:Boolean,id:[String,Number],default:[Number,String],max:{type:Number,default:100},min:{type:Number,default:0},name:[String,Number],required:Boolean,step:{type:Number,default:1},tooltip:{type:[Boolean,Object],default(){return{before:null,after:null}}},value:[Number,String]},data(){return{listeners:{...this.$listeners,input:t=>this.onInput(t.target.value)}}},computed:{baseline(){return this.min<0?0:this.min},label(){return this.required||this.value?this.format(this.position):"–"},position(){return this.value||this.default||this.baseline}},watch:{position(){this.onInvalid()}},mounted(){this.onInvalid(),this.$props.autofocus&&this.focus()},methods:{focus(){this.$refs.input.focus()},format(t){const e=document.lang?document.lang.replace("_","-"):"en",s=this.step.toString().split("."),i=s.length>1?s[1].length:0;return new Intl.NumberFormat(e,{minimumFractionDigits:i}).format(t)},onInvalid(){this.$emit("invalid",this.$v.$invalid,this.$v)},onInput(t){this.$emit("input",t)}},validations(){return{position:{required:!this.required||rn["required"],min:!this.min||Object(rn["minValue"])(this.min),max:!this.max||Object(rn["maxValue"])(this.max)}}}},ca=ua,da=(s("b5d2"),Object(u["a"])(ca,oa,la,!1,null,null,null)),ha=da.exports,pa=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"k-select-input",attrs:{"data-disabled":t.disabled,"data-empty":""===t.selected}},[s("select",t._g({ref:"input",staticClass:"k-select-input-native",attrs:{id:t.id,autofocus:t.autofocus,"aria-label":t.ariaLabel,disabled:t.disabled,name:t.name,required:t.required},domProps:{value:t.selected}},t.listeners),[t.hasEmptyOption?s("option",{attrs:{disabled:t.required,value:""}},[t._v(" "+t._s(t.emptyOption)+" ")]):t._e(),t._l(t.options,(function(e){return s("option",{key:e.value,attrs:{disabled:e.disabled},domProps:{value:e.value}},[t._v(" "+t._s(e.text)+" ")])}))],2),t._v(" "+t._s(t.label)+" ")])},ma=[],fa={inheritAttrs:!1,props:{autofocus:Boolean,ariaLabel:String,default:String,disabled:Boolean,empty:{type:[Boolean,String],default:!0},id:[Number,String],name:[Number,String],placeholder:String,options:{type:Array,default:()=>{return[]}},required:Boolean,value:{type:[String,Number,Boolean],default:""}},data(){return{selected:this.value,listeners:{...this.$listeners,click:t=>this.onClick(t),change:t=>this.onInput(t.target.value),input:t=>{}}}},computed:{emptyOption(){return this.placeholder||"—"},hasEmptyOption(){return!1!==this.empty&&!(this.required&&this.default)},label(){const t=this.text(this.selected);return""===this.selected||null===this.selected||null===t?this.emptyOption:t}},watch:{value(t){this.selected=t,this.onInvalid()}},mounted(){this.onInvalid(),this.$props.autofocus&&this.focus()},methods:{focus(){this.$refs.input.focus()},onClick(t){t.stopPropagation(),this.$emit("click",t)},onInvalid(){this.$emit("invalid",this.$v.$invalid,this.$v)},onInput(t){this.selected=t,this.$emit("input",this.selected)},select(){this.focus()},text(t){let e=null;return this.options.forEach(s=>{s.value==t&&(e=s.text)}),e}},validations(){return{selected:{required:!this.required||rn["required"]}}}},ga=fa,ba=(s("6a18"),Object(u["a"])(ga,pa,ma,!1,null,null,null)),ka=ba.exports,va=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-draggable",{ref:"box",staticClass:"k-tags-input",attrs:{list:t.tags,"data-layout":t.layout,options:t.dragOptions},on:{end:t.onInput}},[t._l(t.tags,(function(e,i){return s("k-tag",{key:i,ref:e.value,refInFor:!0,attrs:{removable:!t.disabled,name:"tag"},on:{remove:function(s){return t.remove(e)}},nativeOn:{click:function(t){t.stopPropagation()},blur:function(e){return t.selectTag(null)},focus:function(s){return t.selectTag(e)},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:"button"in e&&0!==e.button?null:t.navigate("prev")},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])?null:"button"in e&&2!==e.button?null:t.navigate("next")}],dblclick:function(s){return t.edit(e)}}},[t._v(" "+t._s(e.text)+" ")])})),s("span",{staticClass:"k-tags-input-element",attrs:{slot:"footer"},slot:"footer"},[s("k-autocomplete",{ref:"autocomplete",attrs:{options:t.options,skip:t.skip},on:{select:t.addTag,leave:function(e){return t.$refs.input.focus()}}},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.newTag,expression:"newTag",modifiers:{trim:!0}}],ref:"input",attrs:{id:t.id,autofocus:t.autofocus,disabled:t.disabled||t.max&&t.tags.length>=t.max,name:t.name,autocomplete:"off",type:"text"},domProps:{value:t.newTag},on:{input:[function(e){e.target.composing||(t.newTag=e.target.value.trim())},function(e){return t.type(e.target.value)}],blur:[t.blurInput,function(e){return t.$forceUpdate()}],keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"s",void 0,e.key,void 0)?null:e.metaKey?t.blurInput(e):null},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:"button"in e&&0!==e.button?null:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.leaveInput(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.enter(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"tab",9,e.key,"Tab")?null:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.tab(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"backspace",void 0,e.key,void 0)?null:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.leaveInput(e)}]}})])],1)],2)},$a=[],_a={inheritAttrs:!1,props:{autofocus:Boolean,accept:{type:String,default:"all"},disabled:Boolean,icon:{type:[String,Boolean],default:"tag"},id:[Number,String],layout:String,max:Number,min:Number,name:[Number,String],options:{type:Array,default(){return[]}},required:Boolean,separator:{type:String,default:","},value:{type:Array,default(){return[]}}},data(){return{tags:this.prepareTags(this.value),selected:null,newTag:null,tagOptions:this.options.map(t=>{return this.icon&&this.icon.length>0&&(t.icon=this.icon),t},this)}},computed:{dragOptions(){return{delay:1,disabled:!this.draggable,draggable:".k-tag"}},draggable(){return this.tags.length>1},skip(){return this.tags.map(t=>t.value)}},watch:{value(t){this.tags=this.prepareTags(t),this.onInvalid()}},mounted(){this.onInvalid(),this.$props.autofocus&&this.focus()},methods:{addString(t){if(t)if(t=t.trim(),t.includes(this.separator))t.split(this.separator).forEach(t=>{this.addString(t)});else if(0!==t.length)if("options"===this.accept){const e=this.options.filter(e=>e.text===t)[0];if(!e)return;this.addTag(e)}else this.addTag({text:t,value:t})},addTag(t){this.addTagToIndex(t),this.$refs.autocomplete.close(),this.$refs.input.focus()},addTagToIndex(t){if("options"===this.accept){const e=this.options.filter(e=>e.value===t.value)[0];if(!e)return}-1===this.index(t)&&(!this.max||this.tags.length<this.max)&&(this.tags.push(t),this.onInput()),this.newTag=null},blurInput(t){let e=t.relatedTarget||t.explicitOriginalTarget;this.$refs.autocomplete.$el&&this.$refs.autocomplete.$el.contains(e)||this.$refs.input.value.length&&(this.addTagToIndex(this.$refs.input.value),this.$refs.autocomplete.close())},edit(t){this.newTag=t.text,this.$refs.input.select(),this.remove(t)},enter(t){if(!this.newTag||0===this.newTag.length)return!0;t.preventDefault(),this.addString(this.newTag)},focus(){this.$refs.input.focus()},get(t){let e=null,s=null;switch(t){case"prev":if(!this.selected)return;if(s=this.index(this.selected),e=s-1,e<0)return;break;case"next":if(!this.selected)return;if(s=this.index(this.selected),e=s+1,e>=this.tags.length)return;break;case"first":e=0;break;case"last":e=this.tags.length-1;break;default:e=t;break}let i=this.tags[e];if(i){let t=this.$refs[i.value];if(t&&t[0])return{ref:t[0],tag:i,index:e}}return!1},index(t){return this.tags.findIndex(e=>e.value===t.value)},onInput(){this.$emit("input",this.tags)},onInvalid(){this.$emit("invalid",this.$v.$invalid,this.$v)},leaveInput(t){0===t.target.selectionStart&&t.target.selectionStart===t.target.selectionEnd&&0!==this.tags.length&&(this.$refs.autocomplete.close(),this.navigate("last"),t.preventDefault())},navigate(t){var e=this.get(t);e?(e.ref.focus(),this.selectTag(e.tag)):"next"===t&&(this.$refs.input.focus(),this.selectTag(null))},prepareTags(t){return!1===Array.isArray(t)?[]:t.map(t=>{return"string"===typeof t?{text:t,value:t}:t})},remove(t){const e=this.get("prev"),s=this.get("next");this.tags.splice(this.index(t),1),this.onInput(),e?(this.selectTag(e.tag),e.ref.focus()):s?this.selectTag(s.tag):(this.selectTag(null),this.$refs.input.focus())},select(){this.focus()},selectTag(t){this.selected=t},tab(t){this.newTag&&this.newTag.length>0&&(t.preventDefault(),this.addString(this.newTag))},type(t){this.newTag=t,this.$refs.autocomplete.search(t)}},validations(){return{tags:{required:!this.required||rn["required"],minLength:!this.min||Object(rn["minLength"])(this.min),maxLength:!this.max||Object(rn["maxLength"])(this.max)}}}},ya=_a,xa=(s("27c1"),Object(u["a"])(ya,va,$a,!1,null,null,null)),wa=xa.exports,Sa={extends:Bn,props:{...Bn.props,autocomplete:{type:String,default:"tel"},type:{type:String,default:"tel"}}},Ca=Sa,Oa=Object(u["a"])(Ca,T,j,!1,null,null,null),Ea=Oa.exports,Ta=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-textarea-input",attrs:{"data-theme":t.theme,"data-over":t.over}},[s("div",{staticClass:"k-textarea-input-wrapper"},[t.buttons&&!t.disabled?s("k-toolbar",{ref:"toolbar",attrs:{buttons:t.buttons,disabled:t.disabled,uploads:t.uploads},on:{command:t.onCommand},nativeOn:{mousedown:function(t){t.preventDefault()}}}):t._e(),s("textarea",t._b({ref:"input",staticClass:"k-textarea-input-native",attrs:{"data-font":t.font,"data-size":t.size},on:{click:t.onClick,focus:t.onFocus,input:t.onInput,keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.metaKey?t.onSubmit(e):null},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.onSubmit(e):null},function(e){return e.metaKey?t.onShortcut(e):null},function(e){return e.ctrlKey?t.onShortcut(e):null}],dragover:t.onOver,dragleave:t.onOut,drop:t.onDrop}},"textarea",{autofocus:t.autofocus,disabled:t.disabled,id:t.id,minlength:t.minlength,name:t.name,placeholder:t.placeholder,required:t.required,spellcheck:t.spellcheck,value:t.value},!1))],1),s("k-toolbar-email-dialog",{ref:"emailDialog",on:{cancel:t.cancel,submit:function(e){return t.insert(e)}}}),s("k-toolbar-link-dialog",{ref:"linkDialog",on:{cancel:t.cancel,submit:function(e){return t.insert(e)}}}),s("k-files-dialog",{ref:"fileDialog",on:{cancel:t.cancel,submit:function(e){return t.insertFile(e)}}}),t.uploads?s("k-upload",{ref:"fileUpload",on:{success:t.insertUpload}}):t._e()],1)},ja=[],Ia={inheritAttrs:!1,props:{autofocus:Boolean,buttons:{type:[Boolean,Array],default:!0},disabled:Boolean,endpoints:Object,font:String,id:[Number,String],name:[Number,String],maxlength:Number,minlength:Number,placeholder:String,preselect:Boolean,required:Boolean,size:String,spellcheck:{type:[Boolean,String],default:"off"},theme:String,uploads:[Boolean,Object,Array],value:String},data(){return{over:!1}},watch:{value(){this.onInvalid(),this.$nextTick(()=>{this.resize()})}},mounted(){this.$nextTick(()=>{this.$library.autosize(this.$refs.input)}),this.onInvalid(),this.$props.autofocus&&this.focus(),this.$props.preselect&&this.select()},methods:{cancel(){this.$refs.input.focus()},dialog(t){if(!this.$refs[t+"Dialog"])throw"Invalid toolbar dialog";this.$refs[t+"Dialog"].open(this.$refs.input,this.selection())},focus(){this.$refs.input.focus()},insert(t){const e=this.$refs.input,s=e.value;setTimeout(()=>{if(e.focus(),document.execCommand("insertText",!1,t),e.value===s){const s=e.value.slice(0,e.selectionStart)+t+e.value.slice(e.selectionEnd);e.value=s,this.$emit("input",s)}}),this.resize()},insertFile(t){t&&t.length>0&&this.insert(t.map(t=>t.dragText).join("\n\n"))},insertUpload(t,e){this.insert(e.map(t=>t.dragText).join("\n\n")),this.$events.$emit("model.update")},onClick(){this.$refs.toolbar&&this.$refs.toolbar.close()},onCommand(t,e){"function"===typeof this[t]?"function"===typeof e?this[t](e(this.$refs.input,this.selection())):this[t](e):window.console.warn(t+" is not a valid command")},onDrop(t){if(this.uploads&&this.$helper.isUploadEvent(t))return this.$refs.fileUpload.drop(t.dataTransfer.files,{url:A.api+"/"+this.endpoints.field+"/upload",multiple:!1});const e=this.$store.state.drag;e&&"text"===e.type&&(this.focus(),this.insert(e.data))},onFocus(t){this.$emit("focus",t)},onInput(t){this.$emit("input",t.target.value)},onInvalid(){this.$emit("invalid",this.$v.$invalid,this.$v)},onOut(){this.$refs.input.blur(),this.over=!1},onOver(t){if(this.uploads&&this.$helper.isUploadEvent(t))return t.dataTransfer.dropEffect="copy",this.focus(),void(this.over=!0);const e=this.$store.state.drag;e&&"text"===e.type&&(t.dataTransfer.dropEffect="copy",this.focus(),this.over=!0)},onShortcut(t){!1!==this.buttons&&"Meta"!==t.key&&"Control"!==t.key&&this.$refs.toolbar&&this.$refs.toolbar.shortcut(t.key,t)},onSubmit(t){return this.$emit("submit",t)},prepend(t){this.insert(t+" "+this.selection())},resize(){this.$library.autosize.update(this.$refs.input)},select(){this.$refs.select()},selectFile(){this.$refs.fileDialog.open({endpoint:this.endpoints.field+"/files",multiple:!1})},selection(){const t=this.$refs.input,e=t.selectionStart,s=t.selectionEnd;return t.value.substring(e,s)},uploadFile(){this.$refs.fileUpload.open({url:A.api+"/"+this.endpoints.field+"/upload",multiple:!1})},wrap(t){this.insert(t+this.selection()+t)}},validations(){return{value:{required:!this.required||rn["required"],minLength:!this.minlength||Object(rn["minLength"])(this.minlength),maxLength:!this.maxlength||Object(rn["maxLength"])(this.maxlength)}}}},La=Ia,Aa=(s("cca8"),Object(u["a"])(La,Ta,ja,!1,null,null,null)),Ba=Aa.exports,qa=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-time-input"},[s("k-select-input",{ref:"hour",attrs:{id:t.id,"aria-label":t.$t("hour"),autofocus:t.autofocus,options:t.hours,required:t.required,disabled:t.disabled,placeholder:"––"},on:{input:t.setHour,invalid:t.onInvalid},model:{value:t.hour,callback:function(e){t.hour=e},expression:"hour"}}),s("span",{staticClass:"k-time-input-separator"},[t._v(":")]),s("k-select-input",{ref:"minute",attrs:{"aria-label":t.$t("minutes"),options:t.minutes,required:t.required,disabled:t.disabled,placeholder:"––"},on:{input:t.setMinute,invalid:t.onInvalid},model:{value:t.minute,callback:function(e){t.minute=e},expression:"minute"}}),12===t.notation?s("k-select-input",{ref:"meridiem",staticClass:"k-time-input-meridiem",attrs:{"aria-label":t.$t("meridiem"),empty:!1,options:[{value:"AM",text:"AM"},{value:"PM",text:"PM"}],required:t.required,disabled:t.disabled},on:{input:t.onInput},model:{value:t.meridiem,callback:function(e){t.meridiem=e},expression:"meridiem"}}):t._e()],1)},Na=[],Pa={inheritAttrs:!1,props:{autofocus:Boolean,disabled:Boolean,id:[String,Number],notation:{type:Number,default:24},required:Boolean,step:{type:Number,default:5},value:{type:String}},data(){const t=this.toObject(this.value);return{time:this.value,hour:t.hour,minute:t.minute,meridiem:t.meridiem}},computed:{hours(){return this.options(24===this.notation?0:1,24===this.notation?23:12)},minutes(){return this.options(0,59,this.step)}},watch:{value(t){this.time=t},time(t){const e=this.toObject(t);this.hour=e.hour,this.minute=e.minute,this.meridiem=e.meridiem}},methods:{focus(){this.$refs.hour.focus()},setHour(t){t&&!this.minute&&(this.minute=0),t||(this.minute=null),this.onInput()},setMinute(t){t&&!this.hour&&(this.hour=0),t||(this.hour=null),this.onInput()},onInput(){if(null===this.hour||null===this.minute)return void this.$emit("input","");const t=this.$helper.pad(this.hour||0),e=this.$helper.pad(this.minute||0),s=String(this.meridiem||"AM").toUpperCase(),i=24===this.notation?"".concat(t,":").concat(e,":00"):"".concat(t,":").concat(e,":00 ").concat(s),n=24===this.notation?"HH:mm:ss":"hh:mm:ss A",a=this.$library.dayjs("2000-01-01 "+i,"YYYY-MM-DD "+n);this.$emit("input",a.format("HH:mm"))},onInvalid(t,e){this.$emit("invalid",t,e)},options(t,e,s=1){let i=[];for(var n=t;n<=e;n+=s)i.push({value:n,text:this.$helper.pad(n)});return i},reset(){this.hour=null,this.minute=null,this.meridiem=null},round(t){return Math.floor(t/this.step)*this.step},toObject(t){const e=this.$library.dayjs("2001-01-01 "+t+":00","YYYY-MM-DD HH:mm:ss");return t&&!1!==e.isValid()?{hour:e.format(24===this.notation?"H":"h"),minute:this.round(e.format("m")),meridiem:e.format("A")}:{hour:null,minute:null,meridiem:null}}}},Da=Pa,Ra=(s("50da"),Object(u["a"])(Da,qa,Na,!1,null,null,null)),Ma=Ra.exports,Fa=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{staticClass:"k-toggle-input",attrs:{"data-disabled":t.disabled}},[s("input",{ref:"input",staticClass:"k-toggle-input-native",attrs:{id:t.id,disabled:t.disabled,type:"checkbox"},domProps:{checked:t.value},on:{change:function(e){return t.onInput(e.target.checked)}}}),s("span",{staticClass:"k-toggle-input-label",domProps:{innerHTML:t._s(t.label)}})])},Ua=[],za={inheritAttrs:!1,props:{autofocus:Boolean,disabled:Boolean,id:[Number,String],text:{type:[Array,String],default(){return[this.$t("off"),this.$t("on")]}},required:Boolean,value:Boolean},computed:{label(){return Array.isArray(this.text)?this.value?this.text[1]:this.text[0]:this.text}},watch:{value(){this.onInvalid()}},mounted(){this.onInvalid(),this.$props.autofocus&&this.focus()},methods:{focus(){this.$refs.input.focus()},onEnter(t){"Enter"===t.key&&this.$refs.input.click()},onInput(t){this.$emit("input",t)},onInvalid(){this.$emit("invalid",this.$v.$invalid,this.$v)},select(){this.$refs.input.focus()}},validations(){return{value:{required:!this.required||rn["required"]}}}},Ha=za,Ka=(s("bb41"),Object(u["a"])(Ha,Fa,Ua,!1,null,null,null)),Va=Ka.exports,Ya={extends:Bn,props:{...Bn.props,autocomplete:{type:String,default:"url"},type:{type:String,default:"url"}}},Wa=Ya,Ja=Object(u["a"])(Wa,I,L,!1,null,null,null),Ga=Ja.exports,Za=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-checkboxes-field",attrs:{counter:t.counterOptions}},"k-field",t.$props,!1),[s("k-input",t._g(t._b({ref:"input",attrs:{id:t._uid,theme:"field"}},"k-input",t.$props,!1),t.$listeners))],1)},Xa=[],Qa={inheritAttrs:!1,props:{...Di.props,...Gi.props,...gn.props,counter:{type:Boolean,default:!0}},computed:{counterOptions(){return null!==this.value&&!this.disabled&&!1!==this.counter&&{count:this.value&&Array.isArray(this.value)?this.value.length:0,min:this.min,max:this.max}}},methods:{focus(){this.$refs.input.focus()}}},tr=Qa,er=Object(u["a"])(tr,Za,Xa,!1,null,null,null),sr=er.exports,ir=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-date-field",attrs:{input:t._uid}},"k-field",t.$props,!1),[s("k-input",t._g(t._b({ref:"input",attrs:{id:t._uid,type:t.inputType,value:t.date,theme:"field"}},"k-input",t.$props,!1),t.listeners),[s("template",{slot:"icon"},[s("k-dropdown",[s("k-button",{staticClass:"k-input-icon-button",attrs:{icon:t.icon,tooltip:t.$t("date.select"),tabindex:"-1"},on:{click:function(e){return t.$refs.dropdown.toggle()}}}),s("k-dropdown-content",{ref:"dropdown",attrs:{align:"right"}},[s("k-calendar",{attrs:{value:t.date},on:{input:function(e){t.onInput(e),t.$refs.dropdown.close()}}})],1)],1)],1)],2)],1)},nr=[],ar={inheritAttrs:!1,props:{...Di.props,...Gi.props,...En.props,icon:{type:String,default:"calendar"}},data(){return{date:this.value,listeners:{...this.$listeners,input:this.onInput}}},computed:{inputType(){return!1===this.time?"date":"datetime"}},watch:{value(t){this.date=t}},methods:{focus(){this.$refs.input.focus()},onInput(t){this.date=t,this.$emit("input",t)}}},rr=ar,or=Object(u["a"])(rr,ir,nr,!1,null,null,null),lr=or.exports,ur=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-email-field",attrs:{input:t._uid}},"k-field",t.$props,!1),[s("k-input",t._g(t._b({ref:"input",attrs:{id:t._uid,theme:"field"}},"k-input",t.$props,!1),t.$listeners),[t.link?s("k-button",{staticClass:"k-input-icon-button",attrs:{slot:"icon",icon:t.icon,link:t.mailto,tooltip:t.$t("open"),tabindex:"-1",target:"_blank"},slot:"icon"}):t._e()],1)],1)},cr=[],dr={inheritAttrs:!1,props:{...Di.props,...Gi.props,...Dn.props,link:{type:Boolean,default:!0},icon:{type:String,default:"email"}},computed:{mailto(){return this.value&&this.value.length>0?"mailto:"+this.value:null}},methods:{focus(){this.$refs.input.focus()}}},hr=dr,pr=Object(u["a"])(hr,ur,cr,!1,null,null,null),mr=pr.exports,fr=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-files-field"},"k-field",t.$props,!1),[t.more&&!t.disabled?s("template",{slot:"options"},[s("k-button-group",{staticClass:"k-field-options"},[t.uploads?[s("k-dropdown",[s("k-button",{ref:"pickerToggle",staticClass:"k-field-options-button",attrs:{icon:t.btnIcon},on:{click:function(e){return t.$refs.picker.toggle()}}},[t._v(" "+t._s(t.btnLabel)+" ")]),s("k-dropdown-content",{ref:"picker",attrs:{align:"right"}},[s("k-dropdown-item",{attrs:{icon:"check"},on:{click:t.open}},[t._v(" "+t._s(t.$t("select"))+" ")]),s("k-dropdown-item",{attrs:{icon:"upload"},on:{click:t.upload}},[t._v(" "+t._s(t.$t("upload"))+" ")])],1)],1)]:[s("k-button",{staticClass:"k-field-options-button",attrs:{icon:"add"},on:{click:t.open}},[t._v(" "+t._s(t.$t("add"))+" ")])]],2)],1):t._e(),t.selected.length?[s("k-draggable",{attrs:{element:t.elements.list,list:t.selected,"data-size":t.size,handle:!0,"data-invalid":t.isInvalid},on:{end:t.onInput}},t._l(t.selected,(function(e,i){return s(t.elements.item,{key:e.id,tag:"component",attrs:{sortable:!t.disabled&&t.selected.length>1,text:e.text,link:t.link?e.link:null,info:e.info,image:e.image,icon:e.icon}},[t.disabled?t._e():s("k-button",{attrs:{slot:"options",tooltip:t.$t("remove"),icon:"remove"},on:{click:function(e){return t.remove(i)}},slot:"options"})],1)})),1)]:s("k-empty",{attrs:{layout:t.layout,"data-invalid":t.isInvalid,icon:"image"},on:{click:t.open}},[t._v(" "+t._s(t.empty||t.$t("field.files.empty"))+" ")]),s("k-files-dialog",{ref:"selector",on:{submit:t.select}}),s("k-upload",{ref:"fileUpload",on:{success:t.selectUpload}})],2)},gr=[],br={inheritAttrs:!1,props:{...Di.props,empty:String,info:String,link:Boolean,layout:String,max:Number,multiple:Boolean,parent:String,search:Boolean,size:String,text:String,value:{type:Array,default(){return[]}}},data(){return{selected:this.value}},computed:{btnIcon(){return!this.multiple&&this.selected.length>0?"refresh":"add"},btnLabel(){return!this.multiple&&this.selected.length>0?this.$t("change"):this.$t("add")},elements(){const t={cards:{list:"k-cards",item:"k-card"},list:{list:"k-list",item:"k-list-item"}};return t[this.layout]?t[this.layout]:t["list"]},isInvalid(){return!(!this.required||0!==this.selected.length)||(!!(this.min&&this.selected.length<this.min)||!!(this.max&&this.selected.length>this.max))},more(){return!this.max||this.max>this.selected.length}},watch:{value(t){this.selected=t}},methods:{focus(){},onInput(){this.$emit("input",this.selected)},remove(t){this.selected.splice(t,1),this.onInput()},removeById(t){this.selected=this.selected.filter(e=>e.id!==t),this.onInput()},select(t){0!==t.length?(this.selected=this.selected.filter(e=>{return t.filter(t=>t.id===e.id).length>0}),t.forEach(t=>{0===this.selected.filter(e=>t.id===e.id).length&&this.selected.push(t)}),this.onInput()):this.selected=[]}}},kr={mixins:[br],props:{uploads:[Boolean,Object,Array]},created(){this.$events.$on("file.delete",this.removeById)},destroyed(){this.$events.$off("file.delete",this.removeById)},methods:{prompt(t){t.stopPropagation(),this.uploads?this.$refs.picker.toggle():this.open()},open(){if(this.disabled)return!1;this.$refs.selector.open({endpoint:this.endpoints.field,max:this.max,multiple:this.multiple,search:this.search,selected:this.selected.map(t=>t.id)})},selectUpload(t,e){!1===this.multiple&&(this.selected=[]),e.forEach(t=>{this.selected.push(t)}),this.onInput(),this.$events.$emit("model.update")},upload(){this.$refs.fileUpload.open({url:A.api+"/"+this.endpoints.field+"/upload",multiple:this.multiple,accept:this.uploads.accept})}}},vr=kr,$r=(s("4a4b"),Object(u["a"])(vr,fr,gr,!1,null,null,null)),_r=$r.exports,yr=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-headline",{staticClass:"k-headline-field",attrs:{"data-numbered":t.numbered,size:"large"}},[t._v(" "+t._s(t.label)+" ")])},xr=[],wr={props:{label:String,numbered:Boolean}},Sr=wr,Cr=(s("19d7"),Object(u["a"])(Sr,yr,xr,!1,null,null,null)),Or=Cr.exports,Er=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-field k-info-field"},[s("k-headline",[t._v(t._s(t.label))]),s("k-box",{attrs:{theme:t.theme}},[s("k-text",{domProps:{innerHTML:t._s(t.text)}})],1)],1)},Tr=[],jr={props:{label:String,text:String,theme:{type:String,default:"info"}}},Ir=jr,Lr=(s("ddfd"),Object(u["a"])(Ir,Er,Tr,!1,null,null,null)),Ar=Lr.exports,Br=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("hr",{staticClass:"k-line-field"})},qr=[],Nr=(s("718c"),{}),Pr=Object(u["a"])(Nr,Br,qr,!1,null,null,null),Dr=Pr.exports,Rr=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-multiselect-field",attrs:{input:t._uid,counter:t.counterOptions},on:{blur:t.blur},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.focus(e))}}},"k-field",t.$props,!1),[s("k-input",t._g(t._b({ref:"input",attrs:{id:t._uid,theme:"field"}},"k-input",t.$props,!1),t.$listeners))],1)},Mr=[],Fr={inheritAttrs:!1,props:{...Di.props,...Gi.props,...Hn.props,counter:{type:Boolean,default:!0},icon:{type:String,default:"angle-down"}},computed:{counterOptions(){return null!==this.value&&!this.disabled&&!1!==this.counter&&{count:this.value&&Array.isArray(this.value)?this.value.length:0,min:this.min,max:this.max}}},mounted(){this.$refs.input.$el.setAttribute("tabindex",0)},methods:{blur(t){this.$refs.input.blur(t)},focus(){this.$refs.input.focus()}}},Ur=Fr,zr=Object(u["a"])(Ur,Rr,Mr,!1,null,null,null),Hr=zr.exports,Kr=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-number-field",attrs:{input:t._uid}},"k-field",t.$props,!1),[s("k-input",t._g(t._b({ref:"input",attrs:{id:t._uid,theme:"field"}},"k-input",t.$props,!1),t.$listeners))],1)},Vr=[],Yr={inheritAttrs:!1,props:{...Di.props,...Gi.props,...Gn.props},methods:{focus(){this.$refs.input.focus()}}},Wr=Yr,Jr=Object(u["a"])(Wr,Kr,Vr,!1,null,null,null),Gr=Jr.exports,Zr=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-pages-field"},"k-field",t.$props,!1),[s("k-button-group",{staticClass:"k-field-options",attrs:{slot:"options"},slot:"options"},[t.more&&!t.disabled?s("k-button",{staticClass:"k-field-options-button",attrs:{icon:t.btnIcon},on:{click:t.open}},[t._v(" "+t._s(t.btnLabel)+" ")]):t._e()],1),t.selected.length?[s("k-draggable",{attrs:{element:t.elements.list,handle:!0,list:t.selected,"data-size":t.size,"data-invalid":t.isInvalid},on:{end:t.onInput}},t._l(t.selected,(function(e,i){return s(t.elements.item,{key:e.id,tag:"component",attrs:{sortable:!t.disabled&&t.selected.length>1,text:e.text,info:e.info,link:t.link?e.link:null,icon:e.icon,image:e.image}},[t.disabled?t._e():s("k-button",{attrs:{slot:"options",icon:"remove"},on:{click:function(e){return t.remove(i)}},slot:"options"})],1)})),1)]:s("k-empty",{attrs:{layout:t.layout,"data-invalid":t.isInvalid,icon:"page"},on:{click:t.open}},[t._v(" "+t._s(t.empty||t.$t("field.pages.empty"))+" ")]),s("k-pages-dialog",{ref:"selector",on:{submit:t.select}})],2)},Xr=[],Qr={mixins:[br],methods:{open(){if(this.disabled)return!1;this.$refs.selector.open({endpoint:this.endpoints.field,max:this.max,multiple:this.multiple,search:this.search,selected:this.selected.map(t=>t.id)})}}},to=Qr,eo=(s("7e85"),Object(u["a"])(to,Zr,Xr,!1,null,null,null)),so=eo.exports,io=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-password-field",attrs:{input:t._uid,counter:t.counterOptions}},"k-field",t.$props,!1),[s("k-input",t._g(t._b({ref:"input",attrs:{id:t._uid,theme:"field"}},"k-input",t.$props,!1),t.$listeners))],1)},no=[],ao={inheritAttrs:!1,props:{...Di.props,...Gi.props,...ta.props,counter:{type:Boolean,default:!0},minlength:{type:Number,default:8},icon:{type:String,default:"key"}},computed:{counterOptions(){return null!==this.value&&!this.disabled&&!1!==this.counter&&{count:this.value?String(this.value).length:0,min:this.minlength,max:this.maxlength}}},methods:{focus(){this.$refs.input.focus()}}},ro=ao,oo=Object(u["a"])(ro,io,no,!1,null,null,null),lo=oo.exports,uo=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-radio-field"},"k-field",t.$props,!1),[s("k-input",t._g(t._b({ref:"input",attrs:{id:t._uid,theme:"field"}},"k-input",t.$props,!1),t.$listeners))],1)},co=[],ho={inheritAttrs:!1,props:{...Di.props,...Gi.props,...ra.props},methods:{focus(){this.$refs.input.focus()}}},po=ho,mo=Object(u["a"])(po,uo,co,!1,null,null,null),fo=mo.exports,go=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-range-field",attrs:{input:t._uid}},"k-field",t.$props,!1),[s("k-input",t._g(t._b({ref:"input",attrs:{id:t._uid,theme:"field"}},"k-input",t.$props,!1),t.$listeners))],1)},bo=[],ko={inheritAttrs:!1,props:{...Di.props,...Gi.props,...ha.props},methods:{focus(){this.$refs.input.focus()}}},vo=ko,$o=Object(u["a"])(vo,go,bo,!1,null,null,null),_o=$o.exports,yo=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-select-field",attrs:{input:t._uid}},"k-field",t.$props,!1),[s("k-input",t._g(t._b({ref:"input",attrs:{id:t._uid,theme:"field"}},"k-input",t.$props,!1),t.$listeners))],1)},xo=[],wo={inheritAttrs:!1,props:{...Di.props,...Gi.props,...ka.props,icon:{type:String,default:"angle-down"}},methods:{focus(){this.$refs.input.focus()}}},So=wo,Co=Object(u["a"])(So,yo,xo,!1,null,null,null),Oo=Co.exports,Eo=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-structure-field",nativeOn:{click:function(t){t.stopPropagation()}}},"k-field",t.$props,!1),[s("template",{slot:"options"},[t.more&&null===t.currentIndex?s("k-button",{ref:"add",attrs:{id:t._uid,icon:"add"},on:{click:t.add}},[t._v(" "+t._s(t.$t("add"))+" ")]):t._e()],1),null!==t.currentIndex?[s("div",{staticClass:"k-structure-backdrop",on:{click:t.escape}}),s("section",{staticClass:"k-structure-form"},[s("k-form",{ref:"form",staticClass:"k-structure-form-fields",attrs:{fields:t.formFields},on:{input:t.onInput,submit:t.submit},model:{value:t.currentModel,callback:function(e){t.currentModel=e},expression:"currentModel"}}),s("footer",{staticClass:"k-structure-form-buttons"},[s("k-button",{staticClass:"k-structure-form-cancel-button",attrs:{icon:"cancel"},on:{click:t.close}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),"new"!==t.currentIndex?s("k-pagination",{attrs:{dropdown:!1,total:t.items.length,limit:1,page:t.currentIndex+1,details:!0,validate:t.beforePaginate},on:{paginate:t.paginate}}):t._e(),s("k-button",{staticClass:"k-structure-form-submit-button",attrs:{icon:"check"},on:{click:t.submit}},[t._v(" "+t._s(t.$t("new"!==t.currentIndex?"confirm":"add"))+" ")])],1)],1)]:0===t.items.length?s("k-empty",{attrs:{"data-invalid":t.isInvalid,icon:"list-bullet"},on:{click:t.add}},[t._v(" "+t._s(t.empty||t.$t("field.structure.empty"))+" ")]):[s("table",{staticClass:"k-structure-table",attrs:{"data-invalid":t.isInvalid,"data-sortable":t.isSortable}},[s("thead",[s("tr",[s("th",{staticClass:"k-structure-table-index"},[t._v(" # ")]),t._l(t.columns,(function(e,i){return s("th",{key:i+"-header",staticClass:"k-structure-table-column",style:"width:"+t.width(e.width),attrs:{"data-align":e.align}},[t._v(" "+t._s(e.label)+" ")])})),s("th")],2)]),s("k-draggable",{attrs:{list:t.items,"data-disabled":t.disabled,options:t.dragOptions,handle:!0,element:"tbody"},on:{end:t.onInput}},t._l(t.paginatedItems,(function(e,i){return s("tr",{key:i,on:{click:function(t){t.stopPropagation()}}},[s("td",{staticClass:"k-structure-table-index"},[t.isSortable?s("k-sort-handle"):t._e(),s("span",{staticClass:"k-structure-table-index-number"},[t._v(t._s(t.indexOf(i)))])],1),t._l(t.columns,(function(n,a){return s("td",{key:a,staticClass:"k-structure-table-column",style:"width:"+t.width(n.width),attrs:{title:n.label,"data-align":n.align},on:{click:function(e){return t.jump(i,a)}}},[!1===t.columnIsEmpty(e[a])?[t.previewExists(n.type)?s("k-"+n.type+"-field-preview",{tag:"component",attrs:{value:e[a],column:n,field:t.fields[a]},on:{input:function(e){return t.update(i,a,e)}}}):[s("p",{staticClass:"k-structure-table-text"},[t._v(" "+t._s(n.before)+" "+t._s(t.displayText(t.fields[a],e[a])||"–")+" "+t._s(n.after)+" ")])]]:t._e()],2)})),s("td",{staticClass:"k-structure-table-options"},[t.duplicate&&t.more&&null===t.currentIndex?[s("k-button",{key:i,ref:"actionsToggle",refInFor:!0,staticClass:"k-structure-table-options-button",attrs:{icon:"dots"},on:{click:function(e){t.$refs[i+"-actions"][0].toggle()}}}),s("k-dropdown-content",{ref:i+"-actions",refInFor:!0,attrs:{align:"right"}},[s("k-dropdown-item",{attrs:{icon:"copy"},on:{click:function(e){return t.duplicateItem(i)}}},[t._v(" "+t._s(t.$t("duplicate"))+" ")]),s("k-dropdown-item",{attrs:{icon:"remove"},on:{click:function(e){return t.confirmRemove(i)}}},[t._v(" "+t._s(t.$t("remove"))+" ")])],1)]:[s("k-button",{staticClass:"k-structure-table-options-button",attrs:{tooltip:t.$t("remove"),icon:"remove"},on:{click:function(e){return t.confirmRemove(i)}}})]],2)],2)})),0)],1),t.limit?s("k-pagination",t._b({on:{paginate:t.paginateItems}},"k-pagination",t.pagination,!1)):t._e(),t.disabled?t._e():s("k-dialog",{ref:"remove",attrs:{"submit-button":t.$t("delete"),theme:"negative"},on:{submit:t.remove}},[s("k-text",[t._v(t._s(t.$t("field.structure.delete.confirm")))])],1)]],2)},To=[];Array.prototype.sortBy=function(t){const e=M["a"].prototype.$helper.sort(),s=t.split(" "),i=s[0],n=s[1]||"asc";return this.sort((t,s)=>{const a=String(t[i]).toLowerCase(),r=String(s[i]).toLowerCase();return"desc"===n?e(r,a):e(a,r)})};var jo={inheritAttrs:!1,props:{...Di.props,columns:Object,duplicate:{type:Boolean,default:!0},empty:String,fields:Object,limit:Number,max:Number,min:Number,sortable:{type:Boolean,default:!0},sortBy:String,value:{type:Array,default(){return[]}}},data(){return{items:this.makeItems(this.value),currentIndex:null,currentModel:null,trash:null,page:1}},computed:{dragOptions(){return{disabled:!this.isSortable,fallbackClass:"k-sortable-row-fallback"}},formFields(){let t={};return Object.keys(this.fields).forEach(e=>{let s=this.fields[e];s.section=this.name,s.endpoints={field:this.endpoints.field+"+"+e,section:this.endpoints.section,model:this.endpoints.model},t[e]=s}),t},more(){return!0!==this.disabled&&!(this.max&&this.items.length>=this.max)},isInvalid(){return!0!==this.disabled&&(!!(this.min&&this.items.length<this.min)||!!(this.max&&this.items.length>this.max))},isSortable(){return!this.sortBy&&(!this.limit&&(!0!==this.disabled&&(!(this.items.length<=1)&&!1!==this.sortable)))},pagination(){let t=0;return this.limit&&(t=(this.page-1)*this.limit),{page:this.page,offset:t,limit:this.limit,total:this.items.length,align:"center",details:!0}},paginatedItems(){return this.limit?this.items.slice(this.pagination.offset,this.pagination.offset+this.limit):this.items}},watch:{value(t){t!=this.items&&(this.items=this.makeItems(t))}},methods:{add(){if(!0===this.disabled)return!1;if(null!==this.currentIndex)return this.escape(),!1;let t={};Object.keys(this.fields).forEach(e=>{const s=this.fields[e];null!==s.default?t[e]=this.$helper.clone(s.default):t[e]=null}),this.currentIndex="new",this.currentModel=t,this.createForm()},close(){this.currentIndex=null,this.currentModel=null,this.$events.$off("keydown.esc",this.escape),this.$events.$off("keydown.cmd.s",this.submit),this.$store.dispatch("content/enable")},columnIsEmpty(t){return void 0===t||null===t||""===t||("object"===typeof t&&0===Object.keys(t).length&&t.constructor===Object||void 0!==t.length&&0===t.length)},confirmRemove(t){this.close(),this.trash=t,this.$refs.remove.open()},duplicateItem(t){this.items.push(this.items[t])},createForm(t){this.$events.$on("keydown.esc",this.escape),this.$events.$on("keydown.cmd.s",this.submit),this.$store.dispatch("content/disable"),this.$nextTick(()=>{this.$refs.form&&this.$refs.form.focus(t)})},displayText(t,e){switch(t.type){case"user":return e.email;case"date":{const s=this.$library.dayjs(e),i=!0===t.time?"YYYY-MM-DD HH:mm":"YYYY-MM-DD";return s.isValid()?s.format(i):""}case"tags":case"multiselect":return e.map(t=>{return t.text}).join(", ");case"checkboxes":return e.map(e=>{let s=e;return t.options.forEach(t=>{t.value===e&&(s=t.text)}),s}).join(", ");case"radio":case"select":{const s=t.options.filter(t=>t.value===e)[0];return s?s.text:null}}return"object"===typeof e&&null!==e?"…":e.toString()},escape(){if("new"===this.currentIndex){let t=Object.values(this.currentModel),e=!0;if(t.forEach(t=>{!1===this.columnIsEmpty(t)&&(e=!1)}),!0===e)return void this.close()}this.submit()},focus(){this.$refs.add&&this.$refs.add.focus&&this.$refs.add.focus()},indexOf(t){return this.limit?(this.page-1)*this.limit+t+1:t+1},isActive(t){return this.currentIndex===t},jump(t,e){this.open(t+this.pagination.offset,e)},makeItems(t){return!1===Array.isArray(t)?[]:this.sort(t)},onInput(){this.$emit("input",this.items)},open(t,e){this.currentIndex=t,this.currentModel=this.$helper.clone(this.items[t]),this.createForm(e)},beforePaginate(){return this.save(this.currentModel)},paginate(t){this.open(t.offset)},paginateItems(t){this.page=t.page},previewExists(t){return void 0!==M["a"].options.components["k-"+t+"-field-preview"]||void 0!==this.$options.components["k-"+t+"-field-preview"]},remove(){if(null===this.trash)return!1;this.items.splice(this.trash,1),this.trash=null,this.$refs.remove.close(),this.onInput(),0===this.paginatedItems.length&&this.page>1&&this.page--,this.items=this.sort(this.items)},sort(t){return this.sortBy?t.sortBy(this.sortBy):t},save(){return null!==this.currentIndex&&void 0!==this.currentIndex?this.validate(this.currentModel).then(()=>{return"new"===this.currentIndex?this.items.push(this.currentModel):this.items[this.currentIndex]=this.currentModel,this.items=this.sort(this.items),this.onInput(),!0}).catch(t=>{throw this.$store.dispatch("notification/error",{message:this.$t("error.form.incomplete"),details:t}),t}):Promise.resolve()},submit(){this.save().then(this.close).catch(()=>{})},validate(t){return this.$api.post(this.endpoints.field+"/validate",t).then(t=>{if(t.length>0)throw t;return!0})},width(t){if(!t)return"auto";const e=t.toString().split("/");if(2!==e.length)return"auto";const s=Number(e[0]),i=Number(e[1]);return parseFloat(100/i*s,2).toFixed(2)+"%"},update(t,e,s){this.items[t][e]=s,this.onInput()}}},Io=jo,Lo=(s("088c"),Object(u["a"])(Io,Eo,To,!1,null,null,null)),Ao=Lo.exports,Bo=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-tags-field",attrs:{input:t._uid,counter:t.counterOptions}},"k-field",t.$props,!1),[s("k-input",t._g(t._b({ref:"input",attrs:{id:t._uid,theme:"field"}},"k-input",t.$props,!1),t.$listeners))],1)},qo=[],No={inheritAttrs:!1,props:{...Di.props,...Gi.props,...wa.props,counter:{type:Boolean,default:!0}},computed:{counterOptions(){return null!==this.value&&!this.disabled&&!1!==this.counter&&{count:this.value&&Array.isArray(this.value)?this.value.length:0,min:this.min,max:this.max}}},methods:{focus(){this.$refs.input.focus()}}},Po=No,Do=Object(u["a"])(Po,Bo,qo,!1,null,null,null),Ro=Do.exports,Mo=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-tel-field",attrs:{input:t._uid}},"k-field",t.$props,!1),[s("k-input",t._g(t._b({ref:"input",attrs:{id:t._uid,theme:"field"}},"k-input",t.$props,!1),t.$listeners))],1)},Fo=[],Uo={inheritAttrs:!1,props:{...Di.props,...Gi.props,...Ea.props,icon:{type:String,default:"phone"}},methods:{focus(){this.$refs.input.focus()}}},zo=Uo,Ho=Object(u["a"])(zo,Mo,Fo,!1,null,null,null),Ko=Ho.exports,Vo=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-text-field",attrs:{input:t._uid,counter:t.counterOptions}},"k-field",t.$props,!1),[t._t("options",null,{slot:"options"}),s("k-input",t._g(t._b({ref:"input",attrs:{id:t._uid,theme:"field"}},"k-input",t.$props,!1),t.$listeners))],2)},Yo=[],Wo={inheritAttrs:!1,props:{...Di.props,...Gi.props,...Bn.props,counter:{type:Boolean,default:!0}},computed:{counterOptions(){return null!==this.value&&!this.disabled&&!1!==this.counter&&{count:this.value?String(this.value).length:0,min:this.minlength,max:this.maxlength}}},methods:{focus(){this.$refs.input.focus()}}},Jo=Wo,Go=(s("b746"),Object(u["a"])(Jo,Vo,Yo,!1,null,null,null)),Zo=Go.exports,Xo=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-textarea-field",attrs:{input:t._uid,counter:t.counterOptions}},"k-field",t.$props,!1),[s("k-input",t._g(t._b({ref:"input",attrs:{id:t._uid,type:"textarea",theme:"field"}},"k-input",t.$props,!1),t.$listeners))],1)},Qo=[],tl={inheritAttrs:!1,props:{...Di.props,...Gi.props,...Ba.props,counter:{type:Boolean,default:!0}},computed:{counterOptions(){return null!==this.value&&!this.disabled&&!1!==this.counter&&{count:this.value?this.value.length:0,min:this.minlength,max:this.maxlength}}},methods:{focus(){this.$refs.input.focus()}}},el=tl,sl=Object(u["a"])(el,Xo,Qo,!1,null,null,null),il=sl.exports,nl=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-time-field",attrs:{input:t._uid}},"k-field",t.$props,!1),[s("k-input",t._g(t._b({ref:"input",attrs:{id:t._uid,theme:"field"}},"k-input",t.$props,!1),t.$listeners))],1)},al=[],rl={inheritAttrs:!1,props:{...Di.props,...Gi.props,...Ma.props,icon:{type:String,default:"clock"}},methods:{focus(){this.$refs.input.focus()}}},ol=rl,ll=Object(u["a"])(ol,nl,al,!1,null,null,null),ul=ll.exports,cl=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-toggle-field",attrs:{input:t._uid}},"k-field",t.$props,!1),[s("k-input",t._g(t._b({ref:"input",attrs:{id:t._uid,theme:"field"}},"k-input",t.$props,!1),t.$listeners))],1)},dl=[],hl={inheritAttrs:!1,props:{...Di.props,...Gi.props,...Va.props},methods:{focus(){this.$refs.input.focus()}}},pl=hl,ml=Object(u["a"])(pl,cl,dl,!1,null,null,null),fl=ml.exports,gl=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-url-field",attrs:{input:t._uid}},"k-field",t.$props,!1),[s("k-input",t._g(t._b({ref:"input",attrs:{id:t._uid,theme:"field"}},"k-input",t.$props,!1),t.$listeners),[t.link?s("k-button",{staticClass:"k-input-icon-button",attrs:{slot:"icon",icon:t.icon,link:t.value,tooltip:t.$t("open"),tabindex:"-1",target:"_blank"},slot:"icon"}):t._e()],1)],1)},bl=[],kl={inheritAttrs:!1,props:{...Di.props,...Gi.props,...Ga.props,link:{type:Boolean,default:!0},icon:{type:String,default:"url"}},methods:{focus(){this.$refs.input.focus()}}},vl=kl,$l=Object(u["a"])(vl,gl,bl,!1,null,null,null),_l=$l.exports,yl=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-users-field"},"k-field",t.$props,!1),[s("k-button-group",{staticClass:"k-field-options",attrs:{slot:"options"},slot:"options"},[t.more&&!t.disabled?s("k-button",{staticClass:"k-field-options-button",attrs:{icon:t.btnIcon},on:{click:t.open}},[t._v(" "+t._s(t.btnLabel)+" ")]):t._e()],1),t.selected.length?[s("k-draggable",{attrs:{element:t.elements.list,list:t.selected,handle:!0,"data-invalid":t.isInvalid},on:{end:t.onInput}},t._l(t.selected,(function(e,i){return s(t.elements.item,{key:e.email,tag:"component",attrs:{sortable:!t.disabled&&t.selected.length>1,text:e.text,info:e.info,link:t.link?t.$api.users.link(e.id):null,image:e.image,icon:e.icon}},[t.disabled?t._e():s("k-button",{attrs:{slot:"options",icon:"remove"},on:{click:function(e){return t.remove(i)}},slot:"options"})],1)})),1)]:s("k-empty",{attrs:{"data-invalid":t.isInvalid,icon:"users"},on:{click:t.open}},[t._v(" "+t._s(t.empty||t.$t("field.users.empty"))+" ")]),s("k-users-dialog",{ref:"selector",on:{submit:t.select}})],2)},xl=[],wl={mixins:[br],methods:{open(){if(this.disabled)return!1;this.$refs.selector.open({endpoint:this.endpoints.field,max:this.max,multiple:this.multiple,search:this.search,selected:this.selected.map(t=>t.id)})}}},Sl=wl,Cl=(s("7f6e"),Object(u["a"])(Sl,yl,xl,!1,null,null,null)),Ol=Cl.exports,El=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"k-toolbar"},[s("div",{staticClass:"k-toolbar-wrapper"},[s("div",{staticClass:"k-toolbar-buttons"},[t._l(t.layout,(function(e,i){return[e.divider?[s("span",{key:i,staticClass:"k-toolbar-divider"})]:e.dropdown?[s("k-dropdown",{key:i},[s("k-button",{key:i,staticClass:"k-toolbar-button",attrs:{icon:e.icon,tooltip:e.label,tabindex:"-1"},on:{click:function(e){t.$refs[i+"-dropdown"][0].toggle()}}}),s("k-dropdown-content",{ref:i+"-dropdown",refInFor:!0},t._l(e.dropdown,(function(e,i){return s("k-dropdown-item",{key:i,attrs:{icon:e.icon},on:{click:function(s){return t.command(e.command,e.args)}}},[t._v(" "+t._s(e.label)+" ")])})),1)],1)]:[s("k-button",{key:i,staticClass:"k-toolbar-button",attrs:{icon:e.icon,tooltip:e.label,tabindex:"-1"},on:{click:function(s){return t.command(e.command,e.args)}}})]]}))],2)])])},Tl=[];const jl=function(t){this.command("insert",(e,s)=>{let i=[];return s.split("\n").forEach((e,s)=>{let n="ol"===t?s+1+".":"-";i.push(n+" "+e)}),i.join("\n")})};var Il={layout:["headlines","bold","italic","|","link","email","file","|","code","ul","ol"],props:{buttons:{type:[Boolean,Array],default:!0},uploads:[Boolean,Object,Array]},data(){let t={},e={},s=[],i=this.commands();return!1===this.buttons?t:(Array.isArray(this.buttons)&&(s=this.buttons),!0!==Array.isArray(this.buttons)&&(s=this.$options.layout),s.forEach((s,n)=>{if("|"===s)t["divider-"+n]={divider:!0};else if(i[s]){let n=i[s];t[s]=n,n.shortcut&&(e[n.shortcut]=s)}}),{layout:t,shortcuts:e})},methods:{command(t,e){"function"===typeof t?t.apply(this):this.$emit("command",t,e)},close(){Object.keys(this.$refs).forEach(t=>{const e=this.$refs[t][0];e.close&&"function"===typeof e.close&&e.close()})},fileCommandSetup(){let t={label:this.$t("toolbar.button.file"),icon:"attachment"};return!1===this.uploads?t.command="selectFile":t.dropdown={select:{label:this.$t("toolbar.button.file.select"),icon:"check",command:"selectFile"},upload:{label:this.$t("toolbar.button.file.upload"),icon:"upload",command:"uploadFile"}},t},commands(){return{headlines:{label:this.$t("toolbar.button.headings"),icon:"title",dropdown:{h1:{label:this.$t("toolbar.button.heading.1"),icon:"title",command:"prepend",args:"#"},h2:{label:this.$t("toolbar.button.heading.2"),icon:"title",command:"prepend",args:"##"},h3:{label:this.$t("toolbar.button.heading.3"),icon:"title",command:"prepend",args:"###"}}},bold:{label:this.$t("toolbar.button.bold"),icon:"bold",command:"wrap",args:"**",shortcut:"b"},italic:{label:this.$t("toolbar.button.italic"),icon:"italic",command:"wrap",args:"*",shortcut:"i"},link:{label:this.$t("toolbar.button.link"),icon:"url",shortcut:"k",command:"dialog",args:"link"},email:{label:this.$t("toolbar.button.email"),icon:"email",shortcut:"e",command:"dialog",args:"email"},file:this.fileCommandSetup(),code:{label:this.$t("toolbar.button.code"),icon:"code",command:"wrap",args:"`"},ul:{label:this.$t("toolbar.button.ul"),icon:"list-bullet",command(){return jl.apply(this,["ul"])}},ol:{label:this.$t("toolbar.button.ol"),icon:"list-numbers",command(){return jl.apply(this,["ol"])}}}},shortcut(t,e){if(this.shortcuts[t]){const s=this.layout[this.shortcuts[t]];if(!s)return!1;e.preventDefault(),this.command(s.command,s.args)}}}},Ll=Il,Al=(s("df0d"),Object(u["a"])(Ll,El,Tl,!1,null,null,null)),Bl=Al.exports,ql=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-dialog",{ref:"dialog",attrs:{"submit-button":t.$t("insert")},on:{close:t.cancel,submit:function(e){return t.$refs.form.submit()}}},[s("k-form",{ref:"form",attrs:{fields:t.fields},on:{submit:t.submit},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)},Nl=[],Pl={data(){return{value:{email:null,text:null},fields:{email:{label:this.$t("email"),type:"email"},text:{label:this.$t("link.text"),type:"text"}}}},computed:{kirbytext(){return this.$store.state.system.info.kirbytext}},methods:{open(t,e){this.value.text=e,this.$refs.dialog.open()},cancel(){this.$emit("cancel")},createKirbytext(){const t=this.value.email||"";return this.value.text&&this.value.text.length>0?"(email: ".concat(t," text: ").concat(this.value.text,")"):"(email: ".concat(t,")")},createMarkdown(){const t=this.value.email||"";return this.value.text&&this.value.text.length>0?"[".concat(this.value.text,"](mailto:").concat(t,")"):"<".concat(t,">")},submit(){this.$emit("submit",this.kirbytext?this.createKirbytext():this.createMarkdown()),this.value={email:null,text:null},this.$refs.dialog.close()}}},Dl=Pl,Rl=Object(u["a"])(Dl,ql,Nl,!1,null,null,null),Ml=Rl.exports,Fl=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-dialog",{ref:"dialog",attrs:{"submit-button":t.$t("insert")},on:{close:t.cancel,submit:function(e){return t.$refs.form.submit()}}},[s("k-form",{ref:"form",attrs:{fields:t.fields},on:{submit:t.submit},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)},Ul=[],zl={data(){return{value:{url:null,text:null},fields:{url:{label:this.$t("link"),type:"text",placeholder:this.$t("url.placeholder"),icon:"url"},text:{label:this.$t("link.text"),type:"text"}}}},computed:{kirbytext(){return this.$store.state.system.info.kirbytext}},methods:{open(t,e){this.value.text=e,this.$refs.dialog.open()},cancel(){this.$emit("cancel")},createKirbytext(){return this.value.text.length>0?"(link: ".concat(this.value.url," text: ").concat(this.value.text,")"):"(link: ".concat(this.value.url,")")},createMarkdown(){return this.value.text.length>0?"[".concat(this.value.text,"](").concat(this.value.url,")"):"<".concat(this.value.url,">")},submit(){this.$emit("submit",this.kirbytext?this.createKirbytext():this.createMarkdown()),this.value={url:null,text:null},this.$refs.dialog.close()}}},Hl=zl,Kl=Object(u["a"])(Hl,Fl,Ul,!1,null,null,null),Vl=Kl.exports,Yl=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.value?s("ul",{staticClass:"k-files-field-preview"},t._l(t.value,(function(e){return s("li",{key:e.url},[s("k-link",{attrs:{title:e.filename,to:e.link},nativeOn:{click:function(t){t.stopPropagation()}}},["image"===e.type?s("k-image",t._b({},"k-image",t.imageOptions(e),!1)):s("k-icon",t._b({},"k-icon",e.icon,!1))],1)],1)})),0):t._e()},Wl=[],Jl=function(t,e="list",s="1/1"){if(!t||"icon"===t)return!1;let i=null,n=null;if(t.list?(i=t[e].url,n=t[e].srcset):(i=t.url,n=t.srcset),!i)return!1;let a={src:i,srcset:n,back:t.back||"black",cover:t.cover};return"cards"===e&&(a.ratio=t.ratio||"3/2",a.sizes=Gl(s)),a};function Gl(t){switch(t){case"1/2":case"2/4":return"(min-width: 30em) and (max-width: 65em) 59em, (min-width: 65em) 44em, 27em";case"1/3":return"(min-width: 30em) and (max-width: 65em) 59em, (min-width: 65em) 29.333em, 27em";case"1/4":return"(min-width: 30em) and (max-width: 65em) 59em, (min-width: 65em) 22em, 27em";case"2/3":return"(min-width: 30em) and (max-width: 65em) 59em, (min-width: 65em) 27em, 27em";case"3/4":return"(min-width: 30em) and (max-width: 65em) 59em, (min-width: 65em) 66em, 27em";default:return"(min-width: 30em) and (max-width: 65em) 59em, (min-width: 65em) 88em, 27em"}}var Zl,Xl,Ql,tu,eu={props:{value:Array,field:Object},methods:{imageOptions(t){const e=Jl(t.image);return e.src?{...e,back:"pattern",cover:!1,...this.field.image||{}}:{src:t.url}}}},su=eu,iu=(s("21dc"),Object(u["a"])(su,Yl,Wl,!1,null,null,null)),nu=iu.exports,au=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticClass:"k-url-field-preview"},[t._v(" "+t._s(t.column.before)+" "),s("k-link",{attrs:{to:t.link,target:"_blank"},nativeOn:{click:function(t){t.stopPropagation()}}},[t._v(" "+t._s(t.value)+" ")]),t._v(" "+t._s(t.column.after)+" ")],1)},ru=[],ou={props:{column:{type:Object,default(){return{}}},value:String},computed:{link(){return this.value}}},lu=ou,uu=(s("977f"),Object(u["a"])(lu,au,ru,!1,null,null,null)),cu=uu.exports,du={extends:cu,computed:{link(){return this.value&&this.value.length>0?"mailto:"+this.value:null}}},hu=du,pu=Object(u["a"])(hu,Zl,Xl,!1,null,null,null),mu=pu.exports,fu=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.value?s("ul",{staticClass:"k-pages-field-preview"},t._l(t.value,(function(e){return s("li",{key:e.id},[s("figure",[s("k-link",{attrs:{title:e.id,to:t.$api.pages.link(e.id)},nativeOn:{click:function(t){t.stopPropagation()}}},[s("k-icon",{staticClass:"k-pages-field-preview-image",attrs:{type:"page",back:"pattern"}}),s("figcaption",[t._v(" "+t._s(e.text)+" ")])],1)],1)])})),0):t._e()},gu=[],bu={props:{value:Array}},ku=bu,vu=(s("d0c1"),Object(u["a"])(ku,fu,gu,!1,null,null,null)),$u=vu.exports,_u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-input",{staticClass:"k-toggle-field-preview",attrs:{text:t.text,type:"toggle"},on:{input:function(e){return t.$emit("input",e)}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})},yu=[],xu={props:{field:Object,value:Boolean,column:Object},computed:{text(){return!1!==this.column.text?this.field.text:null}}},wu=xu,Su=(s("1c4e"),Object(u["a"])(wu,_u,yu,!1,null,null,null)),Cu=Su.exports,Ou=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.value?s("ul",{staticClass:"k-users-field-preview"},t._l(t.value,(function(e){return s("li",{key:e.email},[s("figure",[s("k-link",{attrs:{title:e.email,to:t.$api.users.link(e.id)},nativeOn:{click:function(t){t.stopPropagation()}}},[e.avatar?s("k-image",{staticClass:"k-users-field-preview-avatar",attrs:{src:e.avatar.url,back:"pattern"}}):s("k-icon",{staticClass:"k-users-field-preview-avatar",attrs:{type:"user",back:"pattern"}}),s("figcaption",[t._v(" "+t._s(e.username)+" ")])],1)],1)])})),0):t._e()},Eu=[],Tu={props:{value:Array}},ju=Tu,Iu=(s("3a85"),Object(u["a"])(ju,Ou,Eu,!1,null,null,null)),Lu=Iu.exports,Au=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-bar"},[t.$slots.left?s("div",{staticClass:"k-bar-slot",attrs:{"data-position":"left"}},[t._t("left")],2):t._e(),t.$slots.center?s("div",{staticClass:"k-bar-slot",attrs:{"data-position":"center"}},[t._t("center")],2):t._e(),t.$slots.right?s("div",{staticClass:"k-bar-slot",attrs:{"data-position":"right"}},[t._t("right")],2):t._e()])},Bu=[],qu=(s("6f7b"),{}),Nu=Object(u["a"])(qu,Au,Bu,!1,null,null,null),Pu=Nu.exports,Du=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",t._g({staticClass:"k-box",attrs:{"data-theme":t.theme}},t.$listeners),[t._t("default",[s("k-text",{domProps:{innerHTML:t._s(t.text)}})])],2)},Ru=[],Mu={props:{theme:String,text:String}},Fu=Mu,Uu=(s("7dc7"),Object(u["a"])(Fu,Du,Ru,!1,null,null,null)),zu=Uu.exports,Hu=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("figure",t._g({staticClass:"k-card"},t.$listeners),[t.sortable?s("k-sort-handle"):t._e(),s(t.wrapper,{tag:"component",attrs:{to:t.link,target:t.target}},[t.imageOptions?s("k-image",t._b({staticClass:"k-card-image"},"k-image",t.imageOptions,!1)):s("span",{staticClass:"k-card-icon",style:"padding-bottom:"+t.ratioPadding},[s("k-icon",t._b({},"k-icon",t.icon,!1))],1),s("figcaption",{staticClass:"k-card-content"},[s("span",{staticClass:"k-card-text",attrs:{"data-noinfo":!t.info}},[t._v(t._s(t.text))]),t.info?s("span",{staticClass:"k-card-info",domProps:{innerHTML:t._s(t.info)}}):t._e()])],1),s("nav",{staticClass:"k-card-options"},[t.flag?s("k-button",t._b({staticClass:"k-card-options-button",on:{click:t.flag.click}},"k-button",t.flag,!1)):t._e(),t._t("options",[t.options?s("k-button",{staticClass:"k-card-options-button",attrs:{tooltip:t.$t("options"),icon:"dots"},on:{click:function(e){return e.stopPropagation(),t.$refs.dropdown.toggle()}}}):t._e(),s("k-dropdown-content",{ref:"dropdown",staticClass:"k-card-options-dropdown",attrs:{options:t.options,align:"right"},on:{action:function(e){return t.$emit("action",e)}}})])],2)],1)},Ku=[],Vu={inheritAttrs:!1,props:{column:String,flag:Object,icon:{type:Object,default(){return{type:"file",back:"black"}}},image:[Object,Boolean],info:String,link:[String,Function],options:[Array,Function],sortable:Boolean,target:String,text:String},computed:{wrapper(){return this.link?"k-link":"div"},ratioPadding(){return this.icon&&this.icon.ratio?this.$helper.ratio(this.icon.ratio):this.$helper.ratio("3/2")},imageOptions(){return Jl(this.image,"cards",this.column)}}},Yu=Vu,Wu=(s("c119"),Object(u["a"])(Yu,Hu,Ku,!1,null,null,null)),Ju=Wu.exports,Gu=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-cards"},[t._t("default",t._l(t.cards,(function(e,i){return s("k-card",t._g(t._b({key:i},"k-card",e,!1),t.$listeners))})))],2)},Zu=[],Xu={props:{cards:Array}},Qu=Xu,tc=(s("f56d"),Object(u["a"])(Qu,Gu,Zu,!1,null,null,null)),ec=tc.exports,sc=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-collection",attrs:{"data-layout":t.layout}},[s("k-draggable",{attrs:{list:t.items,options:t.dragOptions,element:t.elements.list,"data-size":t.size,handle:!0},on:{change:function(e){return t.$emit("change",e)},end:t.onEnd}},t._l(t.items,(function(e,i){return s(t.elements.item,t._b({key:i,tag:"component",class:{"k-draggable-item":e.sortable},on:{action:function(s){return t.$emit("action",e,s)},dragstart:function(s){return t.onDragStart(s,e.dragText)}}},"component",e,!1))})),1),t.hasFooter?s("footer",{staticClass:"k-collection-footer"},[t.help?s("k-text",{staticClass:"k-collection-help",attrs:{theme:"help"},domProps:{innerHTML:t._s(t.help)}}):t._e(),s("div",{staticClass:"k-collection-pagination"},[t.hasPagination?s("k-pagination",t._b({on:{paginate:function(e){return t.$emit("paginate",e)}}},"k-pagination",t.paginationOptions,!1)):t._e()],1)],1):t._e()],1)},ic=[],nc={props:{help:String,items:{type:[Array,Object],default(){return[]}},layout:{type:String,default:"list"},size:String,sortable:Boolean,pagination:{type:[Boolean,Object],default(){return!1}}},computed:{hasPagination(){return!1!==this.pagination&&(!0!==this.paginationOptions.hide&&!(this.pagination.total<=this.pagination.limit))},hasFooter(){return!(!this.hasPagination&&!this.help)},dragOptions(){return{sort:this.sortable,disabled:!1===this.sortable,draggable:".k-draggable-item"}},elements(){const t={cards:{list:"k-cards",item:"k-card"},list:{list:"k-list",item:"k-list-item"}};return t[this.layout]?t[this.layout]:t["list"]},paginationOptions(){const t="object"!==typeof this.pagination?{}:this.pagination;return{limit:10,details:!0,keys:!1,total:0,hide:!1,...t}}},watch:{$props(){this.$forceUpdate()}},over:null,methods:{onEnd(){this.over&&this.over.removeAttribute("data-over"),this.$emit("sort",this.items)},onDragStart(t,e){this.$store.dispatch("drag",{type:"text",data:e})}}},ac=nc,rc=(s("8c28"),Object(u["a"])(ac,sc,ic,!1,null,null,null)),oc=rc.exports,lc=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-column",attrs:{"data-width":t.width,"data-sticky":t.sticky}},[s("div",[t._t("default")],2)])},uc=[],cc={props:{width:String,sticky:Boolean}},dc=cc,hc=(s("c9cb"),Object(u["a"])(dc,lc,uc,!1,null,null,null)),pc=hc.exports,mc=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-dropzone",attrs:{"data-dragging":t.dragging,"data-over":t.over},on:{dragenter:t.onEnter,dragleave:t.onLeave,dragover:t.onOver,drop:t.onDrop}},[t._t("default")],2)},fc=[],gc={props:{label:{type:String,default:"Drop to upload"},disabled:{type:Boolean,default:!1}},data(){return{files:[],dragging:!1,over:!1}},methods:{cancel(){this.reset()},reset(){this.dragging=!1,this.over=!1},onDrop(t){return!0===this.disabled?this.reset():!1===this.$helper.isUploadEvent(t)?this.reset():(this.$events.$emit("dropzone.drop"),this.files=t.dataTransfer.files,this.$emit("drop",this.files),void this.reset())},onEnter(t){!1===this.disabled&&this.$helper.isUploadEvent(t)&&(this.dragging=!0)},onLeave(){this.reset()},onOver(t){!1===this.disabled&&this.$helper.isUploadEvent(t)&&(t.dataTransfer.dropEffect="copy",this.over=!0)}}},bc=gc,kc=(s("414d"),Object(u["a"])(bc,mc,fc,!1,null,null,null)),vc=kc.exports,$c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",t._g({staticClass:"k-empty",attrs:{"data-layout":t.layout}},t.$listeners),[t.icon?s("k-icon",{attrs:{type:t.icon}}):t._e(),s("p",[t._t("default")],2)],1)},_c=[],yc={props:{text:String,icon:String,layout:{type:String,default:"list"}}},xc=yc,wc=(s("ba8f"),Object(u["a"])(xc,$c,_c,!1,null,null,null)),Sc=wc.exports,Cc=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-file-preview"},[s("k-view",{staticClass:"k-file-preview-layout"},[s("div",{staticClass:"k-file-preview-image"},[s("k-link",{staticClass:"k-file-preview-image-link",attrs:{to:t.file.url,title:t.$t("open"),target:"_blank"}},[t.file.panelImage&&t.file.panelImage.cards&&t.file.panelImage.cards.url?s("k-image",{attrs:{src:t.file.panelImage.cards.url,srcset:t.file.panelImage.cards.srcset,back:"none"}}):t.file.panelIcon?s("k-icon",{staticClass:"k-file-preview-icon",style:{color:t.file.panelIcon.color},attrs:{type:t.file.panelIcon.type}}):s("span",{staticClass:"k-file-preview-placeholder"})],1)],1),s("div",{staticClass:"k-file-preview-details"},[s("ul",[s("li",[s("h3",[t._v(t._s(t.$t("template")))]),s("p",[t._v(t._s(t.file.template||"—"))])]),s("li",[s("h3",[t._v(t._s(t.$t("mime")))]),s("p",[t._v(t._s(t.file.mime))])]),s("li",[s("h3",[t._v(t._s(t.$t("url")))]),s("p",[s("k-link",{attrs:{to:t.file.url,tabindex:"-1",target:"_blank"}},[t._v(" /"+t._s(t.file.id)+" ")])],1)]),s("li",[s("h3",[t._v(t._s(t.$t("size")))]),s("p",[t._v(t._s(t.file.niceSize))])]),s("li",[s("h3",[t._v(t._s(t.$t("dimensions")))]),t.file.dimensions?s("p",[t._v(" "+t._s(t.file.dimensions.width)+"×"+t._s(t.file.dimensions.height)+" "+t._s(t.$t("pixel"))+" ")]):s("p",[t._v(" — ")])]),s("li",[s("h3",[t._v(t._s(t.$t("orientation")))]),t.file.dimensions?s("p",[t._v(" "+t._s(t.$t("orientation."+t.file.dimensions.orientation))+" ")]):s("p",[t._v(" — ")])])])])])],1)},Oc=[],Ec={props:{file:Object}},Tc=Ec,jc=(s("696b"),Object(u["a"])(Tc,Cc,Oc,!1,null,null,null)),Ic=jc.exports,Lc=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-grid",attrs:{"data-gutter":t.gutter}},[t._t("default")],2)},Ac=[],Bc={props:{gutter:String}},qc=Bc,Nc=(s("5b23"),Object(u["a"])(qc,Lc,Ac,!1,null,null,null)),Pc=Nc.exports,Dc=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"k-header",attrs:{"data-editable":t.editable}},[s("k-headline",{attrs:{tag:"h1",size:"huge"}},[t.editable&&t.$listeners.edit?s("span",{staticClass:"k-headline-editable",on:{click:function(e){return t.$emit("edit")}}},[t._t("default"),s("k-icon",{attrs:{type:"edit"}})],2):t._t("default")],2),t.$slots.left||t.$slots.right?s("k-bar",{staticClass:"k-header-buttons"},[t._t("left",null,{slot:"left"}),t._t("right",null,{slot:"right"})],2):t._e(),t.tabs&&t.tabs.length>1?s("div",{staticClass:"k-header-tabs"},[s("nav",[t._l(t.visibleTabs,(function(e,i){return s("k-button",{key:t.$route.fullPath+"-tab-"+i,staticClass:"k-tab-button",attrs:{link:"#"+e.name,current:t.currentTab&&t.currentTab.name===e.name,icon:e.icon,tooltip:e.label}},[t._v(" "+t._s(e.label)+" ")])})),t.invisibleTabs.length?s("k-button",{staticClass:"k-tab-button k-tabs-dropdown-button",attrs:{icon:"dots"},on:{click:function(e){return e.stopPropagation(),t.$refs.more.toggle()}}},[t._v(" "+t._s(t.$t("more"))+" ")]):t._e()],2),t.invisibleTabs.length?s("k-dropdown-content",{ref:"more",staticClass:"k-tabs-dropdown",attrs:{align:"right"}},t._l(t.invisibleTabs,(function(e,i){return s("k-dropdown-item",{key:"more-"+i,attrs:{link:"#"+e.name,current:t.currentTab&&t.currentTab.name===e.name,icon:e.icon,tooltip:e.label}},[t._v(" "+t._s(e.label)+" ")])})),1):t._e()],1):t._e()],1)},Rc=[],Mc={props:{editable:Boolean,tabs:Array,tab:Object},data(){return{size:null,currentTab:this.tab,visibleTabs:this.tabs,invisibleTabs:[]}},watch:{tab(){this.currentTab=this.tab},tabs(t){this.visibleTabs=t,this.invisibleTabs=[],this.resize(!0)}},created(){window.addEventListener("resize",this.resize)},destroyed(){window.removeEventListener("resize",this.resize)},methods:{resize(t){if(this.tabs&&!(this.tabs.length<=1)){if(this.tabs.length<=3)return this.visibleTabs=this.tabs,void(this.invisibleTabs=[]);if(window.innerWidth>=700){if("large"===this.size&&!t)return;this.visibleTabs=this.tabs,this.invisibleTabs=[],this.size="large"}else{if("small"===this.size&&!t)return;this.visibleTabs=this.tabs.slice(0,2),this.invisibleTabs=this.tabs.slice(2),this.size="small"}}}}},Fc=Mc,Uc=(s("53c5"),Object(u["a"])(Fc,Dc,Rc,!1,null,null,null)),zc=Uc.exports,Hc=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"k-list"},[t._t("default",t._l(t.items,(function(e,i){return s("k-list-item",t._g(t._b({key:i},"k-list-item",e,!1),t.$listeners))})))],2)},Kc=[],Vc={props:{items:Array}},Yc=Vc,Wc=(s("c857"),Object(u["a"])(Yc,Hc,Kc,!1,null,null,null)),Jc=Wc.exports,Gc=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(t.element,t._g({tag:"component",staticClass:"k-list-item"},t.$listeners),[t.sortable?s("k-sort-handle"):t._e(),s("k-link",{staticClass:"k-list-item-content",attrs:{to:t.link,target:t.target}},[t.image?s("span",{staticClass:"k-list-item-image"},[t.imageOptions?s("k-image",t._b({},"k-image",t.imageOptions,!1)):s("k-icon",t._b({},"k-icon",t.icon,!1))],1):t._e(),s("span",{staticClass:"k-list-item-text"},[s("em",[t._v(t._s(t.text))]),t.info?s("small",{domProps:{innerHTML:t._s(t.info)}}):t._e()])]),s("nav",{staticClass:"k-list-item-options"},[t._t("options",[t.flag?s("k-button",t._b({staticClass:"k-list-item-status",on:{click:t.flag.click}},"k-button",t.flag,!1)):t._e(),t.options?s("k-button",{staticClass:"k-list-item-toggle",attrs:{tooltip:t.$t("options"),icon:"dots",alt:"Options"},on:{click:function(e){return e.stopPropagation(),t.$refs.options.toggle()}}}):t._e(),s("k-dropdown-content",{ref:"options",attrs:{options:t.options,align:"right"},on:{action:function(e){return t.$emit("action",e)}}})])],2)],1)},Zc=[],Xc={inheritAttrs:!1,props:{element:{type:String,default:"li"},image:[Object,Boolean],icon:{type:Object,default(){return{type:"file",back:"black"}}},sortable:Boolean,text:String,target:String,info:String,link:[String,Function],flag:Object,options:[Array,Function]},computed:{imageOptions(){return Jl(this.image)}}},Qc=Xc,td=(s("fa6a"),Object(u["a"])(Qc,Gc,Zc,!1,null,null,null)),ed=td.exports,sd=function(){var t=this,e=t.$createElement,s=t._self._c||e;return 0===t.tabs.length?s("k-box",{attrs:{text:"This page has no blueprint setup yet",theme:"info"}}):t.tab?s("k-sections",{attrs:{parent:t.parent,blueprint:t.blueprint,columns:t.tab.columns},on:{submit:function(e){return t.$emit("submit",e)}}}):t._e()},id=[],nd={props:{parent:String,blueprint:String,tabs:Array},data(){return{tab:null}},watch:{$route(){this.open()},blueprint(){this.open()}},mounted(){this.open()},methods:{open(t){if(0===this.tabs.length)return;t||(t=this.$route.hash.replace("#","")),t||(t=this.tabs[0].name);let e=null;this.tabs.forEach(s=>{s.name===t&&(e=s)}),e||(e=this.tabs[0]),this.tab=e,this.$emit("tab",this.tab)}}},ad=nd,rd=Object(u["a"])(ad,sd,id,!1,null,null,null),od=rd.exports,ld=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-view",attrs:{"data-align":t.align}},[t._t("default")],2)},ud=[],cd={props:{align:String}},dd=cd,hd=(s("daa8"),Object(u["a"])(dd,ld,ud,!1,null,null,null)),pd=hd.exports,md=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("draggable",t._g(t._b({staticClass:"k-draggable",attrs:{tag:t.element,list:t.list,move:t.move}},"draggable",t.dragOptions,!1),t.listeners),[t._t("default"),t._t("footer",null,{slot:"footer"})],2)},fd=[],gd=s("310e"),bd=s.n(gd),kd={components:{draggable:bd.a},props:{element:String,handle:[String,Boolean],list:[Array,Object],move:Function,options:Object},data(){return{listeners:{...this.$listeners,start:t=>{this.$store.dispatch("drag",{}),this.$listeners.start&&this.$listeners.start(t)},end:t=>{this.$store.dispatch("drag",null),this.$listeners.end&&this.$listeners.end(t)}}}},computed:{dragOptions(){let t=!1;return t=!0===this.handle?".k-sort-handle":this.handle,{fallbackClass:"k-sortable-fallback",fallbackOnBody:!0,forceFallback:!0,ghostClass:"k-sortable-ghost",handle:t,scroll:document.querySelector(".k-panel-view"),...this.options}}}},vd=kd,$d=Object(u["a"])(vd,md,fd,!1,null,null,null),_d=$d.exports,yd={data(){return{error:null}},errorCaptured(t){return A.debug&&window.console.warn(t),this.error=t,!1},render(t){return this.error?this.$slots.error?this.$slots.error[0]:this.$scopedSlots.error?this.$scopedSlots.error({error:this.error}):t("k-box",{attrs:{theme:"negative"}},this.error.message||this.error):this.$slots.default[0]}},xd=yd,wd=Object(u["a"])(xd,Ql,tu,!1,null,null,null),Sd=wd.exports,Cd=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(t.tag,t._g({tag:"component",staticClass:"k-headline",attrs:{"data-theme":t.theme,"data-size":t.size}},t.$listeners),[t.link?s("k-link",{attrs:{to:t.link}},[t._t("default")],2):t._t("default")],2)},Od=[],Ed={props:{link:String,size:{type:String},tag:{type:String,default:"h2"},theme:{type:String}}},Td=Ed,jd=(s("f8a7"),Object(u["a"])(Td,Cd,Od,!1,null,null,null)),Id=jd.exports,Ld=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{class:"k-icon k-icon-"+t.type,attrs:{"aria-label":t.alt,role:t.alt?"img":null,"aria-hidden":!t.alt,"data-back":t.back,"data-size":t.size}},[t.emoji?s("span",{staticClass:"k-icon-emoji"},[t._v(t._s(t.type))]):s("svg",{style:{color:t.color},attrs:{viewBox:"0 0 16 16"}},[s("use",{attrs:{"xlink:href":"#icon-"+t.type}})])])},Ad=[],Bd={props:{alt:String,color:String,back:String,emoji:Boolean,size:String,type:String}},qd=Bd,Nd=(s("3342"),Object(u["a"])(qd,Ld,Ad,!1,null,null,null)),Pd=Nd.exports,Dd=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",t._g({staticClass:"k-image",attrs:{"data-ratio":t.ratio,"data-back":t.back,"data-cover":t.cover}},t.$listeners),[s("span",{style:"padding-bottom:"+t.ratioPadding},[t.loaded?s("img",{key:t.src,attrs:{alt:t.alt||"",src:t.src,srcset:t.srcset,sizes:t.sizes},on:{dragstart:function(t){t.preventDefault()}}}):t._e(),t.loaded||t.error?t._e():s("k-loader",{attrs:{position:"center",theme:"light"}}),!t.loaded&&t.error?s("k-icon",{staticClass:"k-image-error",attrs:{type:"cancel"}}):t._e()],1)])},Rd=[],Md={props:{alt:String,back:String,cover:Boolean,ratio:String,sizes:String,src:String,srcset:String},data(){return{loaded:{type:Boolean,default:!1},error:{type:Boolean,default:!1}}},computed:{ratioPadding(){return this.$helper.ratio(this.ratio||"1/1")}},created(){let t=new Image;t.onload=()=>{this.loaded=!0,this.$emit("load")},t.onerror=()=>{this.error=!0,this.$emit("error")},t.src=this.src}},Fd=Md,Ud=(s("0d56"),Object(u["a"])(Fd,Dd,Rd,!1,null,null,null)),zd=Ud.exports,Hd=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("progress",{staticClass:"k-progress",attrs:{max:"100"},domProps:{value:t.state}},[t._v(" "+t._s(t.state)+"% ")])},Kd=[],Vd={props:{value:{type:Number,default:0}},data(){return{state:this.value}},methods:{set(t){this.state=t}}},Yd=Vd,Wd=(s("9799"),Object(u["a"])(Yd,Hd,Kd,!1,null,null,null)),Jd=Wd.exports,Gd=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"k-sort-handle",attrs:{"aria-hidden":"true"}},[s("svg",{attrs:{viewBox:"0 0 16 16"}},[s("use",{attrs:{"xlink:href":"#icon-sort"}})])])},Zd=[],Xd=(s("35cb"),{}),Qd=Object(u["a"])(Xd,Gd,Zd,!1,null,null,null),th=Qd.exports,eh=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-text",attrs:{"data-align":t.align,"data-size":t.size,"data-theme":t.theme}},[t._t("default")],2)},sh=[],ih={props:{align:String,size:String,theme:String}},nh=ih,ah=(s("b0d6"),Object(u["a"])(nh,eh,sh,!1,null,null,null)),rh=ah.exports,oh=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(t.component,t._g(t._b({ref:"button",tag:"component"},"component",t.$props,!1),t.$listeners),[t._t("default")],2)},lh=[],uh={inheritAttrs:!1,props:{autofocus:Boolean,current:[String,Boolean],disabled:Boolean,icon:String,id:[String,Number],link:String,responsive:Boolean,rel:String,role:String,target:String,tabindex:String,theme:String,tooltip:String,type:{type:String,default:"button"}},computed:{component(){return!0===this.disabled?"k-button-disabled":this.link?"k-button-link":"k-button-native"}},methods:{focus(){this.$refs.button.focus&&this.$refs.button.focus()},tab(){this.$refs.button.tab&&this.$refs.button.tab()},untab(){this.$refs.button.untab&&this.$refs.button.untab()}}},ch=uh,dh=(s("3787"),Object(u["a"])(ch,oh,lh,!1,null,null,null)),hh=dh.exports,ph=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"k-button",attrs:{id:t.id,"data-disabled":!0,"data-responsive":t.responsive,"data-theme":t.theme,title:t.tooltip}},[t.icon?s("k-icon",{staticClass:"k-button-icon",attrs:{type:t.icon,alt:t.tooltip}}):t._e(),t.$slots.default?s("span",{staticClass:"k-button-text"},[t._t("default")],2):t._e()],1)},mh=[],fh={inheritAttrs:!1,props:{icon:String,id:[String,Number],responsive:Boolean,theme:String,tooltip:String}},gh=fh,bh=(s("16eb"),Object(u["a"])(gh,ph,mh,!1,null,null,null)),kh=bh.exports,vh=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-button-group"},[t._t("default")],2)},$h=[],_h=(s("a567"),{}),yh=Object(u["a"])(_h,vh,$h,!1,null,null,null),xh=yh.exports,wh=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-link",t._g({staticClass:"k-button",attrs:{id:t.id,"aria-current":t.current,autofocus:t.autofocus,"data-theme":t.theme,"data-responsive":t.responsive,rel:t.rel,role:t.role,tabindex:t.tabindex,target:t.target,title:t.tooltip,to:t.link}},t.$listeners),[t.icon?s("k-icon",{staticClass:"k-button-icon",attrs:{type:t.icon,alt:t.tooltip}}):t._e(),t.$slots.default?s("span",{staticClass:"k-button-text"},[t._t("default")],2):t._e()],1)},Sh=[],Ch={inheritAttrs:!1,props:{autofocus:Boolean,current:[String,Boolean],icon:String,id:[String,Number],link:String,rel:String,responsive:Boolean,role:String,target:String,tabindex:String,theme:String,tooltip:String}},Oh=Ch,Eh=Object(u["a"])(Oh,wh,Sh,!1,null,null,null),Th=Eh.exports,jh=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",t._g({staticClass:"k-button",attrs:{id:t.id,"aria-current":t.current,autofocus:t.autofocus,"data-theme":t.theme,"data-responsive":t.responsive,role:t.role,tabindex:t.tabindex,title:t.tooltip,type:t.type}},t.$listeners),[t.icon?s("k-icon",{staticClass:"k-button-icon",attrs:{type:t.icon,alt:t.tooltip}}):t._e(),t.$slots.default?s("span",{staticClass:"k-button-text"},[t._t("default")],2):t._e()],1)},Ih=[],Lh={mounted(){this.$el.addEventListener("keyup",this.onTab,!0),this.$el.addEventListener("blur",this.onUntab,!0)},destroyed(){this.$el.removeEventListener("keyup",this.onTab,!0),this.$el.removeEventListener("blur",this.onUntab,!0)},methods:{focus(){this.$el.focus&&this.$el.focus()},onTab(t){9===t.keyCode&&this.$el.setAttribute("data-tabbed",!0)},onUntab(){this.$el.removeAttribute("data-tabbed")},tab(){this.$el.focus(),this.$el.setAttribute("data-tabbed",!0)},untab(){this.$el.removeAttribute("data-tabbed")}}},Ah={mixins:[Lh],inheritAttrs:!1,props:{autofocus:Boolean,current:[String,Boolean],icon:String,id:[String,Number],responsive:Boolean,role:String,tabindex:String,theme:String,tooltip:String,type:{type:String,default:"button"}}},Bh=Ah,qh=Object(u["a"])(Bh,jh,Ih,!1,null,null,null),Nh=qh.exports,Ph=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"k-dropdown",on:{click:function(t){t.stopPropagation()}}},[t._t("default")],2)},Dh=[],Rh=(s("f95f"),{}),Mh=Object(u["a"])(Rh,Ph,Dh,!1,null,null,null),Fh=Mh.exports,Uh=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.isOpen?s("div",{staticClass:"k-dropdown-content",attrs:{"data-align":t.align}},[t._t("default",[t._l(t.items,(function(e,i){return["-"===e?s("hr",{key:t._uid+"-item-"+i}):s("k-dropdown-item",t._b({key:t._uid+"-item-"+i,ref:t._uid+"-item-"+i,refInFor:!0,on:{click:function(s){return t.$emit("action",e.click)}}},"k-dropdown-item",e,!1),[t._v(" "+t._s(e.text)+" ")])]}))])],2):t._e()},zh=[];let Hh=null;var Kh={props:{options:[Array,Function],align:String},data(){return{items:[],current:-1,isOpen:!1}},methods:{fetchOptions(t){if(!this.options)return t(this.items);"string"===typeof this.options?fetch(this.options).then(t=>t.json()).then(e=>{return t(e)}):"function"===typeof this.options?this.options(t):Array.isArray(this.options)&&t(this.options)},open(){this.reset(),Hh&&Hh!==this&&Hh.close(),this.fetchOptions(t=>{this.$events.$on("keydown",this.navigate),this.$events.$on("click",this.close),this.items=t,this.isOpen=!0,this.$emit("open"),Hh=this})},reset(){this.current=-1,this.$events.$off("keydown",this.navigate),this.$events.$off("click",this.close)},close(){this.reset(),this.isOpen=Hh=!1,this.$emit("close")},toggle(){this.isOpen?this.close():this.open()},focus(t=0){this.$children[t]&&this.$children[t].focus&&(this.current=t,this.$children[t].focus())},navigate(t){switch(t.code){case"Escape":case"ArrowLeft":this.close(),this.$emit("leave",t.code);break;case"ArrowUp":t.preventDefault();while(1){if(this.current--,this.current<0){this.close(),this.$emit("leave",t.code);break}if(this.$children[this.current]&&!1===this.$children[this.current].disabled){this.focus(this.current);break}}break;case"ArrowDown":t.preventDefault();while(1){if(this.current++,this.current>this.$children.length-1){const t=this.$children.filter(t=>!1===t.disabled);this.current=this.$children.indexOf(t[t.length-1]);break}if(this.$children[this.current]&&!1===this.$children[this.current].disabled){this.focus(this.current);break}}break;case"Tab":while(1){if(this.current++,this.current>this.$children.length-1){this.close(),this.$emit("leave",t.code);break}if(this.$children[this.current]&&!1===this.$children[this.current].disabled)break}break}}}},Vh=Kh,Yh=(s("98a1"),Object(u["a"])(Vh,Uh,zh,!1,null,null,null)),Wh=Yh.exports,Jh=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-button",t._g(t._b({ref:"button",staticClass:"k-dropdown-item"},"k-button",t.$props,!1),t.listeners),[t._t("default")],2)},Gh=[],Zh={inheritAttrs:!1,props:{disabled:Boolean,icon:String,image:[String,Object],link:String,target:String,theme:String,upload:String,current:[String,Boolean]},data(){return{listeners:{...this.$listeners,click:t=>{this.$parent.close(),this.$emit("click",t)}}}},methods:{focus(){this.$refs.button.focus()},tab(){this.$refs.button.tab()}}},Xh=Zh,Qh=(s("580a"),Object(u["a"])(Xh,Jh,Gh,!1,null,null,null)),tp=Qh.exports,ep=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.to&&!t.disabled?s("a",t._g({ref:"link",staticClass:"k-link",attrs:{href:t.href,rel:t.relAttr,tabindex:t.tabindex,target:t.target,title:t.title}},t.listeners),[t._t("default")],2):s("span",{staticClass:"k-link",attrs:{title:t.title,"data-disabled":""}},[t._t("default")],2)},sp=[],ip={mixins:[Lh],props:{disabled:Boolean,rel:String,tabindex:[String,Number],target:String,title:String,to:[String,Function]},data(){return{relAttr:"_blank"===this.target?"noreferrer noopener":this.rel,listeners:{...this.$listeners,click:this.onClick}}},computed:{href(){return"function"===typeof this.to?"":void 0===this.$route||"/"!==this.to[0]||this.target?this.to:(this.$router.options.url||"")+this.to}},methods:{isRoutable(t){return void 0!==this.$route&&(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&(!t.defaultPrevented&&((void 0===t.button||0===t.button)&&!this.target)))},onClick(t){if(!0===this.disabled)return t.preventDefault(),!1;"function"===typeof this.to&&(t.preventDefault(),this.to()),this.isRoutable(t)&&(t.preventDefault(),this.$router.push(this.to)),this.$emit("click",t)}}},np=ip,ap=(s("cc79"),Object(u["a"])(np,ep,sp,!1,null,null,null)),rp=ap.exports,op=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.languages.length?s("k-dropdown",[s("k-button",{attrs:{responsive:!0,icon:"globe"},on:{click:function(e){return t.$refs.languages.toggle()}}},[t._v(" "+t._s(t.language.name)+" ")]),t.languages?s("k-dropdown-content",{ref:"languages"},[s("k-dropdown-item",{on:{click:function(e){return t.change(t.defaultLanguage)}}},[t._v(" "+t._s(t.defaultLanguage.name)+" ")]),s("hr"),t._l(t.languages,(function(e){return s("k-dropdown-item",{key:e.code,on:{click:function(s){return t.change(e)}}},[t._v(" "+t._s(e.name)+" ")])}))],2):t._e()],1):t._e()},lp=[],up={computed:{defaultLanguage(){return this.$store.state.languages.default},language(){return this.$store.state.languages.current},languages(){return this.$store.state.languages.all.filter(t=>!1===t.default)}},methods:{change(t){this.$store.dispatch("languages/current",t),this.$emit("change",t)}}},cp=up,dp=Object(u["a"])(cp,op,lp,!1,null,null,null),hp=dp.exports,pp=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.show?s("nav",{staticClass:"k-pagination",attrs:{"data-align":t.align}},[t.show?s("k-button",{attrs:{disabled:!t.hasPrev,tooltip:t.prevLabel,icon:"angle-left"},on:{click:t.prev}}):t._e(),t.details?[t.dropdown?[s("k-dropdown",[s("k-button",{staticClass:"k-pagination-details",attrs:{disabled:!t.hasPages},on:{click:function(e){return t.$refs.dropdown.toggle()}}},[t.total>1?[t._v(" "+t._s(t.detailsText)+" ")]:t._e(),t._v(t._s(t.total)+" ")],2),s("k-dropdown-content",{ref:"dropdown",staticClass:"k-pagination-selector",on:{open:function(e){t.$nextTick((function(){return t.$refs.page.focus()}))}}},[s("div",{staticClass:"k-pagination-settings"},[s("label",{attrs:{for:"k-pagination-page"}},[s("span",[t._v(t._s(t.pageLabel)+":")]),s("select",{ref:"page",attrs:{id:"k-pagination-page"}},t._l(t.pages,(function(e){return s("option",{key:e,domProps:{selected:t.page===e,value:e}},[t._v(" "+t._s(e)+" ")])})),0)]),s("k-button",{attrs:{icon:"check"},on:{click:function(e){return t.goTo(t.$refs.page.value)}}})],1)])],1)]:[s("span",{staticClass:"k-pagination-details"},[t.total>1?[t._v(t._s(t.detailsText))]:t._e(),t._v(t._s(t.total)+" ")],2)]]:t._e(),t.show?s("k-button",{attrs:{disabled:!t.hasNext,tooltip:t.nextLabel,icon:"angle-right"},on:{click:t.next}}):t._e()],2):t._e()},mp=[],fp={props:{align:{type:String,default:"left"},details:{type:Boolean,default:!1},dropdown:{type:Boolean,default:!0},validate:{type:Function,default(){return Promise.resolve()}},page:{type:Number,default:1},total:{type:Number,default:0},limit:{type:Number,default:10},keys:{type:Boolean,default:!1},pageLabel:{type:String,default(){return this.$t("pagination.page")}},prevLabel:{type:String,default(){return this.$t("prev")}},nextLabel:{type:String,default(){return this.$t("next")}}},data(){return{currentPage:this.page}},computed:{show(){return this.pages>1},start(){return(this.currentPage-1)*this.limit+1},end(){let t=this.start-1+this.limit;return t>this.total?this.total:t},detailsText(){return 1===this.limit?this.start+" / ":this.start+"-"+this.end+" / "},pages(){return Math.ceil(this.total/this.limit)},hasPrev(){return this.start>1},hasNext(){return this.end<this.total},hasPages(){return this.total>this.limit},offset(){return this.start-1}},watch:{page(t){this.currentPage=parseInt(t)}},created(){!0===this.keys&&window.addEventListener("keydown",this.navigate,!1)},destroyed(){window.removeEventListener("keydown",this.navigate,!1)},methods:{goTo(t){this.validate(t).then(()=>{t<1&&(t=1),t>this.pages&&(t=this.pages),this.currentPage=t,this.$refs.dropdown&&this.$refs.dropdown.close(),this.$emit("paginate",{page:this.currentPage,start:this.start,end:this.end,limit:this.limit,offset:this.offset})}).catch(()=>{})},prev(){this.goTo(this.currentPage-1)},next(){this.goTo(this.currentPage+1)},navigate(t){switch(t.code){case"ArrowLeft":this.prev();break;case"ArrowRight":this.next();break}}}},gp=fp,bp=(s("a66d"),Object(u["a"])(gp,pp,mp,!1,null,null,null)),kp=bp.exports,vp=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-button-group",{staticClass:"k-prev-next"},[s("k-button",t._b({attrs:{icon:"angle-left"}},"k-button",t.prev,!1)),s("k-button",t._b({attrs:{icon:"angle-right"}},"k-button",t.next,!1))],1)},$p=[],_p={props:{prev:{type:Object,default(){return{disabled:!0,link:"#"}}},next:{type:Object,default(){return{disabled:!0,link:"#"}}}}},yp=_p,xp=(s("7a7d"),Object(u["a"])(yp,vp,$p,!1,null,null,null)),wp=xp.exports,Sp=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-search",attrs:{role:"search"},on:{click:t.close}},[s("div",{staticClass:"k-search-box",on:{click:function(t){t.stopPropagation()}}},[s("div",{staticClass:"k-search-input"},[s("k-dropdown",{staticClass:"k-search-types"},[s("k-button",{attrs:{icon:t.type.icon},on:{click:function(e){return t.$refs.types.toggle()}}},[t._v(" "+t._s(t.type.label)+": ")]),s("k-dropdown-content",{ref:"types"},t._l(t.types,(function(e,i){return s("k-dropdown-item",{key:i,attrs:{icon:e.icon},on:{click:function(e){t.currentType=i}}},[t._v(" "+t._s(e.label)+" ")])})),1)],1),s("input",{directives:[{name:"model",rawName:"v-model",value:t.q,expression:"q"}],ref:"input",attrs:{placeholder:t.$t("search")+" …","aria-label":"$t('search')",type:"text"},domProps:{value:t.q},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:(e.preventDefault(),t.down(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:(e.preventDefault(),t.up(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"tab",9,e.key,"Tab")?null:(e.preventDefault(),t.tab(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.enter(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.close(e)}],input:function(e){e.target.composing||(t.q=e.target.value)}}}),s("k-button",{staticClass:"k-search-close",attrs:{tooltip:t.$t("close"),icon:"cancel"},on:{click:t.close}})],1),s("ul",t._l(t.items,(function(e,i){return s("li",{key:e.id,attrs:{"data-selected":t.selected===i},on:{mouseover:function(e){t.selected=i}}},[s("k-link",{attrs:{to:e.link},on:{click:function(e){return t.click(i)}}},[s("strong",[t._v(t._s(e.title))]),s("small",[t._v(t._s(e.info))])])],1)})),0)])])},Cp=[],Op={data(){return{items:[],q:null,selected:-1,currentType:"users"===this.$store.state.view?"users":"pages"}},computed:{type(){return this.types[this.currentType]||this.types["pages"]},types(){return{pages:{label:this.$t("pages"),icon:"page",endpoint:"site/search"},files:{label:this.$t("files"),icon:"image",endpoint:"files/search"},users:{label:this.$t("users"),icon:"users",endpoint:"users/search"}}}},watch:{q:bt((function(t){this.search(t)}),200),currentType(){this.search(this.q)}},mounted(){this.$nextTick(()=>{this.$refs.input.focus()})},methods:{open(t){t.preventDefault(),this.$store.dispatch("search",!0)},click(t){this.selected=t,this.tab()},close(){this.$store.dispatch("search",!1)},down(){this.selected<this.items.length-1&&this.selected++},enter(){let t=this.items[this.selected]||this.items[0];t&&this.navigate(t)},map_files(t){return{id:t.id,title:t.filename,link:t.link,info:t.id}},map_pages(t){return{id:t.id,title:t.title,link:this.$api.pages.link(t.id),info:t.id}},map_users(t){return{id:t.id,title:t.name,link:this.$api.users.link(t.id),info:t.email}},navigate(t){this.$router.push(t.link),this.close()},search(t){this.$api.get(this.type.endpoint,{q:t,limit:A.search.limit}).then(t=>{this.items=t.data.map(this["map_"+this.currentType]),this.selected=-1}).catch(()=>{this.items=[],this.selected=-1})},tab(){const t=this.items[this.selected];t&&this.navigate(t)},up(){this.selected>=0&&this.selected--}}},Ep=Op,Tp=(s("4cb2"),Object(u["a"])(Ep,Sp,Cp,!1,null,null,null)),jp=Tp.exports,Ip=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{ref:"button",staticClass:"k-tag",attrs:{"data-size":t.size,tabindex:"0"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:(e.preventDefault(),t.remove(e))}}},[s("span",{staticClass:"k-tag-text"},[t._t("default")],2),t.removable?s("span",{staticClass:"k-tag-toggle",on:{click:t.remove}},[t._v("×")]):t._e()])},Lp=[],Ap={props:{removable:Boolean,size:String},methods:{remove(){this.removable&&this.$emit("remove")},focus(){this.$refs.button.focus()}}},Bp=Ap,qp=(s("021f"),Object(u["a"])(Bp,Ip,Lp,!1,null,null,null)),Np=qp.exports,Pp=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.user&&t.view?s("div",{staticClass:"k-topbar"},[s("k-view",[s("div",{staticClass:"k-topbar-wrapper"},[s("k-dropdown",{staticClass:"k-topbar-menu"},[s("k-button",{staticClass:"k-topbar-button k-topbar-menu-button",attrs:{tooltip:t.$t("menu"),icon:"bars"},on:{click:function(e){return t.$refs.menu.toggle()}}},[s("k-icon",{attrs:{type:"angle-down"}})],1),s("k-dropdown-content",{ref:"menu",staticClass:"k-topbar-menu"},[s("ul",[t._l(t.views,(function(e,i){return e.menu?s("li",{key:"menu-item-"+i,attrs:{"aria-current":t.$store.state.view===i}},[s("k-dropdown-item",{attrs:{disabled:!1===t.$permissions.access[i],icon:e.icon,link:e.link}},[t._v(" "+t._s(t.menuTitle(e,i))+" ")])],1):t._e()})),s("li",[s("hr")]),s("li",{attrs:{"aria-current":"account"===t.$route.meta.view}},[s("k-dropdown-item",{attrs:{icon:"account",link:"/account"}},[t._v(" "+t._s(t.$t("view.account"))+" ")])],1),s("li",[s("hr")]),s("li",[s("k-dropdown-item",{attrs:{icon:"logout",link:"/logout"}},[t._v(" "+t._s(t.$t("logout"))+" ")])],1)],2)])],1),t.view?s("k-link",{staticClass:"k-topbar-button k-topbar-view-button",attrs:{to:t.view.link}},[s("k-icon",{attrs:{type:t.view.icon}}),t._v(" "+t._s(t.breadcrumbTitle)+" ")],1):t._e(),t.$store.state.breadcrumb.length>1?s("k-dropdown",{staticClass:"k-topbar-breadcrumb-menu"},[s("k-button",{staticClass:"k-topbar-button",on:{click:function(e){return t.$refs.crumb.toggle()}}},[t._v(" … "),s("k-icon",{attrs:{type:"angle-down"}})],1),s("k-dropdown-content",{ref:"crumb"},[s("k-dropdown-item",{attrs:{icon:t.view.icon,link:t.view.link}},[t._v(" "+t._s(t.$t("view."+t.$store.state.view,t.view.label))+" ")]),t._l(t.$store.state.breadcrumb,(function(e,i){return s("k-dropdown-item",{key:"crumb-"+i+"-dropdown",attrs:{icon:t.view.icon,link:e.link}},[t._v(" "+t._s(e.label)+" ")])}))],2)],1):t._e(),s("nav",{staticClass:"k-topbar-crumbs"},t._l(t.$store.state.breadcrumb,(function(e,i){return s("k-link",{key:"crumb-"+i,attrs:{to:e.link}},[t._v(" "+t._s(e.label)+" ")])})),1),s("div",{staticClass:"k-topbar-signals"},[s("span",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.isLoading,expression:"$store.state.isLoading"}],staticClass:"k-topbar-loader"},[s("svg",{attrs:{viewBox:"0 0 16 18"}},[s("path",{attrs:{fill:"white",d:"M8,0 L16,4.50265232 L16,13.5112142 L8,18.0138665 L0,13.5112142 L0,4.50265232 L8,0 Z M2.10648757,5.69852516 L2.10648757,12.3153414 L8,15.632396 L13.8935124,12.3153414 L13.8935124,5.69852516 L8,2.38147048 L2.10648757,5.69852516 Z"}})])]),t.notification?[s("k-button",{staticClass:"k-topbar-notification k-topbar-signals-button",attrs:{theme:"positive"},on:{click:function(e){return t.$store.dispatch("notification/close")}}},[t._v(" "+t._s(t.notification.message)+" ")])]:t.unregistered?[s("div",{staticClass:"k-registration"},[s("p",[t._v(t._s(t.$t("license.unregistered")))]),s("k-button",{staticClass:"k-topbar-signals-button",attrs:{responsive:!0,tooltip:t.$t("license.unregistered"),icon:"key"},on:{click:function(e){return t.$emit("register")}}},[t._v(" "+t._s(t.$t("license.register"))+" ")]),s("k-button",{staticClass:"k-topbar-signals-button",attrs:{responsive:!0,link:"https://getkirby.com/buy",target:"_blank",icon:"cart"}},[t._v(" "+t._s(t.$t("license.buy"))+" ")])],1)]:t._e(),[s("k-form-indicator")],s("k-button",{staticClass:"k-topbar-signals-button",attrs:{tooltip:t.$t("search"),icon:"search"},on:{click:function(e){return t.$store.dispatch("search",!0)}}})],2)],1)])],1):t._e()},Dp=[],Rp={site:{link:"/site",icon:"page",menu:!0},users:{link:"/users",icon:"users",menu:!0},settings:{link:"/settings",icon:"settings",menu:!0},account:{link:"/account",icon:"users",menu:!1},...window.panel.plugins.views},Mp={computed:{breadcrumbTitle(){let t=this.$t("view.".concat(this.$store.state.view),this.view.label);return"site"===this.$store.state.view&&this.$store.state.system.info.title||t},view(){return Rp[this.$store.state.view]},views(){return Rp},user(){return this.$store.state.user.current},notification(){return this.$store.state.notification.type&&"error"!==this.$store.state.notification.type?this.$store.state.notification:null},unregistered(){return!this.$store.state.system.info.license}},methods:{menuTitle(t,e){let s=this.$t("view."+e,t.label);return"site"===e&&this.$store.state.system.info.site||s}}},Fp=Mp,Up=(s("1e3b"),Object(u["a"])(Fp,Pp,Dp,!1,null,null,null)),zp=Up.exports,Hp=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-grid",{staticClass:"k-sections",attrs:{gutter:"large"}},t._l(t.columns,(function(e,i){return s("k-column",{key:t.parent+"-column-"+i,attrs:{width:e.width,sticky:e.sticky}},[t._l(e.sections,(function(n,a){return t.meetsCondition(n)?[t.exists(n.type)?s("k-"+n.type+"-section",t._b({key:t.parent+"-column-"+i+"-section-"+a+"-"+t.blueprint,tag:"component",class:"k-section k-section-name-"+n.name,attrs:{name:n.name,parent:t.parent,blueprint:t.blueprint,column:e.width},on:{submit:function(e){return t.$emit("submit",e)}}},"component",n,!1)):[s("k-box",{key:t.parent+"-column-"+i+"-section-"+a,attrs:{text:t.$t("error.section.type.invalid",{type:n.type}),theme:"negative"}})]]:t._e()}))],2)})),1)},Kp=[],Vp={props:{parent:String,blueprint:String,columns:[Array,Object]},computed:{content(){return this.$store.getters["content/values"]()}},methods:{exists(t){return M["a"].options.components["k-"+t+"-section"]},meetsCondition(t){if(!t.when)return!0;let e=!0;return Object.keys(t.when).forEach(s=>{const i=this.content[s.toLowerCase()],n=t.when[s];i!==n&&(e=!1)}),e}}},Yp=Vp,Wp=(s("6bcd"),Object(u["a"])(Yp,Hp,Kp,!1,null,null,null)),Jp=Wp.exports,Gp=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"k-info-section"},[s("k-headline",{staticClass:"k-info-section-headline"},[t._v(" "+t._s(t.headline)+" ")]),s("k-box",{attrs:{theme:t.theme}},[s("k-text",{domProps:{innerHTML:t._s(t.text)}})],1)],1)},Zp=[],Xp={props:{blueprint:String,help:String,name:String,parent:String},methods:{load(){return this.$api.get(this.parent+"/sections/"+this.name)}}},Qp={mixins:[Xp],data(){return{headline:null,issue:null,text:null,theme:null}},created(){this.load().then(t=>{this.headline=t.options.headline,this.text=t.options.text,this.theme=t.options.theme||"info"}).catch(t=>{this.issue=t})}},tm=Qp,em=(s("4333"),Object(u["a"])(tm,Gp,Zp,!1,null,null,null)),sm=em.exports,im=function(){var t=this,e=t.$createElement,s=t._self._c||e;return!1===t.isLoading?s("section",{staticClass:"k-pages-section"},[s("header",{staticClass:"k-section-header"},[s("k-headline",{attrs:{link:t.options.link}},[t._v(" "+t._s(t.headline)+" "),t.options.min?s("abbr",{attrs:{title:t.$t("section.required")}},[t._v("*")]):t._e()]),t.add?s("k-button-group",[s("k-button",{attrs:{icon:"add"},on:{click:t.create}},[t._v(" "+t._s(t.$t("add"))+" ")])],1):t._e()],1),t.error?[s("k-box",{attrs:{theme:"negative"}},[s("k-text",{attrs:{size:"small"}},[s("strong",[t._v(" "+t._s(t.$t("error.section.notLoaded",{name:t.name}))+": ")]),t._v(" "+t._s(t.error)+" ")])],1)]:[t.data.length?s("k-collection",{attrs:{layout:t.options.layout,help:t.help,items:t.data,pagination:t.pagination,sortable:t.options.sortable,size:t.options.size,"data-invalid":t.isInvalid},on:{change:t.sort,paginate:t.paginate,action:t.action}}):[s("k-empty",{attrs:{layout:t.options.layout,"data-invalid":t.isInvalid,icon:"page"},on:{click:t.create}},[t._v(" "+t._s(t.options.empty||t.$t("pages.empty"))+" ")]),s("footer",{staticClass:"k-collection-footer"},[t.help?s("k-text",{staticClass:"k-collection-help",attrs:{theme:"help"},domProps:{innerHTML:t._s(t.help)}}):t._e()],1)],s("k-page-create-dialog",{ref:"create"}),s("k-page-duplicate-dialog",{ref:"duplicate"}),s("k-page-rename-dialog",{ref:"rename",on:{success:t.update}}),s("k-page-url-dialog",{ref:"url",on:{success:t.update}}),s("k-page-status-dialog",{ref:"status",on:{success:t.update}}),s("k-page-template-dialog",{ref:"template",on:{success:t.update}}),s("k-page-remove-dialog",{ref:"remove",on:{success:t.update}})]],2):t._e()},nm=[],am={inheritAttrs:!1,props:{blueprint:String,column:String,parent:String,name:String},data(){return{data:[],error:null,isLoading:!1,options:{empty:null,headline:null,help:null,layout:"list",link:null,max:null,min:null,size:null,sortable:null},pagination:{page:null}}},computed:{headline(){return this.options.headline||" "},help(){return this.options.help},isInvalid(){return!!(this.options.min&&this.data.length<this.options.min)||!!(this.options.max&&this.data.length>this.options.max)},language(){return this.$store.state.languages.current},paginationId(){return"kirby$pagination$"+this.parent+"/"+this.name}},watch:{language(){this.reload()}},methods:{items(t){return t},load(t){t||(this.isLoading=!0),null===this.pagination.page&&(this.pagination.page=localStorage.getItem(this.paginationId)||1),this.$api.get(this.parent+"/sections/"+this.name,{page:this.pagination.page}).then(t=>{this.isLoading=!1,this.options=t.options,this.pagination=t.pagination,this.data=this.items(t.data)}).catch(t=>{this.isLoading=!1,this.error=t.message})},paginate(t){localStorage.setItem(this.paginationId,t.page),this.pagination=t,this.reload()},reload(){this.load(!0)}}},rm={mixins:[am],computed:{add(){return this.options.add&&this.$permissions.pages.create}},created(){this.load(),this.$events.$on("page.changeStatus",this.reload)},destroyed(){this.$events.$off("page.changeStatus",this.reload)},methods:{create(){this.add&&this.$refs.create.open(this.options.link||this.parent,this.parent+"/children/blueprints",this.name)},action(t,e){switch(e){case"duplicate":this.$refs.duplicate.open(t.id);break;case"preview":{let e=window.open("","_blank");e.document.write="...",this.$api.pages.preview(t.id).then(t=>{e.location.href=t}).catch(t=>{this.$store.dispatch("notification/error",t)});break}case"rename":this.$refs.rename.open(t.id);break;case"url":this.$refs.url.open(t.id);break;case"status":this.$refs.status.open(t.id);break;case"template":this.$refs.template.open(t.id);break;case"remove":if(this.data.length<=this.options.min){const t=this.options.min>1?"plural":"singular";this.$store.dispatch("notification/error",{message:this.$t("error.section.pages.min."+t,{section:this.options.headline||this.name,min:this.options.min})});break}this.$refs.remove.open(t.id);break;default:throw new Error("Invalid action")}},items(t){return t.map(t=>{const e=!1!==t.permissions.changeStatus;return t.flag={class:"k-status-flag k-status-flag-"+t.status,tooltip:e?this.$t("page.status"):"".concat(this.$t("page.status")," (").concat(this.$t("disabled"),")"),icon:e?"circle":"protected",disabled:!e,click:()=>{this.action(t,"status")}},t.options=e=>{this.$api.pages.options(t.id,"list").then(t=>e(t)).catch(t=>{this.$store.dispatch("notification/error",t)})},t.sortable=t.permissions.sort&&this.options.sortable,t.column=this.column,t})},sort(t){let e=null;if(t.added&&(e="added"),t.moved&&(e="moved"),e){const s=t[e].element,i=t[e].newIndex+1+this.pagination.offset;this.$api.pages.status(s.id,"listed",i).then(()=>{this.$store.dispatch("notification/success",":)")}).catch(t=>{this.$store.dispatch("notification/error",{message:t.message,details:t.details}),this.reload()})}},update(){this.reload(),this.$events.$emit("model.update")}}},om=rm,lm=Object(u["a"])(om,im,nm,!1,null,null,null),um=lm.exports,cm=function(){var t=this,e=t.$createElement,s=t._self._c||e;return!1===t.isLoading?s("section",{staticClass:"k-files-section"},[s("header",{staticClass:"k-section-header"},[s("k-headline",[t._v(" "+t._s(t.headline)+" "),t.options.min?s("abbr",{attrs:{title:t.$t("section.required")}},[t._v("*")]):t._e()]),t.add?s("k-button-group",[s("k-button",{attrs:{icon:"upload"},on:{click:t.upload}},[t._v(" "+t._s(t.$t("add"))+" ")])],1):t._e()],1),t.error?[s("k-box",{attrs:{theme:"negative"}},[s("k-text",{attrs:{size:"small"}},[s("strong",[t._v(t._s(t.$t("error.section.notLoaded",{name:t.name}))+":")]),t._v(" "+t._s(t.error)+" ")])],1)]:[s("k-dropzone",{attrs:{disabled:!1===t.add},on:{drop:t.drop}},[t.data.length?s("k-collection",{attrs:{help:t.help,items:t.data,layout:t.options.layout,pagination:t.pagination,sortable:t.options.sortable,size:t.options.size,"data-invalid":t.isInvalid},on:{sort:t.sort,paginate:t.paginate,action:t.action}}):[s("k-empty",{attrs:{layout:t.options.layout,"data-invalid":t.isInvalid,icon:"image"},on:{click:function(e){t.add&&t.upload()}}},[t._v(" "+t._s(t.options.empty||t.$t("files.empty"))+" ")]),s("footer",{staticClass:"k-collection-footer"},[t.help?s("k-text",{staticClass:"k-collection-help",attrs:{theme:"help"},domProps:{innerHTML:t._s(t.help)}}):t._e()],1)]],2),s("k-file-rename-dialog",{ref:"rename",on:{success:t.update}}),s("k-file-remove-dialog",{ref:"remove",on:{success:t.update}}),s("k-upload",{ref:"upload",on:{success:t.uploaded,error:t.reload}})]],2):t._e()},dm=[],hm={mixins:[am],computed:{add(){return!(!this.$permissions.files.create||!1===this.options.upload)&&this.options.upload}},created(){this.load(),this.$events.$on("model.update",this.reload)},destroyed(){this.$events.$off("model.update",this.reload)},methods:{action(t,e){switch(e){case"edit":this.$router.push(t.link);break;case"download":window.open(t.url);break;case"rename":this.$refs.rename.open(t.parent,t.filename);break;case"replace":this.$refs.upload.open({url:A.api+"/"+this.$api.files.url(t.parent,t.filename),accept:"."+t.extension+","+t.mime,multiple:!1});break;case"remove":if(this.data.length<=this.options.min){const t=this.options.min>1?"plural":"singular";this.$store.dispatch("notification/error",{message:this.$t("error.section.files.min."+t,{section:this.options.headline||this.name,min:this.options.min})});break}this.$refs.remove.open(t.parent,t.filename);break}},drop(t){if(!1===this.add)return!1;this.$refs.upload.drop(t,{...this.add,url:A.api+"/"+this.add.api})},items(t){return t.map(t=>{return t.options=e=>{this.$api.files.options(t.parent,t.filename,"list").then(t=>e(t)).catch(t=>{this.$store.dispatch("notification/error",t)})},t.sortable=this.options.sortable,t.column=this.column,t})},replace(t){this.$refs.upload.open({url:A.api+"/"+this.$api.files.url(t.parent,t.filename),accept:t.mime,multiple:!1})},sort(t){if(!1===this.options.sortable)return!1;t=t.map(t=>{return t.id}),this.$api.patch(this.parent+"/files/sort",{files:t,index:this.pagination.offset}).then(()=>{this.$store.dispatch("notification/success",":)")}).catch(t=>{this.reload(),this.$store.dispatch("notification/error",t.message)})},update(){this.$events.$emit("model.update")},upload(){if(!1===this.add)return!1;this.$refs.upload.open({...this.add,url:A.api+"/"+this.add.api})},uploaded(){this.$events.$emit("file.create"),this.$events.$emit("model.update"),this.$store.dispatch("notification/success",":)")}}},pm=hm,mm=Object(u["a"])(pm,cm,dm,!1,null,null,null),fm=mm.exports,gm=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.isLoading?t._e():s("section",{staticClass:"k-fields-section"},[t.issue?[s("k-headline",{staticClass:"k-fields-issue-headline"},[t._v(" Error ")]),s("k-box",{attrs:{text:t.issue.message,theme:"negative"}})]:t._e(),s("k-form",{attrs:{fields:t.fields,validate:!0,value:t.values,disabled:null!==t.$store.state.content.status.lock},on:{input:t.input,submit:t.onSubmit}})],2)},bm=[],km={mixins:[Xp],inheritAttrs:!1,data(){return{fields:{},isLoading:!0,issue:null}},computed:{language(){return this.$store.state.languages.current},values(){return this.$store.getters["content/values"]()}},watch:{language(){this.fetch()}},created:function(){this.fetch()},methods:{input(t,e,s){this.$store.dispatch("content/update",[s,t[s]])},fetch(){this.$api.get(this.parent+"/sections/"+this.name).then(t=>{this.fields=t.fields,Object.keys(this.fields).forEach(t=>{this.fields[t].section=this.name,this.fields[t].endpoints={field:this.parent+"/fields/"+t,section:this.parent+"/sections/"+this.name,model:this.parent}}),this.isLoading=!1}).catch(t=>{this.issue=t,this.isLoading=!1})},onSubmit(t){this.$events.$emit("keydown.cmd.s",t)}}},vm=km,$m=(s("7d5d"),Object(u["a"])(vm,gm,bm,!1,null,null,null)),_m=$m.exports,ym=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-error-view",{staticClass:"k-browser-view"},[s("p",[t._v(" We are really sorry, but your browser does not support all features required for the Kirby Panel. ")]),!1===t.hasFetchSupport?[s("p",[s("strong",[t._v("Fetch")]),s("br"),t._v(" We use Javascript's new Fetch API. You can find a list of supported browsers for this feature on "),s("strong",[s("a",{attrs:{href:"https://caniuse.com/#feat=fetch"}},[t._v("caniuse.com")])])])]:t._e(),!1===t.hasGridSupport?[s("p",[s("strong",[t._v("CSS Grid")]),s("br"),t._v(" We use CSS Grids for all our layouts. You can find a list of supported browsers for this feature on "),s("strong",[s("a",{attrs:{href:"https://caniuse.com/#feat=css-grid"}},[t._v("caniuse.com")])])])]:t._e()],2)},xm=[],wm={grid(){return!(!window.CSS||!window.CSS.supports("display","grid"))},fetch(){return void 0!==window.fetch},all(){return this.fetch()&&this.grid()}},Sm={computed:{hasFetchSupport(){return wm.fetch()},hasGridSupport(){return wm.grid()}},created(){this.$store.dispatch("content/current",null),wm.all()&&this.$router.push("/")}},Cm=Sm,Om=(s("d6fc"),Object(u["a"])(Cm,ym,xm,!1,null,null,null)),Em=Om.exports,Tm=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-error-boundary",{key:t.plugin,scopedSlots:t._u([{key:"error",fn:function(e){var i=e.error;return s("k-error-view",{},[t._v(" "+t._s(i.message||i)+" ")])}}])},[s("k-"+t.plugin+"-plugin-view",{tag:"component"})],1)},jm=[],Im={props:{plugin:String},beforeRouteEnter(t,e,s){s(t=>{t.$store.dispatch("breadcrumb",[]),t.$store.dispatch("content/current",null)})},watch:{plugin:{handler(){this.$store.dispatch("view",this.plugin)},immediate:!0}}},Lm=Im,Am=Object(u["a"])(Lm,Tm,jm,!1,null,null,null),Bm=Am.exports,qm=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-view",{staticClass:"k-error-view"},[s("div",{staticClass:"k-error-view-content"},[s("k-text",[s("p",[s("k-icon",{staticClass:"k-error-view-icon",attrs:{type:"alert"}})],1),s("p",[t._t("default")],2)])],1)])},Nm=[],Pm=(s("d221"),{}),Dm=Object(u["a"])(Pm,qm,Nm,!1,null,null,null),Rm=Dm.exports,Mm=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.issue?s("k-error-view",[t._v(" "+t._s(t.issue.message)+" ")]):s("div",{staticClass:"k-file-view"},[s("k-file-preview",{attrs:{file:t.file}}),s("k-view",{staticClass:"k-file-content",attrs:{"data-locked":t.isLocked}},[s("k-header",{attrs:{editable:t.permissions.changeName&&!t.isLocked,tabs:t.tabs,tab:t.tab},on:{edit:function(e){return t.action("rename")}}},[t._v(" "+t._s(t.file.filename)+" "),s("k-button-group",{attrs:{slot:"left"},slot:"left"},[s("k-button",{attrs:{responsive:!0,icon:"open"},on:{click:function(e){return t.action("download")}}},[t._v(" "+t._s(t.$t("open"))+" ")]),s("k-dropdown",[s("k-button",{attrs:{responsive:!0,disabled:t.isLocked,icon:"cog"},on:{click:function(e){return t.$refs.settings.toggle()}}},[t._v(" "+t._s(t.$t("settings"))+" ")]),s("k-dropdown-content",{ref:"settings",attrs:{options:t.options},on:{action:t.action}})],1),s("k-languages-dropdown")],1),t.file.id?s("k-prev-next",{attrs:{slot:"right",prev:t.prev,next:t.next},slot:"right"}):t._e()],1),t.file.id?s("k-tabs",{key:t.tabsKey,ref:"tabs",attrs:{parent:t.$api.files.url(t.path,t.file.filename),tabs:t.tabs,blueprint:t.file.blueprint.name},on:{tab:function(e){t.tab=e}}}):t._e(),s("k-file-rename-dialog",{ref:"rename",on:{success:t.renamed}}),s("k-file-remove-dialog",{ref:"remove",on:{success:t.deleted}}),s("k-upload",{ref:"upload",attrs:{url:t.uploadApi,accept:t.file.mime,multiple:!1},on:{success:t.uploaded}})],1)],1)},Fm=[],Um={computed:{isLocked(){return null!==this.$store.state.content.status.lock}},created(){this.fetch(),this.$events.$on("model.reload",this.fetch),this.$events.$on("keydown.left",this.toPrev),this.$events.$on("keydown.right",this.toNext)},destroyed(){this.$events.$off("model.reload",this.fetch),this.$events.$off("keydown.left",this.toPrev),this.$events.$off("keydown.right",this.toNext)},methods:{toPrev(t){this.prev&&"body"===t.target.localName&&this.$router.push(this.prev.link)},toNext(t){this.next&&"body"===t.target.localName&&this.$router.push(this.next.link)}}},zm={mixins:[Um],props:{path:{type:String},filename:{type:String,required:!0}},data(){return{name:"",file:{id:null,parent:null,filename:"",url:"",prev:null,next:null,panelIcon:null,panelImage:null,mime:null,content:{}},permissions:{changeName:!1,delete:!1},issue:null,tabs:[],tab:null,options:null}},computed:{uploadApi(){return A.api+"/"+this.path+"/files/"+this.filename},prev(){if(this.file.prev)return{link:this.$api.files.link(this.path,this.file.prev.filename),tooltip:this.file.prev.filename}},tabsKey(){return"file-"+this.file.id+"-tabs"},language(){return this.$store.state.languages.current},next(){if(this.file.next)return{link:this.$api.files.link(this.path,this.file.next.filename),tooltip:this.file.next.filename}}},watch:{language(){this.fetch()},filename(){this.fetch()}},methods:{fetch(){this.$api.files.get(this.path,this.filename,{view:"panel"}).then(t=>{this.file=t,this.file.next=t.nextWithTemplate,this.file.prev=t.prevWithTemplate,this.file.url=t.url,this.name=t.name,this.tabs=t.blueprint.tabs,this.permissions=t.options,this.options=t=>{this.$api.files.options(this.path,this.file.filename).then(e=>{t(e)})},this.$store.dispatch("breadcrumb",this.$api.files.breadcrumb(this.file,this.$route.name)),this.$store.dispatch("title",this.filename),this.$store.dispatch("content/create",{id:"files/"+t.id,api:this.$api.files.link(this.path,this.filename),content:t.content})}).catch(t=>{window.console.error(t),this.issue=t})},action(t){switch(t){case"download":window.open(this.file.url);break;case"rename":this.$refs.rename.open(this.path,this.file.filename);break;case"replace":this.$refs.upload.open({url:A.api+"/"+this.$api.files.url(this.path,this.file.filename),accept:"."+this.file.extension+","+this.file.mime});break;case"remove":this.$refs.remove.open(this.path,this.file.filename);break}},deleted(){this.path?this.$router.push("/"+this.path):this.$router.push("/site")},renamed(t){this.$router.push(this.$api.files.link(this.path,t.filename))},uploaded(){this.fetch(),this.$store.dispatch("notification/success",":)")}}},Hm=zm,Km=Object(u["a"])(Hm,Mm,Fm,!1,null,null,null),Vm=Km.exports,Ym=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.system?s("k-view",{staticClass:"k-installation-view",attrs:{align:"center"}},["install"===t.state?s("form",{on:{submit:function(e){return e.preventDefault(),t.install(e)}}},[s("h1",{staticClass:"k-offscreen"},[t._v(" "+t._s(t.$t("installation"))+" ")]),s("k-fieldset",{attrs:{fields:t.fields,novalidate:!0},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}}),s("k-button",{attrs:{type:"submit",icon:"check"}},[t._v(" "+t._s(t.$t("install"))+" ")])],1):"completed"===t.state?s("k-text",[s("k-headline",[t._v(t._s(t.$t("installation.completed")))]),s("k-link",{attrs:{to:"/login"}},[t._v(" "+t._s(t.$t("login"))+" ")])],1):s("div",[t.system.isInstalled?t._e():s("k-headline",[t._v(" "+t._s(t.$t("installation.issues.headline"))+" ")]),s("ul",{staticClass:"k-installation-issues"},[!1===t.system.isInstallable?s("li",[s("k-icon",{attrs:{type:"alert"}}),s("span",{domProps:{innerHTML:t._s(t.$t("installation.disabled"))}})],1):t._e(),!1===t.requirements.php?s("li",[s("k-icon",{attrs:{type:"alert"}}),s("span",{domProps:{innerHTML:t._s(t.$t("installation.issues.php"))}})],1):t._e(),!1===t.requirements.server?s("li",[s("k-icon",{attrs:{type:"alert"}}),s("span",{domProps:{innerHTML:t._s(t.$t("installation.issues.server"))}})],1):t._e(),!1===t.requirements.mbstring?s("li",[s("k-icon",{attrs:{type:"alert"}}),s("span",{domProps:{innerHTML:t._s(t.$t("installation.issues.mbstring"))}})],1):t._e(),!1===t.requirements.curl?s("li",[s("k-icon",{attrs:{type:"alert"}}),s("span",{domProps:{innerHTML:t._s(t.$t("installation.issues.curl"))}})],1):t._e(),!1===t.requirements.accounts?s("li",[s("k-icon",{attrs:{type:"alert"}}),s("span",{domProps:{innerHTML:t._s(t.$t("installation.issues.accounts"))}})],1):t._e(),!1===t.requirements.content?s("li",[s("k-icon",{attrs:{type:"alert"}}),s("span",{domProps:{innerHTML:t._s(t.$t("installation.issues.content"))}})],1):t._e(),!1===t.requirements.media?s("li",[s("k-icon",{attrs:{type:"alert"}}),s("span",{domProps:{innerHTML:t._s(t.$t("installation.issues.media"))}})],1):t._e(),!1===t.requirements.sessions?s("li",[s("k-icon",{attrs:{type:"alert"}}),s("span",{domProps:{innerHTML:t._s(t.$t("installation.issues.sessions"))}})],1):t._e()]),s("k-button",{attrs:{icon:"refresh"},on:{click:t.check}},[s("span",{domProps:{innerHTML:t._s(t.$t("retry"))}})])],1)],1):t._e()},Wm=[],Jm={data(){return{user:{name:"",email:"",language:"",password:"",role:"admin"},languages:[],system:null}},computed:{state(){return this.system.isOk&&this.system.isInstallable&&!this.system.isInstalled?"install":this.system.isOk&&this.system.isInstallable&&this.system.isInstalled?"completed":void 0},translation(){return this.$store.state.translation.current},requirements(){return this.system&&this.system.requirements?this.system.requirements:{}},fields(){return{email:{label:this.$t("email"),type:"email",link:!1,required:!0},password:{label:this.$t("password"),type:"password",placeholder:this.$t("password")+" …",required:!0},language:{label:this.$t("language"),type:"select",options:this.languages,icon:"globe",empty:!1,required:!0}}}},watch:{translation:{handler(t){this.user.language=t},immediate:!0},"user.language"(t){this.$store.dispatch("translation/activate",t)}},created(){this.$store.dispatch("content/current",null),this.check()},methods:{install(){this.$api.system.install(this.user).then(t=>{this.$store.dispatch("user/current",t),this.$store.dispatch("notification/success",this.$t("welcome")+"!"),this.$router.push("/")}).catch(t=>{this.$store.dispatch("notification/error",t)})},check(){this.$store.dispatch("system/load",!0).then(t=>{!0===t.isInstalled&&t.isReady?this.$router.push("/login"):this.$api.translations.options().then(e=>{this.languages=e,this.system=t,this.$store.dispatch("title",this.$t("view.installation"))})})}}},Gm=Jm,Zm=(s("146c"),Object(u["a"])(Gm,Ym,Wm,!1,null,null,null)),Xm=Zm.exports,Qm=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.issue?s("k-error-view",[t._v(" "+t._s(t.issue.message)+" ")]):t.ready?s("k-view",{staticClass:"k-login-view",attrs:{align:"center"}},[s("k-login-form")],1):t._e()},tf=[],ef=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"k-login-form",on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[s("h1",{staticClass:"k-offscreen"},[t._v(" "+t._s(t.$t("login"))+" ")]),t.issue?s("div",{staticClass:"k-login-alert",on:{click:function(e){t.issue=null}}},[s("span",[t._v(t._s(t.issue))]),s("k-icon",{attrs:{type:"alert"}})],1):t._e(),s("k-fieldset",{attrs:{novalidate:!0,fields:t.fields},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}}),s("div",{staticClass:"k-login-buttons"},[s("span",{staticClass:"k-login-checkbox"},[s("k-checkbox-input",{attrs:{value:t.user.remember,label:t.$t("login.remember")},on:{input:function(e){t.user.remember=e}}})],1),s("k-button",{staticClass:"k-login-button",attrs:{icon:"check",type:"submit"}},[t._v(" "+t._s(t.$t("login"))+" "),t.isLoading?[t._v(" … ")]:t._e()],2)],1)],1)},sf=[],nf={data(){return{isLoading:!1,issue:"",user:{email:"",password:"",remember:!1}}},computed:{fields(){return{email:{autofocus:!0,label:this.$t("email"),type:"email",required:!0,link:!1},password:{label:this.$t("password"),type:"password",minLength:8,required:!0,autocomplete:"current-password",counter:!1}}}},methods:{login(){this.issue=null,this.isLoading=!0,this.$store.dispatch("user/login",this.user).then(()=>{this.$store.dispatch("system/load",!0).then(()=>{this.$store.dispatch("notification/success",this.$t("welcome")),this.isLoading=!1})}).catch(()=>{this.issue=this.$t("error.access.login"),this.isLoading=!1})}}},af=nf,rf=Object(u["a"])(af,ef,sf,!1,null,null,null),of=rf.exports,lf={components:{"k-login-form":window.panel.plugins.login||of},data(){return{ready:!1,issue:null}},created(){this.$store.dispatch("content/current",null),this.$store.dispatch("system/load").then(t=>{t.isReady||this.$router.push("/installation"),t.user&&t.user.id&&this.$router.push("/"),this.ready=!0,this.$store.dispatch("title",this.$t("login"))}).catch(t=>{this.issue=t})}},uf=lf,cf=(s("24c1"),Object(u["a"])(uf,Qm,tf,!1,null,null,null)),df=cf.exports,hf=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.issue?s("k-error-view",[t._v(" "+t._s(t.issue.message)+" ")]):s("k-view",{staticClass:"k-page-view",attrs:{"data-locked":t.isLocked}},[s("k-header",{attrs:{tabs:t.tabs,tab:t.tab,editable:t.permissions.changeTitle&&!t.isLocked},on:{edit:function(e){return t.action("rename")}}},[t._v(" "+t._s(t.page.title)+" "),s("k-button-group",{attrs:{slot:"left"},slot:"left"},[t.permissions.preview&&t.page.previewUrl?s("k-button",{attrs:{responsive:!0,link:t.page.previewUrl,target:"_blank",icon:"open"}},[t._v(" "+t._s(t.$t("open"))+" ")]):t._e(),t.status?s("k-button",{class:["k-status-flag","k-status-flag-"+t.page.status],attrs:{disabled:!t.permissions.changeStatus||t.isLocked,icon:!t.permissions.changeStatus||t.isLocked?"protected":"circle",responsive:!0,tooltip:t.status.label},on:{click:function(e){return t.action("status")}}},[t._v(" "+t._s(t.status.label)+" ")]):t._e(),s("k-dropdown",[s("k-button",{attrs:{responsive:!0,disabled:!0===t.isLocked,icon:"cog"},on:{click:function(e){return t.$refs.settings.toggle()}}},[t._v(" "+t._s(t.$t("settings"))+" ")]),s("k-dropdown-content",{ref:"settings",attrs:{options:t.options},on:{action:t.action}})],1),s("k-languages-dropdown")],1),t.page.id?s("k-prev-next",{attrs:{slot:"right",prev:t.prev,next:t.next},slot:"right"}):t._e()],1),t.page.id?s("k-tabs",{key:t.tabsKey,ref:"tabs",attrs:{parent:t.$api.pages.url(t.page.id),blueprint:t.blueprint,tabs:t.tabs},on:{tab:t.onTab}}):t._e(),s("k-page-rename-dialog",{ref:"rename",on:{success:t.update}}),s("k-page-duplicate-dialog",{ref:"duplicate"}),s("k-page-url-dialog",{ref:"url"}),s("k-page-status-dialog",{ref:"status",on:{success:t.update}}),s("k-page-template-dialog",{ref:"template",on:{success:t.update}}),s("k-page-remove-dialog",{ref:"remove"})],1)},pf=[],mf={mixins:[Um],props:{path:{type:String,required:!0}},data(){return{page:{title:"",id:null,prev:null,next:null,status:null},blueprint:null,preview:!0,permissions:{changeTitle:!1,changeStatus:!1},icon:"page",issue:null,tab:null,tabs:[],options:null}},computed:{language(){return this.$store.state.languages.current},next(){if(this.page.next)return{link:this.$api.pages.link(this.page.next.id),tooltip:this.page.next.title}},prev(){if(this.page.prev)return{link:this.$api.pages.link(this.page.prev.id),tooltip:this.page.prev.title}},status(){return null!==this.page.status?this.page.blueprint.status[this.page.status]:null},tabsKey(){return"page-"+this.page.id+"-tabs"}},watch:{language(){this.fetch()},path(){this.fetch()}},created(){this.$events.$on("page.changeSlug",this.update)},destroyed(){this.$events.$off("page.changeSlug",this.update)},methods:{action(t){switch(t){case"duplicate":this.$refs.duplicate.open(this.page.id);break;case"rename":this.$refs.rename.open(this.page.id);break;case"url":this.$refs.url.open(this.page.id);break;case"status":this.$refs.status.open(this.page.id);break;case"template":this.$refs.template.open(this.page.id);break;case"remove":this.$refs.remove.open(this.page.id);break;default:this.$store.dispatch("notification/error",this.$t("notification.notImplemented"));break}},fetch(){this.$api.pages.get(this.path,{view:"panel"}).then(t=>{this.page=t,this.blueprint=t.blueprint.name,this.permissions=t.options,this.tabs=t.blueprint.tabs,this.options=t=>{this.$api.pages.options(this.page.id).then(e=>{t(e)})},this.$store.dispatch("breadcrumb",this.$api.pages.breadcrumb(t)),this.$store.dispatch("title",this.page.title),this.$store.dispatch("content/create",{id:"pages/"+this.page.id,api:this.$api.pages.link(this.page.id),content:this.page.content})}).catch(t=>{this.issue=t})},onTab(t){this.tab=t},update(){this.fetch(),this.$emit("model.update")}}},ff=mf,gf=(s("202d"),Object(u["a"])(ff,hf,pf,!1,null,null,null)),bf=gf.exports,kf=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-view",{staticClass:"k-settings-view"},[s("k-header",[t._v(" "+t._s(t.$t("view.settings"))+" ")]),s("section",{staticClass:"k-system-info"},[s("header",[s("k-headline",[t._v("Kirby")])],1),s("ul",{staticClass:"k-system-info-box"},[s("li",[s("dl",[s("dt",[t._v(t._s(t.$t("license")))]),s("dd",[t.license?[t._v(" "+t._s(t.license)+" ")]:s("p",[s("strong",{staticClass:"k-system-unregistered"},[t._v(t._s(t.$t("license.unregistered")))])])],2)])]),s("li",[s("dl",[s("dt",[t._v(t._s(t.$t("version")))]),s("dd",[t._v(t._s(t.$store.state.system.info.version))])])])])]),t.multilang?s("section",{staticClass:"k-languages"},[t.languages.length>0?[s("section",{staticClass:"k-languages-section"},[s("header",[s("k-headline",[t._v(t._s(t.$t("languages.default")))])],1),s("k-collection",{attrs:{items:t.defaultLanguage},on:{action:t.action}})],1),s("section",{staticClass:"k-languages-section"},[s("header",[s("k-headline",[t._v(t._s(t.$t("languages.secondary")))]),s("k-button",{attrs:{icon:"add"},on:{click:function(e){return t.$refs.create.open()}}},[t._v(" "+t._s(t.$t("language.create"))+" ")])],1),t.translations.length?s("k-collection",{attrs:{items:t.translations},on:{action:t.action}}):s("k-empty",{attrs:{icon:"globe"},on:{click:function(e){return t.$refs.create.open()}}},[t._v(" "+t._s(t.$t("languages.secondary.empty"))+" ")])],1)]:0===t.languages.length?[s("header",[s("k-headline",[t._v(t._s(t.$t("languages")))]),s("k-button",{attrs:{icon:"add"},on:{click:function(e){return t.$refs.create.open()}}},[t._v(" "+t._s(t.$t("language.create"))+" ")])],1),s("k-empty",{attrs:{icon:"globe"},on:{click:function(e){return t.$refs.create.open()}}},[t._v(" "+t._s(t.$t("languages.empty"))+" ")])]:t._e(),s("k-language-create-dialog",{ref:"create",on:{success:t.fetch}}),s("k-language-update-dialog",{ref:"update",on:{success:t.fetch}}),s("k-language-remove-dialog",{ref:"remove",on:{success:t.fetch}})],2):t._e()],1)},vf=[],$f={data(){return{languages:[]}},computed:{defaultLanguage(){return this.languages.filter(t=>t.default)},multilang(){return this.$store.state.system.info.multilang},license(){return this.$store.state.system.info.license},translations(){return this.languages.filter(t=>!1===t.default)}},created(){this.$store.dispatch("content/current",null),this.$store.dispatch("title",this.$t("view.settings")),this.$store.dispatch("breadcrumb",[]),this.fetch()},methods:{fetch(){!1!==this.multilang?this.$api.get("languages").then(t=>{this.languages=t.data.map(e=>{return{id:e.code,default:e.default,icon:{type:"globe",back:"black"},image:!0,text:e.name,info:e.code,link:()=>{this.$refs.update.open(e.code)},options:[{icon:"edit",text:this.$t("edit"),click:"update"},{icon:"trash",text:this.$t("delete"),disabled:e.default&&1!==t.data.length,click:"remove"}]}})}):this.languages=[]},action(t,e){switch(e){case"update":this.$refs.update.open(t.id);break;case"remove":this.$refs.remove.open(t.id);break}}}},_f=$f,yf=(s("9bd5"),Object(u["a"])(_f,kf,vf,!1,null,null,null)),xf=yf.exports,wf=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.issue?s("k-error-view",[t._v(" "+t._s(t.issue.message)+" ")]):s("k-view",{key:"site-view",staticClass:"k-site-view",attrs:{"data-locked":t.isLocked}},[s("k-header",{attrs:{tabs:t.tabs,tab:t.tab,editable:t.permissions.changeTitle&&!t.isLocked},on:{edit:function(e){return t.action("rename")}}},[t._v(" "+t._s(t.site.title)+" "),s("k-button-group",{attrs:{slot:"left"},slot:"left"},[s("k-button",{attrs:{responsive:!0,link:t.site.previewUrl,target:"_blank",icon:"open"}},[t._v(" "+t._s(t.$t("open"))+" ")]),s("k-languages-dropdown")],1)],1),t.site.url?s("k-tabs",{ref:"tabs",attrs:{tabs:t.tabs,blueprint:t.site.blueprint.name,parent:"site"},on:{tab:function(e){t.tab=e}}}):t._e(),s("k-site-rename-dialog",{ref:"rename",on:{success:t.fetch}})],1)},Sf=[],Cf={data(){return{site:{title:null,url:null},issue:null,tab:null,tabs:[],options:null,permissions:{changeTitle:!0}}},computed:{isLocked(){return null!==this.$store.state.content.status.lock},language(){return this.$store.state.languages.current}},watch:{language(){this.fetch()}},created(){this.fetch()},methods:{fetch(){this.$api.site.get({view:"panel"}).then(t=>{this.site=t,this.tabs=t.blueprint.tabs,this.permissions=t.options,this.options=t=>{this.$api.site.options().then(e=>{t(e)})},this.$store.dispatch("breadcrumb",[]),this.$store.dispatch("title",null),this.$store.dispatch("content/create",{id:"site",api:"site",content:t.content})}).catch(t=>{this.issue=t})},action(t){switch(t){case"languages":this.$refs.languages.open();break;case"rename":this.$refs.rename.open();break;default:this.$store.dispatch("notification/error",this.$t("notification.notImplemented"));break}}}},Of=Cf,Ef=Object(u["a"])(Of,wf,Sf,!1,null,null,null),Tf=Ef.exports,jf=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.issue?s("k-error-view",[t._v(" "+t._s(t.issue.message)+" ")]):s("k-view",{staticClass:"k-users-view"},[s("k-header",[t._v(" "+t._s(t.$t("view.users"))+" "),s("k-button-group",{attrs:{slot:"left"},slot:"left"},[s("k-button",{attrs:{disabled:!1===t.$permissions.users.create,icon:"add"},on:{click:function(e){return t.$refs.create.open()}}},[t._v(" "+t._s(t.$t("user.create"))+" ")])],1),s("k-button-group",{attrs:{slot:"right"},slot:"right"},[s("k-dropdown",[s("k-button",{attrs:{responsive:!0,icon:"funnel"},on:{click:function(e){return t.$refs.roles.toggle()}}},[t._v(" "+t._s(t.$t("role"))+": "+t._s(t.role?t.role.text:t.$t("role.all"))+" ")]),s("k-dropdown-content",{ref:"roles",attrs:{align:"right"}},[s("k-dropdown-item",{attrs:{icon:"bolt"},on:{click:function(e){return t.filter(!1)}}},[t._v(" "+t._s(t.$t("role.all"))+" ")]),s("hr"),t._l(t.roles,(function(e){return s("k-dropdown-item",{key:e.value,attrs:{icon:"bolt"},on:{click:function(s){return t.filter(e)}}},[t._v(" "+t._s(e.text)+" ")])}))],2)],1)],1)],1),t.users.length>0?[s("k-collection",{attrs:{items:t.users,pagination:t.pagination},on:{paginate:t.paginate,action:t.action}})]:0===t.total?[s("k-empty",{attrs:{icon:"users"}},[t._v(" "+t._s(t.$t("role.empty"))+" ")])]:t._e(),s("k-user-create-dialog",{ref:"create",on:{success:t.fetch}}),s("k-user-email-dialog",{ref:"email",on:{success:t.fetch}}),s("k-user-language-dialog",{ref:"language",on:{success:t.fetch}}),s("k-user-password-dialog",{ref:"password"}),s("k-user-remove-dialog",{ref:"remove",on:{success:t.fetch}}),s("k-user-rename-dialog",{ref:"rename",on:{success:t.fetch}}),s("k-user-role-dialog",{ref:"role",on:{success:t.fetch}})],2)},If=[],Lf={data(){return{page:1,limit:20,total:null,users:[],roles:[],issue:null}},computed:{pagination(){return{page:this.page,limit:this.limit,total:this.total}},role(){let t=null;return this.$route.params.role&&this.roles.forEach(e=>{e.value===this.$route.params.role&&(t=e)}),t}},watch:{$route(){this.fetch()}},created(){this.$store.dispatch("content/current",null),this.$api.roles.options().then(t=>{this.roles=t,this.fetch()})},methods:{fetch(){this.$store.dispatch("title",this.$t("view.users"));let t={paginate:{page:this.page,limit:this.limit},sortBy:"username asc"};this.role&&(t.filterBy=[{field:"role",operator:"==",value:this.role.value}]),this.$api.users.list(t).then(t=>{this.users=t.data.map(t=>{let e={id:t.id,icon:{type:"user",back:"black"},text:t.name||t.email,info:t.role.title,link:"/users/"+t.id,options:e=>{this.$api.users.options(t.id,"list").then(t=>e(t)).catch(t=>{this.$store.dispatch("notification/error",t)})},image:!0};return t.avatar&&(e.image={url:t.avatar.url,cover:!0}),e}),this.role?this.$store.dispatch("breadcrumb",[{link:"/users/role/"+this.role.value,label:this.$t("role")+": "+this.role.text}]):this.$store.dispatch("breadcrumb",[]),this.total=t.pagination.total}).catch(t=>{this.issue=t})},paginate(t){this.page=t.page,this.limit=t.limit,this.fetch()},action(t,e){switch(e){case"edit":this.$router.push("/users/"+t.id);break;case"email":this.$refs.email.open(t.id);break;case"role":this.$refs.role.open(t.id);break;case"rename":this.$refs.rename.open(t.id);break;case"password":this.$refs.password.open(t.id);break;case"language":this.$refs.language.open(t.id);break;case"remove":this.$refs.remove.open(t.id);break}},filter(t){!1===t?this.$router.push("/users"):this.$router.push("/users/role/"+t.value),this.$refs.roles.close()}}},Af=Lf,Bf=Object(u["a"])(Af,jf,If,!1,null,null,null),qf=Bf.exports,Nf=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.issue?s("k-error-view",[t._v(" "+t._s(t.issue.message)+" ")]):t.ready?s("div",{staticClass:"k-user-view",attrs:{"data-locked":t.isLocked}},[s("div",{staticClass:"k-user-profile"},[s("k-view",[t.avatar?[s("k-dropdown",[s("k-button",{staticClass:"k-user-view-image",attrs:{tooltip:t.$t("avatar"),disabled:t.isLocked},on:{click:function(e){return t.$refs.picture.toggle()}}},[t.avatar?s("k-image",{attrs:{cover:!0,src:t.avatar,ratio:"1/1"}}):t._e()],1),s("k-dropdown-content",{ref:"picture"},[s("k-dropdown-item",{attrs:{icon:"upload"},on:{click:function(e){return t.$refs.upload.open()}}},[t._v(" "+t._s(t.$t("change"))+" ")]),s("k-dropdown-item",{attrs:{icon:"trash"},on:{click:function(e){return t.action("picture.delete")}}},[t._v(" "+t._s(t.$t("delete"))+" ")])],1)],1)]:[s("k-button",{staticClass:"k-user-view-image",attrs:{tooltip:t.$t("avatar")},on:{click:function(e){return t.$refs.upload.open()}}},[s("k-icon",{attrs:{type:"user"}})],1)],s("k-button-group",[s("k-button",{attrs:{disabled:!t.permissions.changeEmail||t.isLocked,icon:"email"},on:{click:function(e){return t.action("email")}}},[t._v(" "+t._s(t.$t("email"))+": "+t._s(t.user.email)+" ")]),s("k-button",{attrs:{disabled:!t.permissions.changeRole||t.isLocked,icon:"bolt"},on:{click:function(e){return t.action("role")}}},[t._v(" "+t._s(t.$t("role"))+": "+t._s(t.user.role.title)+" ")]),s("k-button",{attrs:{disabled:!t.permissions.changeLanguage||t.isLocked,icon:"globe"},on:{click:function(e){return t.action("language")}}},[t._v(" "+t._s(t.$t("language"))+": "+t._s(t.user.language)+" ")])],1)],2)],1),s("k-view",[s("k-header",{attrs:{editable:t.permissions.changeName&&!t.isLocked,tabs:t.tabs,tab:t.tab},on:{edit:function(e){return t.action("rename")}}},[t.user.name&&0!==t.user.name.length?[t._v(" "+t._s(t.user.name)+" ")]:s("span",{staticClass:"k-user-name-placeholder"},[t._v(t._s(t.$t("name"))+" …")]),s("k-button-group",{attrs:{slot:"left"},slot:"left"},[s("k-dropdown",[s("k-button",{attrs:{disabled:t.isLocked,icon:"cog"},on:{click:function(e){return t.$refs.settings.toggle()}}},[t._v(" "+t._s(t.$t("settings"))+" ")]),s("k-dropdown-content",{ref:"settings",attrs:{options:t.options},on:{action:t.action}})],1),s("k-languages-dropdown")],1),t.user.id&&"User"===t.$route.name?s("k-prev-next",{attrs:{slot:"right",prev:t.prev,next:t.next},slot:"right"}):t._e()],2),t.user&&t.tabs.length?s("k-tabs",{key:t.tabsKey,ref:"tabs",attrs:{parent:"users/"+t.user.id,blueprint:t.user.blueprint.name,tabs:t.tabs},on:{tab:function(e){t.tab=e}}}):t.ready?s("k-box",{attrs:{text:t.$t("user.blueprint",{role:t.user.role.name}),theme:"info"}}):t._e(),s("k-user-email-dialog",{ref:"email",on:{success:t.fetch}}),s("k-user-language-dialog",{ref:"language",on:{success:t.fetch}}),s("k-user-password-dialog",{ref:"password"}),s("k-user-remove-dialog",{ref:"remove"}),s("k-user-rename-dialog",{ref:"rename",on:{success:t.fetch}}),s("k-user-role-dialog",{ref:"role",on:{success:t.fetch}}),s("k-upload",{ref:"upload",attrs:{url:t.uploadApi,multiple:!1,accept:"image/*"},on:{success:t.uploadedAvatar}})],1)],1):t._e()},Pf=[],Df={mixins:[Um],props:{id:{type:String,required:!0}},data(){return{tab:null,tabs:[],ready:!1,user:{role:{name:null},name:null,language:null,prev:null,next:null},permissions:{changeEmail:!0,changeName:!0,changeLanguage:!0,changeRole:!0},issue:null,avatar:null,options:null}},computed:{language(){return this.$store.state.languages.current},next(){if(this.user.next)return{link:this.$api.users.link(this.user.next.id),tooltip:this.user.next.name}},prev(){if(this.user.prev)return{link:this.$api.users.link(this.user.prev.id),tooltip:this.user.prev.name}},tabsKey(){return"user-"+this.user.id+"-tabs"},uploadApi(){return A.api+"/users/"+this.user.id+"/avatar"}},watch:{"$route.name":{handler(t){"Account"===t&&this.$store.dispatch("breadcrumb",[])},immediate:!0},language(){this.fetch()},id(){this.fetch()}},methods:{action(t){switch(t){case"email":this.$refs.email.open(this.user.id);break;case"language":this.$refs.language.open(this.user.id);break;case"password":this.$refs.password.open(this.user.id);break;case"picture.delete":this.$api.users.deleteAvatar(this.id).then(()=>{this.$store.dispatch("notification/success",":)"),this.avatar=null});break;case"remove":this.$refs.remove.open(this.user.id);break;case"rename":this.$refs.rename.open(this.user.id);break;case"role":this.$refs.role.open(this.user.id);break;default:this.$store.dispatch("notification/error","Not yet implemented")}},fetch(){this.$api.users.get(this.id,{view:"panel"}).then(t=>{this.user=t,this.tabs=t.blueprint.tabs,this.ready=!0,this.permissions=t.options,this.options=t=>{this.$api.users.options(this.user.id).then(e=>{t(e)})},t.avatar?this.avatar=t.avatar.url:this.avatar=null,"User"===this.$route.name&&this.$store.dispatch("breadcrumb",this.$api.users.breadcrumb(t)),this.$store.dispatch("title",this.user.name||this.user.email),this.$store.dispatch("content/create",{id:"users/"+t.id,api:this.$api.users.link(t.id),content:t.content})}).catch(t=>{this.issue=t})},uploadedAvatar(){this.$store.dispatch("notification/success",":)"),this.fetch()}}},Rf=Df,Mf=(s("bd96"),Object(u["a"])(Rf,Nf,Pf,!1,null,null,null)),Ff=Mf.exports;M["a"].component("k-dialog",G),M["a"].component("k-error-dialog",st),M["a"].component("k-file-rename-dialog",mt),M["a"].component("k-file-remove-dialog",lt),M["a"].component("k-files-dialog",yt),M["a"].component("k-form-dialog",Et),M["a"].component("k-language-create-dialog",Bt),M["a"].component("k-language-remove-dialog",Mt),M["a"].component("k-language-update-dialog",Vt),M["a"].component("k-page-create-dialog",Xt),M["a"].component("k-page-duplicate-dialog",ne),M["a"].component("k-page-rename-dialog",ge),M["a"].component("k-page-remove-dialog",ce),M["a"].component("k-page-status-dialog",ye),M["a"].component("k-page-template-dialog",Ee),M["a"].component("k-page-url-dialog",Be),M["a"].component("k-pages-dialog",Me),M["a"].component("k-remove-dialog",Ve),M["a"].component("k-site-rename-dialog",Ge),M["a"].component("k-text-dialog",ss),M["a"].component("k-user-create-dialog",ls),M["a"].component("k-user-email-dialog",ms),M["a"].component("k-user-language-dialog",$s),M["a"].component("k-user-password-dialog",Cs),M["a"].component("k-user-remove-dialog",Ls),M["a"].component("k-user-rename-dialog",Ds),M["a"].component("k-user-role-dialog",Hs),M["a"].component("k-users-dialog",Gs),M["a"].component("k-calendar",li),M["a"].component("k-counter",mi),M["a"].component("k-autocomplete",si),M["a"].component("k-form",$i),M["a"].component("k-form-buttons",Ci),M["a"].component("k-form-indicator",Li),M["a"].component("k-field",Di),M["a"].component("k-fieldset",Hi),M["a"].component("k-input",Gi),M["a"].component("k-upload",sn),M["a"].component("k-checkbox-input",cn),M["a"].component("k-checkboxes-input",gn),M["a"].component("k-date-input",yn),M["a"].component("k-datetime-input",En),M["a"].component("k-email-input",Dn),M["a"].component("k-multiselect-input",Hn),M["a"].component("k-number-input",Gn),M["a"].component("k-password-input",ta),M["a"].component("k-radio-input",ra),M["a"].component("k-range-input",ha),M["a"].component("k-select-input",ka),M["a"].component("k-tags-input",wa),M["a"].component("k-tel-input",Ea),M["a"].component("k-text-input",Bn),M["a"].component("k-textarea-input",Ba),M["a"].component("k-time-input",Ma),M["a"].component("k-toggle-input",Va),M["a"].component("k-url-input",Ga),M["a"].component("k-checkboxes-field",sr),M["a"].component("k-date-field",lr),M["a"].component("k-email-field",mr),M["a"].component("k-files-field",_r),M["a"].component("k-headline-field",Or),M["a"].component("k-info-field",Ar),M["a"].component("k-line-field",Dr),M["a"].component("k-multiselect-field",Hr),M["a"].component("k-number-field",Gr),M["a"].component("k-pages-field",so),M["a"].component("k-password-field",lo),M["a"].component("k-radio-field",fo),M["a"].component("k-range-field",_o),M["a"].component("k-select-field",Oo),M["a"].component("k-structure-field",Ao),M["a"].component("k-tags-field",Ro),M["a"].component("k-text-field",Zo),M["a"].component("k-textarea-field",il),M["a"].component("k-tel-field",Ko),M["a"].component("k-time-field",ul),M["a"].component("k-toggle-field",fl),M["a"].component("k-url-field",_l),M["a"].component("k-users-field",Ol),M["a"].component("k-toolbar",Bl),M["a"].component("k-toolbar-email-dialog",Ml),M["a"].component("k-toolbar-link-dialog",Vl),M["a"].component("k-email-field-preview",mu),M["a"].component("k-files-field-preview",nu),M["a"].component("k-pages-field-preview",$u),M["a"].component("k-toggle-field-preview",Cu),M["a"].component("k-url-field-preview",cu),M["a"].component("k-users-field-preview",Lu),M["a"].component("k-bar",Pu),M["a"].component("k-box",zu),M["a"].component("k-card",Ju),M["a"].component("k-cards",ec),M["a"].component("k-collection",oc),M["a"].component("k-column",pc),M["a"].component("k-dropzone",vc),M["a"].component("k-empty",Sc),M["a"].component("k-file-preview",Ic),M["a"].component("k-grid",Pc),M["a"].component("k-header",zc),M["a"].component("k-list",Jc),M["a"].component("k-list-item",ed),M["a"].component("k-tabs",od),M["a"].component("k-view",pd),M["a"].component("k-draggable",_d),M["a"].component("k-error-boundary",Sd),M["a"].component("k-headline",Id),M["a"].component("k-icon",Pd),M["a"].component("k-image",zd),M["a"].component("k-progress",Jd),M["a"].component("k-sort-handle",th),M["a"].component("k-text",rh),M["a"].component("k-button",hh),M["a"].component("k-button-disabled",kh),M["a"].component("k-button-group",xh),M["a"].component("k-button-link",Th),M["a"].component("k-button-native",Nh),M["a"].component("k-dropdown",Fh),M["a"].component("k-dropdown-content",Wh),M["a"].component("k-dropdown-item",tp),M["a"].component("k-languages-dropdown",hp),M["a"].component("k-link",rp),M["a"].component("k-pagination",kp),M["a"].component("k-prev-next",wp),M["a"].component("k-search",jp),M["a"].component("k-tag",Np),M["a"].component("k-topbar",zp),M["a"].component("k-sections",Jp),M["a"].component("k-info-section",sm),M["a"].component("k-pages-section",um),M["a"].component("k-files-section",fm),M["a"].component("k-fields-section",_m),M["a"].component("k-browser-view",Em),M["a"].component("k-custom-view",Bm),M["a"].component("k-error-view",Rm),M["a"].component("k-file-view",Vm),M["a"].component("k-installation-view",Xm),M["a"].component("k-login-view",df),M["a"].component("k-page-view",bf),M["a"].component("k-settings-view",xf),M["a"].component("k-site-view",Tf),M["a"].component("k-users-view",qf),M["a"].component("k-user-view",Ff);var Uf={user(){return pg.get("auth")},login(t){let e={long:t.remember||!1,email:t.email,password:t.password};return pg.post("auth/login",e).then(t=>{return t.user})},logout(){return pg.post("auth/logout")}},zf={get(t,e,s){return pg.get(this.url(t,e),s).then(t=>{return!0===Array.isArray(t.content)&&(t.content={}),t})},update(t,e,s){return pg.patch(this.url(t,e),s)},rename(t,e,s){return pg.patch(this.url(t,e,"name"),{name:s})},url(t,e,s){let i=t+"/files/"+e;return s&&(i+="/"+s),i},link(t,e,s){return"/"+this.url(t,e,s)},delete(t,e){return pg.delete(this.url(t,e))},options(t,e,s){return pg.get(this.url(t,e),{select:"options"}).then(t=>{const e=t.options;let i=[];return"list"===s&&i.push({icon:"open",text:M["a"].i18n.translate("open"),click:"download"}),i.push({icon:"title",text:M["a"].i18n.translate("rename"),click:"rename",disabled:!e.changeName}),i.push({icon:"upload",text:M["a"].i18n.translate("replace"),click:"replace",disabled:!e.replace}),i.push({icon:"trash",text:M["a"].i18n.translate("delete"),click:"remove",disabled:!e.delete}),i})},breadcrumb(t,e){let s=null,i=[];switch(e){case"UserFile":i.push({label:t.parent.username,link:pg.users.link(t.parent.id)}),s="users/"+t.parent.id;break;case"SiteFile":s="site";break;case"PageFile":i=t.parents.map(t=>({label:t.title,link:pg.pages.link(t.id)})),s=pg.pages.url(t.parent.id);break}return i.push({label:t.filename,link:this.link(s,t.filename)}),i}},Hf={create(t,e){return null===t||"/"===t?pg.post("site/children",e):pg.post(this.url(t,"children"),e)},duplicate(t,e,s){return pg.post(this.url(t,"duplicate"),{slug:e,children:s.children||!1,files:s.files||!1})},url(t,e){let s=null===t?"pages":"pages/"+t.replace(/\//g,"+");return e&&(s+="/"+e),s},link(t){return"/"+this.url(t)},get(t,e){return pg.get(this.url(t),e).then(t=>{return!0===Array.isArray(t.content)&&(t.content={}),t})},options(t,e="view"){return pg.get(this.url(t),{select:"options"}).then(t=>{const s=t.options;let i=[];return"list"===e&&(i.push({click:"preview",icon:"open",text:M["a"].i18n.translate("open"),disabled:!1===s.preview}),i.push("-")),i.push({click:"rename",icon:"title",text:M["a"].i18n.translate("rename"),disabled:!s.changeTitle}),i.push({click:"duplicate",icon:"copy",text:M["a"].i18n.translate("duplicate"),disabled:!s.duplicate}),i.push("-"),i.push({click:"url",icon:"url",text:M["a"].i18n.translate("page.changeSlug"),disabled:!s.changeSlug}),i.push({click:"status",icon:"preview",text:M["a"].i18n.translate("page.changeStatus"),disabled:!s.changeStatus}),i.push({click:"template",icon:"template",text:M["a"].i18n.translate("page.changeTemplate"),disabled:!s.changeTemplate}),i.push("-"),i.push({click:"remove",icon:"trash",text:M["a"].i18n.translate("delete"),disabled:!s.delete}),i})},preview(t){return this.get(t,{select:"previewUrl"}).then(t=>{return t.previewUrl})},update(t,e){return pg.patch(this.url(t),e)},children(t,e){return pg.post(this.url(t,"children/search"),e)},files(t,e){return pg.post(this.url(t,"files/search"),e)},delete(t,e){return pg.delete(this.url(t),e)},slug(t,e){return pg.patch(this.url(t,"slug"),{slug:e})},title(t,e){return pg.patch(this.url(t,"title"),{title:e})},template(t,e){return pg.patch(this.url(t,"template"),{template:e})},search(t,e){return t?pg.post("pages/"+t.replace("/","+")+"/children/search?select=id,title,hasChildren",e):pg.post("site/children/search?select=id,title,hasChildren",e)},status(t,e,s){return pg.patch(this.url(t,"status"),{status:e,position:s})},breadcrumb(t,e=!0){var s=t.parents.map(t=>({label:t.title,link:this.link(t.id)}));return!0===e&&s.push({label:t.title,link:this.link(t.id)}),s}},Kf=s("2f62"),Vf=function(t){if(void 0!==t)return JSON.parse(JSON.stringify(t))};const Yf=(t,e)=>{localStorage.setItem("kirby$content$"+t,JSON.stringify(e))};var Wf={namespaced:!0,state:{current:null,models:{},status:{enabled:!0,lock:null,unlock:null}},getters:{exists:t=>e=>{return Object.prototype.hasOwnProperty.call(t.models,e)},hasChanges:(t,e)=>t=>{const s=e.model(t).changes;return Object.keys(s).length>0},isCurrent:t=>e=>{return t.current===e},id:(t,e,s)=>e=>{return e=e||t.current,s.languages.current?e+"/"+s.languages.current.code:e},model:(t,e)=>s=>{return s=s||t.current,!0===e.exists(s)?t.models[s]:{api:null,originals:{},values:{},changes:{}}},originals:(t,e)=>t=>{return Vf(e.model(t).originals)},values:(t,e)=>t=>{return{...e.originals(t),...e.changes(t)}},changes:(t,e)=>t=>{return Vf(e.model(t).changes)}},mutations:{CREATE(t,[e,s]){if(!s)return!1;let i=t.models[e]?t.models[e].changes:s.changes;M["a"].set(t.models,e,{api:s.api,originals:s.originals,changes:i||{}})},CURRENT(t,e){t.current=e},LOCK(t,e){M["a"].set(t.status,"lock",e)},MOVE(t,[e,s]){const i=Vf(t.models[e]);M["a"].delete(t.models,e),M["a"].set(t.models,s,i);const n=localStorage.getItem("kirby$content$"+e);localStorage.removeItem("kirby$content$"+e),localStorage.setItem("kirby$content$"+s,n)},REMOVE(t,e){M["a"].delete(t.models,e),localStorage.removeItem("kirby$content$"+e)},REVERT(t,e){t.models[e]&&(M["a"].set(t.models[e],"changes",{}),localStorage.removeItem("kirby$content$"+e))},STATUS(t,e){M["a"].set(t.status,"enabled",e)},UNLOCK(t,e){e&&M["a"].set(t.models[t.current],"changes",{}),M["a"].set(t.status,"unlock",e)},UPDATE(t,[e,s,i]){if(!t.models[e])return!1;i=Vf(i);const n=JSON.stringify(i),a=JSON.stringify(t.models[e].originals[s]);a===n?M["a"].delete(t.models[e].changes,s):M["a"].set(t.models[e].changes,s,i),Yf(e,{api:t.models[e].api,originals:t.models[e].originals,changes:t.models[e].changes})}},actions:{init(t){Object.keys(localStorage).filter(t=>t.startsWith("kirby$content$")).map(t=>t.split("kirby$content$")[1]).forEach(e=>{const s=localStorage.getItem("kirby$content$"+e);t.commit("CREATE",[e,JSON.parse(s)])}),Object.keys(localStorage).filter(t=>t.startsWith("kirby$form$")).map(t=>t.split("kirby$form$")[1]).forEach(e=>{const s=localStorage.getItem("kirby$form$"+e);let i=null;try{i=JSON.parse(s)}catch(a){}if(!i||!i.api)return localStorage.removeItem("kirby$form$"+e),!1;const n={api:i.api,originals:i.originals,changes:i.values};t.commit("CREATE",[e,n]),Yf(e,n),localStorage.removeItem("kirby$form$"+e)})},create(t,e){e.id=t.getters.id(e.id),(e.id.startsWith("pages/")||e.id.startsWith("site"))&&delete e.content.title;const s={api:e.api,originals:Vf(e.content),changes:{}};pg.get(e.api+"/unlock").then(s=>{!0===s.supported&&!0===s.unlocked&&t.commit("UNLOCK",t.state.models[e.id].changes)}).catch(()=>{}),t.commit("CREATE",[e.id,s]),t.dispatch("current",e.id)},current(t,e){t.commit("CURRENT",e)},disable(t){t.commit("STATUS",!1)},enable(t){t.commit("STATUS",!0)},lock(t,e){t.commit("LOCK",e)},move(t,[e,s]){e=t.getters.id(e),s=t.getters.id(s),t.commit("MOVE",[e,s])},remove(t,e){t.commit("REMOVE",e),t.getters.isCurrent(e)&&t.commit("CURRENT",null)},revert(t,e){e=e||t.state.current,t.commit("REVERT",e)},save(t,e){if(e=e||t.state.current,t.getters.isCurrent(e)&&!1===t.state.status.enabled)return!1;t.dispatch("disable");const s=t.getters.model(e),i={...s.originals,...s.changes};return pg.patch(s.api,i).then(()=>{t.commit("CREATE",[e,{...s,originals:i}]),t.dispatch("revert",e),t.dispatch("enable")}).catch(e=>{throw t.dispatch("enable"),e})},unlock(t,e){t.commit("UNLOCK",e)},update(t,[e,s,i]){i=i||t.state.current,t.commit("UPDATE",[i,e,s])}}},Jf={namespaced:!0,state:{instance:null,clock:0,step:5,beats:[]},mutations:{ADD(t,e){t.beats.push(e)},CLEAR(t){clearInterval(t.instance),t.clock=0},CLOCK(t){t.clock+=t.step},INITIALIZE(t,e){t.instance=e},REMOVE(t,e){const s=t.beats.map(t=>t.handler).indexOf(e);-1!==s&&M["a"].delete(t.beats,s)}},actions:{add(t,e){e={handler:e[0]||e,interval:e[1]||t.state.step},e.handler(),t.commit("ADD",e),1===t.state.beats.length&&t.dispatch("run")},clear(t){t.commit("CLEAR")},remove(t,e){t.commit("REMOVE",e),t.state.beats.length<1&&t.commit("CLEAR")},run(t){t.commit("CLEAR"),t.commit("INITIALIZE",setInterval(()=>{t.commit("CLOCK"),t.state.beats.forEach(e=>{t.state.clock%e.interval===0&&e.handler()})},1e3*t.state.step))}}},Gf={namespaced:!0,state:{all:[],current:null,default:null},mutations:{SET_ALL(t,e){t.all=e.map(t=>{return{code:t.code,default:t.default,direction:t.direction,locale:t.locale,name:t.name,rules:t.rules,url:t.url}})},SET_CURRENT(t,e){t.current=e,e&&e.code&&localStorage.setItem("kirby$language",e.code)},SET_DEFAULT(t,e){t.default=e}},actions:{current(t,e){t.commit("SET_CURRENT",e)},install(t,e){const s=e.filter(t=>t.default)[0];t.commit("SET_ALL",e),t.commit("SET_DEFAULT",s);const i=localStorage.getItem("kirby$language");if(i){const s=e.filter(t=>{return t.code===i})[0];if(s)return void t.dispatch("current",s)}t.dispatch("current",s||e[0]||null)},load(t){return pg.get("languages").then(e=>{t.dispatch("install",e.data)})}}},Zf={timer:null,namespaced:!0,state:{type:null,message:null,details:null,timeout:null},mutations:{SET(t,e){t.type=e.type,t.message=e.message,t.details=e.details,t.timeout=e.timeout},UNSET(t){t.type=null,t.message=null,t.details=null,t.timeout=null}},actions:{close(t){clearTimeout(this.timer),t.commit("UNSET")},open(t,e){t.dispatch("close"),t.commit("SET",e),e.timeout&&(this.timer=setTimeout(()=>{t.dispatch("close")},e.timeout))},success(t,e){"string"===typeof e&&(e={message:e}),t.dispatch("open",{type:"success",timeout:4e3,...e})},error(t,e){"string"===typeof e&&(e={message:e}),t.dispatch("open",{type:"error",...e})}}},Xf={namespaced:!0,state:{info:{title:null}},mutations:{SET_INFO(t,e){t.info=e},SET_LICENSE(t,e){t.info.license=e},SET_TITLE(t,e){t.info.title=e}},actions:{title(t,e){t.commit("SET_TITLE",e)},register(t,e){t.commit("SET_LICENSE",e)},load(t,e){return!e&&t.state.info.isReady&&t.rootState.user.current?new Promise(e=>{e(t.state.info)}):pg.system.info({view:"panel"}).then(e=>{return t.commit("SET_INFO",{isReady:e.isInstalled&&e.isOk,...e}),e.languages&&t.dispatch("languages/install",e.languages,{root:!0}),t.dispatch("translation/install",e.translation,{root:!0}),t.dispatch("translation/activate",e.translation.id,{root:!0}),e.user&&t.dispatch("user/current",e.user,{root:!0}),t.state.info}).catch(e=>{t.commit("SET_INFO",{isBroken:!0,error:e.message})})}}},Qf={namespaced:!0,state:{current:null,installed:[]},mutations:{SET_CURRENT(t,e){t.current=e},INSTALL(t,e){t.installed[e.id]=e}},actions:{load(t,e){return pg.translations.get(e)},install(t,e){t.commit("INSTALL",e),M["a"].i18n.add(e.id,e.data)},activate(t,e){const s=t.state.installed[e];s?(M["a"].i18n.set(e),t.commit("SET_CURRENT",e),document.dir=s.direction,document.documentElement.lang=e):t.dispatch("load",e).then(s=>{t.dispatch("install",s),t.dispatch("activate",e)})}}},tg=s("8c4f"),eg=function(t,e,s){rg.dispatch("system/load").then(()=>{const e=rg.state.user.current;if(!e)return rg.dispatch("user/visit",t.path),rg.dispatch("user/logout"),!1;const i=e.permissions.access;return!1===i.panel?(window.location.href=A.site,!1):!1===i[t.meta.view]?(rg.dispatch("notification/error",{message:M["a"].i18n.translate("error.access.view")}),s("/")):void s()})},sg=[{path:"/",name:"Home",redirect:"/site"},{path:"/browser",name:"Browser",component:M["a"].component("k-browser-view"),meta:{outside:!0}},{path:"/login",component:M["a"].component("k-login-view"),meta:{outside:!0}},{path:"/logout",beforeEnter(){Object.keys(localStorage).forEach(t=>{t.startsWith("kirby$content$")&&localStorage.removeItem(t)}),rg.dispatch("user/logout")},meta:{outside:!0}},{path:"/installation",component:M["a"].component("k-installation-view"),meta:{outside:!0}},{path:"/site",name:"Site",meta:{view:"site"},component:M["a"].component("k-site-view"),beforeEnter:eg},{path:"/site/files/:filename",name:"SiteFile",meta:{view:"site"},component:M["a"].component("k-file-view"),beforeEnter:eg,props:t=>({path:"site",filename:t.params.filename})},{path:"/pages/:path/files/:filename",name:"PageFile",meta:{view:"site"},component:M["a"].component("k-file-view"),beforeEnter:eg,props:t=>({path:"pages/"+t.params.path,filename:t.params.filename})},{path:"/users/:path/files/:filename",name:"UserFile",meta:{view:"users"},component:M["a"].component("k-file-view"),beforeEnter:eg,props:t=>({path:"users/"+t.params.path,filename:t.params.filename})},{path:"/pages/:path",name:"Page",meta:{view:"site"},component:M["a"].component("k-page-view"),beforeEnter:eg,props:t=>({path:t.params.path})},{path:"/settings",name:"Settings",meta:{view:"settings"},component:M["a"].component("k-settings-view"),beforeEnter:eg},{path:"/users/role/:role",name:"UsersByRole",meta:{view:"users"},component:M["a"].component("k-users-view"),beforeEnter:eg,props:t=>({role:t.params.role})},{path:"/users",name:"Users",meta:{view:"users"},beforeEnter:eg,component:M["a"].component("k-users-view")},{path:"/users/:id",name:"User",meta:{view:"users"},component:M["a"].component("k-user-view"),beforeEnter:eg,props:t=>({id:t.params.id})},{path:"/account",name:"Account",meta:{view:"account"},component:M["a"].component("k-user-view"),beforeEnter:eg,props:()=>({id:rg.state.user.current?rg.state.user.current.id:null})},{path:"/plugins/:id",name:"Plugin",meta:{view:"plugin"},props:t=>({plugin:t.params.id}),beforeEnter:eg,component:M["a"].component("k-custom-view")},{path:"*",name:"NotFound",beforeEnter:(t,e,s)=>{s("/")}}];M["a"].use(tg["a"]);const ig=new tg["a"]({mode:"history",routes:sg,url:"/"===A.url?"":A.url});ig.beforeEach((t,e,s)=>{"Browser"!==t.name&&!1===wm.all()&&s("/browser"),t.meta.outside||rg.dispatch("user/visit",t.path),rg.dispatch("view",t.meta.view),rg.dispatch("content/lock",null),rg.dispatch("content/unlock",null),rg.dispatch("heartbeat/clear"),s()});var ng=ig,ag={namespaced:!0,state:{current:null,path:null},mutations:{SET_CURRENT(t,e){t.current=e,e&&e.permissions?(M["a"].prototype.$user=e,M["a"].prototype.$permissions=e.permissions):(M["a"].prototype.$user=null,M["a"].prototype.$permissions=null)},SET_PATH(t,e){t.path=e}},actions:{current(t,e){t.commit("SET_CURRENT",e)},email(t,e){t.commit("SET_CURRENT",{...t.state.current,email:e})},language(t,e){t.dispatch("translation/activate",e,{root:!0}),t.commit("SET_CURRENT",{...t.state.current,language:e})},load(t){return pg.auth.user().then(e=>{return t.commit("SET_CURRENT",e),e})},login(t,e){return pg.auth.login(e).then(e=>{return t.commit("SET_CURRENT",e),t.dispatch("translation/activate",e.language,{root:!0}),ng.push(t.state.path||"/"),e})},logout(t,e){t.commit("SET_CURRENT",null),e?window.location.href=(window.panel.url||"")+"/login":pg.auth.logout().then(()=>{ng.push("/login")}).catch(()=>{ng.push("/login")})},name(t,e){t.commit("SET_CURRENT",{...t.state.current,name:e})},visit(t,e){t.commit("SET_PATH",e)}}};M["a"].use(Kf["a"]);var rg=new Kf["a"].Store({strict:!1,state:{breadcrumb:[],dialog:null,drag:null,isLoading:!1,search:!1,title:null,view:null},mutations:{SET_BREADCRUMB(t,e){t.breadcrumb=e},SET_DIALOG(t,e){t.dialog=e},SET_DRAG(t,e){t.drag=e},SET_SEARCH(t,e){!0===e&&(e={}),t.search=e},SET_TITLE(t,e){t.title=e},SET_VIEW(t,e){t.view=e},START_LOADING(t){t.isLoading=!0},STOP_LOADING(t){t.isLoading=!1}},actions:{breadcrumb(t,e){t.commit("SET_BREADCRUMB",e)},dialog(t,e){t.commit("SET_DIALOG",e)},drag(t,e){t.commit("SET_DRAG",e)},isLoading(t,e){t.commit(!0===e?"START_LOADING":"STOP_LOADING")},search(t,e){t.commit("SET_SEARCH",e)},title(t,e){let s;s=t.state.user.current?pg.site.get(["title"]):new Promise(e=>{e(t.state.system.info)}),s.then(s=>{t.commit("SET_TITLE",e),t.dispatch("system/title",s.title),document.title=e||"",document.title+=null!==e?" | "+s.title:s.title})},view(t,e){t.commit("SET_VIEW",e)}},modules:{content:Wf,heartbeat:Jf,languages:Gf,notification:Zf,system:Xf,translation:Qf,user:ag}}),og={running:0,request(t,e,s=!1){e=Object.assign(e||{},{credentials:"same-origin",cache:"no-store",headers:{"x-requested-with":"xmlhttprequest","content-type":"application/json",...e.headers}}),"GET"!==e.method&&"POST"!==e.method&&(e.headers["x-http-method-override"]=e.method,e.method="POST"),rg.state.languages.current&&(e.headers["x-language"]=rg.state.languages.current.code),e.headers["x-csrf"]=window.panel.csrf;const i=t+"/"+JSON.stringify(e);return pg.config.onStart(i,s),this.running++,fetch(pg.config.endpoint+"/"+t,e).then(t=>{return t.text()}).then(t=>{try{return JSON.parse(t)}catch(e){throw new Error("The JSON response from the API could not be parsed. Please check your API connection.")}}).then(t=>{if(t.status&&"error"===t.status)throw t;let e=t;return t.data&&t.type&&"model"===t.type&&(e=t.data),this.running--,pg.config.onComplete(i),pg.config.onSuccess(t),e}).catch(t=>{throw this.running--,pg.config.onComplete(i),pg.config.onError(t),t})},get(t,e,s,i=!1){return e&&(t+="?"+Object.keys(e).map(t=>{const s=e[t];return void 0!==s&&null!==s?t+"="+s:null}).filter(t=>null!==t).join("&")),this.request(t,Object.assign(s||{},{method:"GET"}),i)},post(t,e,s,i="POST",n=!1){return this.request(t,Object.assign(s||{},{method:i,body:JSON.stringify(e)}),n)},patch(t,e,s,i=!1){return this.post(t,e,s,"PATCH",i)},delete(t,e,s,i=!1){return this.post(t,e,s,"DELETE",i)}},lg={list(t){return pg.get("roles",t)},get(t){return pg.get("roles/"+t)},options(t){return this.list(t).then(t=>{return t.data.map(t=>{return{info:t.description||"(".concat(M["a"].i18n.translate("role.description.placeholder"),")"),text:t.title,value:t.name}})})}},ug={info(t){return pg.get("system",t)},install(t){return pg.post("system/install",t).then(t=>{return t.user})},register(t){return pg.post("system/register",t)}},cg={get(t){return pg.get("site",t)},update(t){return pg.post("site",t)},title(t){return pg.patch("site/title",{title:t})},options(){return pg.get("site",{select:"options"}).then(t=>{const e=t.options;let s=[];return s.push({click:"rename",icon:"title",text:M["a"].i18n.translate("rename"),disabled:!e.changeTitle}),s})},children(t){return pg.post("site/children/search",t)},blueprint(){return pg.get("site/blueprint")},blueprints(){return pg.get("site/blueprints")}},dg={list(){return pg.get("translations")},get(t){return pg.get("translations/"+t)},options(){let t=[];return this.list().then(e=>{return t=e.data.map(t=>({value:t.id,text:t.name})),t})}},hg={create(t){return pg.post(this.url(),t)},list(t){return pg.post(this.url(null,"search"),t)},get(t,e){return pg.get(this.url(t),e)},update(t,e){return pg.patch(this.url(t),e)},delete(t){return pg.delete(this.url(t))},changeEmail(t,e){return pg.patch(this.url(t,"email"),{email:e})},changeLanguage(t,e){return pg.patch(this.url(t,"language"),{language:e})},changeName(t,e){return pg.patch(this.url(t,"name"),{name:e})},changePassword(t,e){return pg.patch(this.url(t,"password"),{password:e})},changeRole(t,e){return pg.patch(this.url(t,"role"),{role:e})},deleteAvatar(t){return pg.delete(this.url(t,"avatar"))},blueprint(t){return pg.get(this.url(t,"blueprint"))},breadcrumb(t){return[{link:"/users/"+t.id,label:t.username}]},options(t){return pg.get(this.url(t),{select:"options"}).then(t=>{const e=t.options;let s=[];return s.push({click:"rename",icon:"title",text:M["a"].i18n.translate("user.changeName"),disabled:!e.changeName}),s.push({click:"email",icon:"email",text:M["a"].i18n.translate("user.changeEmail"),disabled:!e.changeEmail}),s.push({click:"role",icon:"bolt",text:M["a"].i18n.translate("user.changeRole"),disabled:!e.changeRole}),s.push({click:"password",icon:"key",text:M["a"].i18n.translate("user.changePassword"),disabled:!e.changePassword}),s.push({click:"language",icon:"globe",text:M["a"].i18n.translate("user.changeLanguage"),disabled:!e.changeLanguage}),s.push({click:"remove",icon:"trash",text:M["a"].i18n.translate("user.delete"),disabled:!e.delete}),s})},url(t,e){let s=t?"users/"+t:"users";return e&&(s+="/"+e),s},link(t,e){return"/"+this.url(t,e)}},pg={config:{onStart(){},onComplete(){},onSuccess(){},onError(t){throw window.console.log(t.message),t}},auth:Uf,files:zf,pages:Hf,roles:lg,system:ug,site:cg,translations:dg,users:hg,...og};pg.config.endpoint=A.api,pg.requests=[],pg.config.onStart=(t,e)=>{!1===e&&rg.dispatch("isLoading",!0),pg.requests.push(t)},pg.config.onComplete=t=>{pg.requests=pg.requests.filter(e=>{return e!==t}),0===pg.requests.length&&rg.dispatch("isLoading",!1)},pg.config.onError=t=>{A.debug&&window.console.error(t),403!==t.code||"Unauthenticated"!==t.message&&"access.panel"!==t.key||rg.dispatch("user/logout",!0)};let mg=setInterval(pg.auth.user,3e5);pg.config.onSuccess=()=>{clearInterval(mg),mg=setInterval(pg.auth.user,3e5)},M["a"].prototype.$api=pg,M["a"].config.errorHandler=t=>{A.debug&&window.console.error(t),rg.dispatch("notification/error",{message:t.message||"An error occurred. Please reload the panel"})},window.panel=window.panel||{},window.panel.error=(t,e)=>{A.debug&&window.console.error(t+": "+e),rg.dispatch("error",t+". See the console for more information.")};s("86c7");var fg=(t,e)=>{t=String(t);let s="";e=(e||2)-t.length;while(s.length<e)s+="0";return s+t},gg=(t="3/2")=>{const e=String(t).split("/");if(2!==e.length)return"100%";const s=Number(e[0]),i=Number(e[1]);let n=100;return 0!==s&&0!==i&&(n=100/s*i),n+"%"},bg=(t,e=[],s="")=>{const i="-";return s="a-z0-9"+s,t=t.trim().toLowerCase(),e.forEach(e=>{e&&Object.keys(e).forEach(s=>{const i="/"!==s.substr(0,1),n=s.substring(1,s.length-1),a=i?s:n;t=t.replace(new RegExp(RegExp.escape(a),"g"),e[s])})}),t=t.replace("/[^\t\n\r -~]/",""),t=t.replace(new RegExp("[^"+s+"]","ig"),i),t=t.replace(new RegExp("["+RegExp.escape(i)+"]{2,}","g"),i),t=t.replace("/",i),t=t.replace(new RegExp("^[^"+s+"]+","g"),""),t=t.replace(new RegExp("[^"+s+"]+$","g"),""),t},kg=t=>{t=t||{};var e=t.desc?-1:1,s=-e,i=/^0/,n=/\s+/g,a=/^\s+|\s+$/g,r=/[^\x00-\x80]/,o=/^0x[0-9a-f]+$/i,l=/(0x[\da-fA-F]+|(^[\+\-]?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?(?=\D|\s|$))|\d+)/g,u=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,c=t.insensitive?function(t){return d(""+t).replace(a,"")}:function(t){return(""+t).replace(a,"")};function d(t){return t.toLocaleLowerCase?t.toLocaleLowerCase():t.toLowerCase()}function h(t){return t.replace(l,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0")}function p(t,e){return(!t.match(i)||1===e)&&parseFloat(t)||t.replace(n," ").replace(a,"")||0}return function(t,i){var n=c(t),a=c(i);if(!n&&!a)return 0;if(!n&&a)return s;if(n&&!a)return e;var l=h(n),d=h(a),m=parseInt(n.match(o),16)||1!==l.length&&Date.parse(n),f=parseInt(a.match(o),16)||m&&a.match(u)&&Date.parse(a)||null;if(f){if(m<f)return s;if(m>f)return e}for(var g=l.length,b=d.length,k=0,v=Math.max(g,b);k<v;k++){var $=p(l[k]||"",g),_=p(d[k]||"",b);if(isNaN($)!==isNaN(_))return isNaN($)?e:s;if(r.test($+_)&&$.localeCompare){var y=$.localeCompare(_);if(y>0)return e;if(y<0)return s;if(k===v-1)return 0}else{if($<_)return s;if($>_)return e}}return 0}},vg={ucfirst(t){const e=String(t);return e.charAt(0).toUpperCase()+e.substr(1)},lcfirst(t){const e=String(t);return e.charAt(0).toLowerCase()+e.substr(1)}},$g=(t,e)=>{const s={url:"/",field:"file",method:"POST",accept:"text",attributes:{},complete:function(){},error:function(){},success:function(){},progress:function(){}},i=Object.assign(s,e),n=new FormData;n.append(i.field,t,t.name),i.attributes&&Object.keys(i.attributes).forEach(t=>{n.append(t,i.attributes[t])});const a=new XMLHttpRequest,r=e=>{if(!e.lengthComputable||!i.progress)return;let s=Math.max(0,Math.min(100,e.loaded/e.total*100));i.progress(a,t,Math.ceil(s))};a.upload.addEventListener("loadstart",r),a.upload.addEventListener("progress",r),a.addEventListener("load",e=>{let s=null;try{s=JSON.parse(e.target.response)}catch(n){s={status:"error",message:"The file could not be uploaded"}}s.status&&"error"===s.status?i.error(a,t,s):(i.success(a,t,s),i.progress(a,t,100))}),a.addEventListener("error",e=>{const s=JSON.parse(e.target.response);i.error(a,t,s),i.progress(a,t,100)}),a.open("POST",i.url,!0),i.headers&&Object.keys(i.headers).forEach(t=>{const e=i.headers[t];a.setRequestHeader(t,e)}),a.send(n)},_g=t=>{return!!t.dataTransfer&&(!!t.dataTransfer.types&&(!0===t.dataTransfer.types.includes("Files")&&!1===t.dataTransfer.types.includes("text/plain")))};M["a"].prototype.$helper={clone:Vf,isUploadEvent:_g,debounce:bt,pad:fg,ratio:gg,slug:bg,sort:kg,string:vg,upload:$g};var yg=s("f2f3");M["a"].use(yg["a"].plugin,rg);var xg=s("19e9"),wg=s.n(xg),Sg=s("5a0c"),Cg=s.n(Sg),Og=s("f906"),Eg=s.n(Og);Cg.a.extend(Eg.a),M["a"].prototype.$library={autosize:wg.a,dayjs:Cg.a};let Tg={};for(var jg in M["a"].options.components)Tg[jg]=M["a"].options.components[jg];const Ig=(t,e)=>{e.template||e.render||e.extends?(e.extends&&"string"===typeof e.extends&&(e.extends=Tg[e.extends],e.template&&(e.render=null)),e.mixins&&(e.mixins=e.mixins.map(t=>{return"string"===typeof t?Tg[t]:t})),Tg[t]&&window.console.warn('Plugin is replacing "'.concat(t,'"')),M["a"].component(t,e)):rg.dispatch("notification/error",'Neither template or render method provided nor extending a component when loading plugin component "'.concat(t,'". The component has not been registered.'))};Object.entries(window.panel.plugins.components).forEach(([t,e])=>{Ig(t,e)}),Object.entries(window.panel.plugins.fields).forEach(([t,e])=>{Ig(t,e)}),Object.entries(window.panel.plugins.sections).forEach(([t,e])=>{Ig(t,{...e,mixins:[Xp].concat(e.mixins||[])})}),Object.entries(window.panel.plugins.views).forEach(([t,e])=>{if(!e.component)return rg.dispatch("notification/error",'No view component provided when loading view "'.concat(t,'". The view has not been registered.')),void delete window.panel.plugins.views[t];e.link="/plugins/"+t,void 0===e.icon&&(e.icon="page"),void 0===e.menu&&(e.menu=!0),window.panel.plugins.views[t]={link:e.link,icon:e.icon,menu:e.menu},M["a"].component("k-"+t+"-plugin-view",e.component)}),window.panel.plugins.use.forEach(t=>{M["a"].use(t)}),M["a"].config.productionTip=!1,M["a"].config.devtools=!0,M["a"].use(R),M["a"].use(D),M["a"].use(U.a),new M["a"]({router:ng,store:rg,created(){window.panel.app=this,window.panel.plugins.created.forEach(t=>{t(this)}),this.$store.dispatch("content/init")},render:t=>{return t(P)}}).$mount("#app")},"577a":function(t,e,s){},"580a":function(t,e,s){"use strict";var i=s("ae29"),n=s.n(i);n.a},"5aee":function(t,e,s){"use strict";var i=s("931e"),n=s.n(i);n.a},"5b23":function(t,e,s){"use strict";var i=s("05be"),n=s.n(i);n.a},"5c0b":function(t,e,s){"use strict";var i=s("9c0c"),n=s.n(i);n.a},"5c47":function(t,e,s){},"5cbe":function(t,e,s){},"5d33":function(t,e,s){"use strict";var i=s("4e0b"),n=s.n(i);n.a},"5e77":function(t,e,s){},6018:function(t,e,s){"use strict";var i=s("2a08"),n=s.n(i);n.a},"64e4":function(t,e,s){"use strict";var i=s("99ed"),n=s.n(i);n.a},"696b":function(t,e,s){"use strict";var i=s("40a6"),n=s.n(i);n.a},6992:function(t,e,s){},"6a18":function(t,e,s){"use strict";var i=s("c57e"),n=s.n(i);n.a},"6ab3":function(t,e,s){"use strict";var i=s("bf0b"),n=s.n(i);n.a},"6ae8":function(t,e,s){},"6bc0":function(t,e,s){},"6bcd":function(t,e,s){"use strict";var i=s("d49c"),n=s.n(i);n.a},"6f7b":function(t,e,s){"use strict";var i=s("f13c"),n=s.n(i);n.a},7041:function(t,e,s){},7086:function(t,e,s){},7187:function(t,e,s){},"718c":function(t,e,s){"use strict";var i=s("43bf"),n=s.n(i);n.a},7491:function(t,e,s){},7568:function(t,e,s){"use strict";var i=s("6bc0"),n=s.n(i);n.a},"772f":function(t,e,s){},7737:function(t,e,s){"use strict";var i=s("2609"),n=s.n(i);n.a},7740:function(t,e,s){},"7a7d":function(t,e,s){"use strict";var i=s("53fd"),n=s.n(i);n.a},"7d5d":function(t,e,s){"use strict";var i=s("1e4a"),n=s.n(i);n.a},"7dc7":function(t,e,s){"use strict";var i=s("6992"),n=s.n(i);n.a},"7e85":function(t,e,s){"use strict";var i=s("f239"),n=s.n(i);n.a},"7f6e":function(t,e,s){"use strict";var i=s("772f"),n=s.n(i);n.a},8065:function(t,e,s){},8152:function(t,e,s){},8216:function(t,e,s){},"82b4":function(t,e,s){},"862b":function(t,e,s){"use strict";var i=s("f0f6"),n=s.n(i);n.a},"86ab":function(t,e,s){},"86c7":function(t,e,s){s("5319"),RegExp.escape=t=>t.replace(new RegExp("[-/\\\\^$*+?.()[\\]{}]","gu"),"\\$&")},"877d":function(t,e,s){},"893d":function(t,e,s){"use strict";var i=s("fdbf"),n=s.n(i);n.a},"8abf":function(t,e,s){},"8c28":function(t,e,s){"use strict";var i=s("4f8f"),n=s.n(i);n.a},"931e":function(t,e,s){},"977f":function(t,e,s){"use strict";var i=s("ccf4"),n=s.n(i);n.a},9799:function(t,e,s){"use strict";var i=s("8152"),n=s.n(i);n.a},"98a1":function(t,e,s){"use strict";var i=s("20f8"),n=s.n(i);n.a},"99ed":function(t,e,s){},"9aff":function(t,e,s){},"9bd5":function(t,e,s){"use strict";var i=s("3e1e"),n=s.n(i);n.a},"9c0c":function(t,e,s){},"9d9f":function(t,e,s){},"9e26":function(t,e,s){"use strict";var i=s("9d9f"),n=s.n(i);n.a},a11f:function(t,e,s){},a134:function(t,e,s){"use strict";var i=s("b329"),n=s.n(i);n.a},a2eb:function(t,e,s){},a567:function(t,e,s){"use strict";var i=s("6ae8"),n=s.n(i);n.a},a5f3:function(t,e,s){"use strict";var i=s("1174"),n=s.n(i);n.a},a66d:function(t,e,s){"use strict";var i=s("f464"),n=s.n(i);n.a},ac27:function(t,e,s){"use strict";var i=s("3dcf"),n=s.n(i);n.a},ae29:function(t,e,s){},af07:function(t,e,s){},b0d6:function(t,e,s){"use strict";var i=s("c6d0"),n=s.n(i);n.a},b329:function(t,e,s){},b5d2:function(t,e,s){"use strict";var i=s("526c"),n=s.n(i);n.a},b746:function(t,e,s){"use strict";var i=s("7187"),n=s.n(i);n.a},b846:function(t,e,s){},ba8f:function(t,e,s){"use strict";var i=s("0643"),n=s.n(i);n.a},bb41:function(t,e,s){"use strict";var i=s("49b6"),n=s.n(i);n.a},bd96:function(t,e,s){"use strict";var i=s("e947"),n=s.n(i);n.a},bf0b:function(t,e,s){},bf53:function(t,e,s){"use strict";var i=s("ecf0"),n=s.n(i);n.a},c08c:function(t,e,s){},c119:function(t,e,s){"use strict";var i=s("8065"),n=s.n(i);n.a},c130:function(t,e,s){},c57e:function(t,e,s){},c6d0:function(t,e,s){},c7c8:function(t,e,s){"use strict";var i=s("7086"),n=s.n(i);n.a},c857:function(t,e,s){"use strict";var i=s("022d"),n=s.n(i);n.a},c9cb:function(t,e,s){"use strict";var i=s("577a"),n=s.n(i);n.a},cb8f:function(t,e,s){"use strict";var i=s("82b4"),n=s.n(i);n.a},cc79:function(t,e,s){"use strict";var i=s("0de1"),n=s.n(i);n.a},cca8:function(t,e,s){"use strict";var i=s("b846"),n=s.n(i);n.a},ccf4:function(t,e,s){},d0c1:function(t,e,s){"use strict";var i=s("d4e5"),n=s.n(i);n.a},d221:function(t,e,s){"use strict";var i=s("1a8b"),n=s.n(i);n.a},d49c:function(t,e,s){},d4e5:function(t,e,s){},d6fc:function(t,e,s){"use strict";var i=s("877d"),n=s.n(i);n.a},d733:function(t,e,s){},daa8:function(t,e,s){"use strict";var i=s("04f3"),n=s.n(i);n.a},ddfd:function(t,e,s){"use strict";var i=s("7491"),n=s.n(i);n.a},df0d:function(t,e,s){"use strict";var i=s("5c47"),n=s.n(i);n.a},e947:function(t,e,s){},ecf0:function(t,e,s){},ee15:function(t,e,s){"use strict";var i=s("4c2e"),n=s.n(i);n.a},efe1:function(t,e,s){},f0f6:function(t,e,s){},f13c:function(t,e,s){},f239:function(t,e,s){},f3da:function(t,e,s){},f464:function(t,e,s){},f56d:function(t,e,s){"use strict";var i=s("7041"),n=s.n(i);n.a},f8a7:function(t,e,s){"use strict";var i=s("4d5b"),n=s.n(i);n.a},f95f:function(t,e,s){"use strict";var i=s("0756"),n=s.n(i);n.a},f9c1:function(t,e,s){},fa6a:function(t,e,s){"use strict";var i=s("5e77"),n=s.n(i);n.a},fc0f:function(t,e,s){"use strict";var i=s("a11f"),n=s.n(i);n.a},fdbf:function(t,e,s){}});